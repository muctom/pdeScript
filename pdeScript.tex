% chktex-file 11
% chktex-file 35
% chktex-file 2
% chktex-file 10
% chktex-file 40

\documentclass{report}

\usepackage{a4}

\usepackage[english]{babel}
\usepackage[utf8]{inputenc}
\usepackage{amsmath, amssymb, mathtools, esint, bbold, mathabx}
\usepackage{graphicx}
\usepackage{color}
\usepackage{datetime}
\usepackage[hidelinks]{hyperref}
\usepackage{enumitem}
\usepackage{stmaryrd}

\setlength{\parindent}{0em} 

\usepackage{amsthm}
\newtheoremstyle{tommy}% ⟨name ⟩
{15pt}% ⟨Space above ⟩1
{15pt}% ⟨Space below ⟩1
{\normalfont}% ⟨Body font ⟩
{}% ⟨Indent amount ⟩2
{\bfseries}% ⟨Theorem head font⟩
{}% ⟨Punctuation after theorem head ⟩
{0.7em}% ⟨Space after theorem head ⟩3
{}% ⟨Theorem head spec (can be left empty, meaning ‘normal’)⟩

\theoremstyle{tommy}
\newtheorem{defn}{Definition}
\newtheorem{thm}[defn]{Theorem}
\newtheorem{lem}[defn]{Lemma}
\newtheorem{nota}[defn]{Notation}
\newtheorem{cor}[defn]{Corrolary}
\newtheorem{prop}[defn]{Proposition}
\newtheorem{eg}[defn]{Example}
\newtheorem{rem}[defn]{Remark}
\newtheorem{ex}[defn]{Exercise}

% Counter
\usepackage{chngcntr}
\counterwithin{defn}{chapter}

\renewcommand\div{\operatorname{div}}
\newcommand{\dist}{\operatorname{dist}}
\newcommand{\four}{\mathcal{F}}
\newcommand{\supp}{\operatorname{supp}}
\newcommand{\sgn}{\operatorname{sgn}}
\newcommand{\Rd}{\mathbb{R}^d}
\renewcommand\qedsymbol{\(\blacksquare\)}

\title{Partial Differerential Equations \\ Thành Nam Phan \\ Winter Semester 2021/2022}
\author{Lecture notes \TeX{}ed by Thomas Eingartner}
\date{\today, \currenttime}

\begin{document}

  \maketitle
  \tableofcontents
  \newpage
  Please note that I write this lecture notes for my personal use. I may write things differently than presented in the lecture. This script also contains solutions for exercises (which may be wrong). Of course, I don't push them to GitHub while the exercises still can be handed in.
  \newpage

  \chapter{Introduction}

  A differential equation is an equation of a function and its derivatives. 

  \begin{eg}[Linear ODE]
    Let \(f: \mathbb{R} \to \mathbb{R}\),
    \begin{align*}
      \begin{cases}
        f(t) = a f(t) \text{ for all } t \ge 0, a \in \mathbb{R} \\
        f(0) = a_0
      \end{cases}
    \end{align*}
    is a linear ODE (Ordinary differential equation). The solution is: \(f(t) = a_0 e^{at}\) for all \(t \ge 0\).
  \end{eg}

  \begin{eg} (Non-Linear ODE) \(f: \mathbb{R} \to \mathbb{R}\)
    \begin{align*}
      \begin{cases}
        f'(t) = 1 + f^2(t) \\
        f(0) = 1
      \end{cases}
    \end{align*}
    Lets consider \(f(t) = \tan(t) = \frac{\sin(t)}{\cos(t)}\). Then we have \[f'(t) = \frac{1}{\cos(t)} = 1 + \tan^2(t) = 1 + f^2(t),\] but this solution only is \emph{good} in \((- \pi, \pi)\). It's a problem to extend this to \(\mathbb{R} \to \mathbb{R}\).
  \end{eg}

  A PDE (Partial Differential Equation) is an equation of a function of 2 or more variables and its derivatives.

  \begin{rem}
    Recall for \( \Omega \subseteq \mathbb{R}^d\) open and \(f: \Omega \to \{\mathbb{R}, \mathbb{C}\}\) the notation of partial derivatives:
    \begin{itemize}
      \item \(\partial_{x_i} f(x) = \lim_{h \to 0} \frac{f(x + he_i) - f(x)}{h}, \text{where } e_i = (0, 0, \dots, 1, \dots, 0, 0) \in \mathbb{R}^d\)
      \item \(D^\alpha f(x) = \partial_{x_1}^{\alpha_1} \cdots \partial_{x_d}^{\alpha_d} f(x), \text{where } \alpha \in \mathbb{N}^d\)
      \item \(Df = \nabla f = (\partial{x_1}, \ldots, \partial_{x_d})\)
      \item \(\Delta f = \partial_{x_1}^2 + \cdots + \partial^2_{x_d} f\)
      \item \(D^k f = (D^\alpha f)_{|\alpha| = k},  \text{where } |\alpha| = \sum_{i=1}^d |\alpha_i|\)
      \item \(D^2 f = (\partial_{x_i} \partial_{x_j} f)_{1 \le i, j \le d}\)
    \end{itemize}
  \end{rem}

  \begin{defn}
    Given a function \( F \). Then the equation of the form 
    \begin{align*}
      F(D^k u(x), D^{k-1} u(x), \dots, Du(x), u(x), x) = 0 
    \end{align*}
    with the unknown function \(u:\ \Omega \subseteq \mathbb{R}^d \longrightarrow \mathbb{R}\) is called a \emph{PDE of order \(k\)}.
    \begin{itemize}
      \item Equations \(\sum_d a_\alpha(x) D^\alpha u(x) = 0\), where \(a_\alpha\) and \(u\) are unknown functions are called \emph{Linear PDEs}. 
      \item Equations \(\sum_{|\alpha| = k} a_\alpha(x) D^\alpha u(x) + F(D^{k-1}u, D^{k-2}u, \dots, Du, u, x) = 0\) are called \emph{semi-linear PDEs}.
    \end{itemize}
  \end{defn}

  Goals: For \emph{solving a PDE} we want to
  \begin{itemize}
    \item Find an explizit solution! This is in many cases impossible.
    \item Prove a \emph{well-posted theory} (existence of solutions, uniqueness of solutions, continuous dependence of solutions on the data)
  \end{itemize}

  We have two notations of solutions:
  \begin{enumerate}
    \item Classical solution: The solution is continuous differentiable (e.g. \( \Delta u = f  \leadsto u \in C^2  \))
    \item Weak Solutions: The solution is not smooth/continuous
  \end{enumerate}

  \begin{defn} (Spaces of continous and differentiable functions)
    Let \(\Omega \subseteq R^d\) be open
    \begin{align*}
      C(\Omega) &= \left\{ f: \ \Omega \to \mathbb{R} \mid f \text{ continuous} \right\} \\
      C^k(\Omega) &= \left\{ f: \ \Omega \to \mathbb{R} \mid D^\alpha f \text{ is continuous for all } |\alpha| \le k \right\}
    \end{align*}
  \end{defn}

  Classical solution of a PDE of order \(k \leadsto C^k\) solutions!
  \begin{align*}
    L^p(\Omega) = \left\{ f: \ \Omega \to \mathbb{R} \text{ lebesgue measurable} \mid \int_\Omega |f|^p d\lambda < \infty, 1 \le p < \infty \right\}
  \end{align*}

  Sobolev Space:
  \begin{align*}
    W^{k,p}(\Omega)= \left \{ f \in L^p(\Omega) \mid \forall \alpha \in \mathbb{N}^n \text{ with } |\alpha| \leq k: D^{\alpha}f \in L^p(\Omega) \text{exists}  \right \}
  \end{align*}

  In this course we will investigate
  \begin{itemize}
    \item Laplace / Poisson Equation: \(-\Delta u = f\)
    \item Heat Equation: \(\partial_t u - \Delta u = f\)
    \item Wave Equation: \(\partial_t^2 - \Delta u = f\)
    \item Schrödinger Equation: \(i \partial_t u - \Delta u = f\)
  \end{itemize}


  \chapter{Laplace / Poisson Equation}

  \section{Laplace Equation}
  \(- \Delta u = 0\) (Laplace) or \(-\Delta u = f(x)\) (Poisson).

  \begin{defn} (Harmonic Function)
    Let \(\Omega\) be an open set in \(\mathbb{R}^d\). If \(u \in C^2(\Omega)\) and \(\Delta u = 0\) in \(\Omega\), then \(u\) is a harmonic function in \(\Omega\).
  \end{defn}

  \begin{thm} (Gauss-Green Theorem)\label{gauss-green}
    Let \(A \subseteq \mathbb{R}^d\) open, \(\vec{F} \in C^1(A, \mathbb{R}^d)\) and \(K \subseteq A\) compact with \(C^1\) boundary. Then
    \[ \int_{\partial K} \vec{F} \cdot \vec{\nu}\ dS(x) = \int_K \div(\vec{F})\ dx \]
    where \(\nu\) is the outward unit normal vector field on \(\partial K\).
  Thus
  \begin{align*}
    \int_{\partial V} \nabla u \cdot \vec{\nu}\ dS(x)
    = \int_V \div(\nabla u) \ dx
    = \int_V \Delta u(x) \ dx
  \end{align*}
  for any \(V \subseteq \Omega \) open.
  \end{thm}


  \begin{thm} (Green's Identities)\label{green-identities}
    Let \(A \subseteq \mathbb{R}^d\) open, \(K \subseteq A\) d-dim.\ compactum with \(C^1\) boundary and \(f, g \in C^2(A)\)
    \begin{enumerate}
      \item Green's first identity (Partial Integration): \begin{align*}
        \int_K \nabla f \cdot \nabla g \, dx = \int_{\partial K} f \frac{\partial g}{\partial \nu} \, dS - \int_K f \Delta g \, dx
      \end{align*}
      where \(\frac{\partial g}{\partial \nu} = \partial_\nu g = \nu \cdot \nabla g\)
      \item Green's second identity: \begin{align*}
        \int_K f \Delta g - (\Delta f) g \, dx = \int_{\partial K} \left(f \frac{\partial g}{\partial \nu} - g \frac{\partial f}{\partial \nu}\right) \, dS
      \end{align*}
    \end{enumerate}
  \end{thm}

  \begin{ex}
    Let \(\Omega \subseteq \mathbb{R}^d\) open, let \(f: \Omega \to \mathbb{R}\) be continuous. Prove that if \( \int_B f(x) \ dx = 0 \), then \( u \equiv 0 \) in \(\Omega\).
  \end{ex}

  \begin{thm} (Fundamential Lemma of Calculus of Variations)
    Let \(\Omega \subseteq \mathbb{R}^d\) open, let \(f \in L^1(\Omega)\). If 
    \(\int_B f(x) \ dx = 0\) for all \(x \in B_r(x) \subseteq \Omega\), then \(f(x) = 0\) a.e. (almost everywhere) \(x \in \Omega\).
  \end{thm}

  \begin{rem} (Solving Laplace Equation)
    \(-\Delta u = 0\) in \(\mathbb{R}^d\). Consider the case when \(u\) is radial, i.e. \(u(x) = v(|x|)\), \(v: \mathbb{R} \to \mathbb{R}\). Denote \(r = |x|\), then 
    \[
      \frac{\partial r}{\partial x} 
      = \frac{\partial}{\partial x_i}  \left(\sqrt{x_1^2 + \dots + x_d^2}\right) \\
      = \frac{2 x_i}{2{\sqrt{x_1^2 + \dots + x_d^2}}} \\
      = \frac{x_i}{r}
    \]
    Then
    \begin{align*}
      \partial_{x_i} u &= \partial_{x_i} v = (\partial_r v) \frac{\partial r}{\partial {x_i}} 
      = v'(r) \frac{x_i}{r} \\
      \partial^2_{x_i} u 
      &= \partial_{x_i} \left(v(r)' \frac{x_i}{r}\right) 
      = (\partial_{x_i}v(r)') \frac{x_i}{r} + v'(r) \partial_{x_i} \left(\frac{x_i}{r}\right) \\
      &= (\partial_r v'(r))\left(\frac{dr}{\partial_{x_i}}\right) \frac{x_i}{r} + v'(r)\left( \frac{1}{r} - \frac{x_i}{r^2}(\partial_{x_i} r) \right) 
      = v'(r) \frac{x_i^2}{r^2} + v'r(r)\left(\frac{1}{r} - \frac{x_i^2}{r^3}\right)
    \end{align*}

    So we have \(\Delta u = \left( \sum_{i=1}^d d_{x_i}^2 \right) u = v''(r) + v'(r) (\frac{d}{r} - \frac{1}{r})\)

    Thus \(\Delta u = v'(r) + v(r) \frac{d-1}{r}\). We consider \(d \ge 2\). Laplace operator \(\Delta u = 0\) now becomes \(v''(r) + v'(r) \frac{d-1}{r} = 0\) \\
    \(\Rightarrow\) \(\log(v(r))' = \frac{v'(r)}{v(r)} = - \frac{d-1}{r} = -(d-1)(\log r)'\) (recall \(log(f)' = \frac{f'}{f}\)) \\
    \(\Rightarrow v'(r) = \frac{1}{v^{d-2} + \text{ const.}}\) \\
    \(\begin{cases}
      \frac{const}{r^{d-2}} + const xx + const &,d \ge 3 \\
      const \log(r) + const xx r + const &,d = 2
    \end{cases}\)
  \end{rem}

  \begin{defn} 
    (Fundamential Solution of Laplace Equation)
    \begin{align*}
      \Phi(x) = \begin{cases}
        - \frac{1}{2 \pi} \log(|x|), & d = 2 \\
        \frac{1}{(d-2) d |B_1|} \frac{1}{|x|^{d-2}}, & d \ge 3
      \end{cases}
    \end{align*}
    
    Where \( |B_1| \) is the Volume of the ball \(B_1(0) = B(0, 1) \subseteq \mathbb{R}^d\).

  \end{defn}

  \begin{rem}
    \(\Delta \Phi(x) = 0\) for all \(x \in \mathbb{R}^d\) and \(x \ne 0\). 
  \end{rem}


  \section{Poisson-Equation}
  The Poisson-Equation is \(-\Delta u(x) = f(x)\) in \(\mathbb{R}^d\). The explicit solution is given by
  \begin{align*}
    u(x) &= (\Phi \star f)(x)
    = \int_{\mathbb{R}^d} \Phi(x-y)f(y) \ dy 
    = \int_{\mathbb{R}^d} \Phi(y)f(x-y) \ dy
  \end{align*}
  This can be heuristically justifyfied with \[-\Delta (\Phi \star f) = (-\Delta \Phi) \star f = \delta_0 \star f = f\]


  \begin{thm} \label{solution-for-poisson}
    Assume \(f \in C_c^2(\mathbb{R}^d)\). Then \(u = \Phi \star f\) satisfies that \(u \in C^2(\mathbb{R}^d)\) and \(- \Delta u(x) = f(x)\) for all \(x \in \mathbb{R}^d\)
  \end{thm}


  \begin{proof}
    By definition we have
    \begin{align*}
      u(x) &= \int_{\mathbb{R}^d} \Phi(y) f(x-y) \, dy.
    \end{align*}
    First we check that \(u\) is continuous: Take \(x_k \to x_0\) in \(\mathbb{R}^d\). We prove that \(u(x_n) \xrightarrow{n} u_0\), i.e.
    \begin{align*}
      \lim_{n \to \infty} \int_{\mathbb{R}^d} \Phi(y) f(x_n - y) \ dy = \int_{\mathbb{R}^d} \Phi(y) f(x_0 - y) \ dy
    \end{align*}
    This follows from the Dominated Convergence Theorem. More precisely:
    \begin{align*}
      \lim_{n \to \infty} \Phi(y) f(x_n -y) = \Phi(y) f(x_0 - y) \quad \text{ for all } y \in \mathbb{R}^d \setminus \{0\}
    \end{align*}
    and 
    \begin{align*}
      |\Phi(y) f(x-y)| &\le \| f ||_{L^\infty} \cdot \mathbb{1}(|y| \le R) \cdot |\Phi(y)| \in L^1(\mathbb{R}^d, dy)
    \end{align*}
    where \(R > 0\) depends on \(\{x_n\}\) and \(\operatorname{supp}(f)\) but independent of \(y\). Now we compute the derivatives:
    \begin{align*}
      \partial_{x_i} u(x) 
      &= \partial_{x_i} \int_{\mathbb{R}^d} \Phi(y) f(x-y) \ dy
      = \lim_{h \to 0} \int_{\mathbb{R}^d} \Phi(y) \frac{f(x + h e_i - y) - f(x-y)}{h} \ dy \\
      \text{(dom.\ conv.)} \quad &= \int \Phi(y) \partial_{x_i} f(x-y) \ dy \\
      \Rightarrow \quad D^\alpha u(x) &= \int_{\mathbb{R}^d} \Phi(y) D_x^\alpha f(x-y) \ dy \quad \text{for all } |\alpha| \le 2
    \end{align*}
    \(D^\alpha u(x)\)  is continuous, thus \(u \in C^2(\mathbb{R}^d)\).
    Now we check if this solves the Poisson-Equation:
    \begin{align*}
      - \Delta u(x) 
      &= \int_{\mathbb{R}^d} \Phi(y) (-\Delta_x) f(x-y) \, dy
      = \int_{\mathbb{R}^d} \Phi(y) (-\Delta_y) f(x-y) \, dy \\
      &= \int_{\mathbb{R}^d \setminus B(0, \epsilon)} \Phi(y) (-\Delta_x) f(x-y) \, dy + \int_{B(0, \epsilon)} \Phi(y) (-\Delta_x) f(x-y) \, dy \quad (\epsilon > 0 \text{ small})
    \end{align*}
    Now we come to the main part. We apply integration by parts (\ref{green-identities}):
    \begin{align*}
      &\int_{\mathbb{R}^d \setminus B(0, \epsilon)} \Phi(y)(- \Delta_y) f(x-y) \, dy \\
      &\quad = \int_{\mathbb{R}^d \setminus B(0, \epsilon)} (\nabla_y \Phi(y)) \cdot \nabla_y f(x-y) \, dy - \int_{\partial B(0, \epsilon)} \Phi(y) \cdot  \frac{\partial f}{\partial \vec{n}}(x-y) \, dS(y) \\
      &\quad = \int_{\mathbb{R}^d \setminus B(0, \epsilon)} \underbrace{(-\Delta_y \Phi(y))}_{=0} f(x-y) \, dy \\ &\qquad + \int_{\partial B(0, \epsilon)} \frac{\partial \Phi}{\partial \vec{n}}(y) f(x-y) \, dS(y) - \int_{\partial B(0, \epsilon)} \Phi(y) \frac{\partial f}{\partial \vec{n}}(x-y) \, dS(y)
    \end{align*}

    We have that \(\nabla_y \Phi(y) = -\frac{1}{d |B_1|} \frac{y}{|y|^d}\) and \( \vec{n} = \frac{y}{|y|} \text{ in } \partial B(0, \epsilon)\). This leads to
      \begin{align*}
        \frac{\partial \Phi}{\partial \vec{n}} &= \frac{1}{d |B_1|} \frac{1}{|y|^{d-1}} = \frac{1}{d |B_1| \epsilon^{d-1}} \quad \text{ for } y \in \partial B(0, \epsilon)
      \end{align*}

      Hence:
      \begin{align*}
        \int_{\partial B(0, \epsilon)} \frac{\partial \Phi}{\partial \vec{n}}(y) f(x-y) \ dS(y) 
        &= \frac{1}{d |B_1| \epsilon^{d-1}} \int_{\partial B(0, \epsilon)} f(x-y) \ dS(y) \\
        = \fint_{\partial B(0, \epsilon)} f(x-y) \ dS(y)
        &= \fint_{\partial B(x, \epsilon)} f(y) \ dS(y) 
        \xrightarrow{\epsilon \to 0} f(x)
      \end{align*}

        \begin{samepage}
          We have to regard the following error terms:
          \begin{itemize}
            \item \( 
                \begin{aligned}[t]
                  \left| \int_{B(0, \epsilon)} \Phi(y) (- \Delta_y) f(x-y) \ dy\right| 
                  &\le \int_{B(0, \epsilon)}|\Phi(y)| \underbrace{|-\Delta_y f(x-y)|}_{\le \|\Delta f\|_{L^\infty} \mathbb{1}(|y| \le R)} \ dy \\
                  &\le \| \Delta f\|_{L^\infty} \int_{\mathbb{R}^d} \underbrace{|\Phi(y)| \mathbb{1}(|y| \le R)}_{L^1(\mathbb{R}^d)} \mathbb{1}(|y| \le \epsilon) 
                  \xrightarrow{\epsilon \to 0} 0
                \end{aligned}
              \)
            Where \(R > 0\) depends on \(x\) and the support of \(f\) but is independent of \(y\).
          \item \( 
              \begin{aligned}[t]
                \left|\int_{\partial B(0, \epsilon)} \Phi(y) \frac{\partial f}{\partial \vec{n}}(x-y) \ dS(y)\right|
                &\le \|\nabla f\|_{L^\infty} \int_{\partial B(0, \epsilon)} |\Phi(y)| \ dy \\
                &\le \begin{cases}
                  const \cdot \epsilon | \log \epsilon| \to 0, & d = 2 \\
                  const \cdot \epsilon \to 0, & d \ge 3
                \end{cases}
              \end{aligned}
            \)
          \end{itemize}
        \end{samepage}
        Conclusion: \(-\Delta u(x) = f(x)\) for all \(x \in \mathbb{R}^d\) proved that \(u = \Phi \star f\) and \(f \in C_c^2(\mathbb{R}^d)\).
    \end{proof}

    Thus, if \(f \in C_c^2(\mathbb{R})\), then \(u = \Phi \star f\) satisfies \(u \in C^2(\mathbb{R}^2)\) and \(-\Delta u(x) = f(x)\) for all \(x \in \mathbb{R}^d\).


  \begin{rem}
    The result holds for a much bigger class of functions \(f\). For example if \(f \in C_c^1(\mathbb{R})\) we can easily extend the previous proof:
    \begin{align*}
      \partial_{x_i} u = \int_{\mathbb{R}^d} \Phi(y) \partial_{x_i} f(x-y) \, dy \in C(\mathbb{R}^d) \Rightarrow u \in C^1(\mathbb{R}^d)
    \end{align*}
    Consequently: 
    \begin{align*}
      \partial_{x_i} \partial_{x_j} u 
      &= \partial_{x_i} \int_{\mathbb{R}^d} \Phi(y) \partial_{x_j} f(x-y) \, dy
      = \int_{\mathbb{R}^d} \partial_{x_i} \Phi(y) \partial_{x_j} f(x-y) \, dy \in C(\mathbb{R}^d)
    \end{align*}
    So we have \(u \in C^2(\mathbb{R}^d)\). Now we can compute
    \begin{align*}
      \Delta u = \sum_{i=1}^d \int_{\mathbb{R}^d} \partial_{x_i} \Phi(y) \partial_{x_i} f(x-y) \, dy \overset{(IBP)}{=} f(x).
    \end{align*}
  \end{rem}

  \begin{ex}
    Extend this to more general functions!
  \end{ex}

  \section{Equations in general domains}
  \begin{thm} (Mean Value Theorem for Harmonic Functions)\label{mean-value-theorem} 
    Let \(\Omega \subseteq \mathbb{R}\) be open, let \( u \in C^2(\Omega)\) and \(\Delta u = 0\) in \(\Omega\). Then
    \begin{align*}
      u(x) 
      &= \fint_{B(x, r)} u
      = \fint_{\partial B(x, r)} u \quad \text{for all } x \in \Omega, B(x,r) \subseteq \Omega
    \end{align*}
  \end{thm}

  \begin{proof}
    Consider all \(r > 0\) s.t. \(B(x,r) \subseteq \Omega\),
    \begin{align*}
      f(r) &= \fint_{\partial B(x,r)} u
    \end{align*}
    We need to prove that \(f(r)\) is independent of \(r\). When it is done, then we immediately obtain
    \begin{align*}
      f(r) = \lim_{t \to 0} f(t) = u(x)
    \end{align*}
    as \(u\) is continuous. To prove that, consider
    \begin{align*}
      f'(r) 
      &= \frac{d}{dr} \left(\fint_{\partial B(0, r)} u(x+y) \, dS(y) \right) \\
      &= \frac{d}{dr} \left(\fint_{\partial B(0, 1)} u(x + rz) \, dS(z) \right) \\
      \text{(dom.\ convergence)} \quad & = \fint_{\partial B(0, 1)} \frac{d}{dr} [u(x + rz)] \, dS(z) \\
      &= \fint_{\partial B(0, 1)} \nabla u(x + rz) z \, dS(z) \\
      &= \fint_{\partial B(x, r)} \nabla u(y) \frac{y-x}{r} \, dS(y) \\
      &= \frac{1}{|B(x, r)|_{\mathbb{R}^d}} \int_{\partial B(x, r)} \nabla \cdot u(y) \cdot \vec{n_y} \, dS(y) \\
      \text{(Gauss-Green \ref{gauss-green})} \quad &= \frac{1}{|B(x, r)|_{\mathbb{R}^d}} \int_{B(x, r)} \underbrace{(\Delta u)(y)}_{= 0} \, dy = 0 \qedhere
    \end{align*}
  \end{proof}

  \begin{ex}
    In 1D\@: \(\Delta u = 0 \Leftrightarrow u'' = 0 \Leftrightarrow u(x) = ax + b\) (Linear Equation)
  \end{ex}

  \begin{rem}
    Recall the polar decomposition. Let \(x \in \mathbb{R}^d, x = (r,w), r = |x| > 0, \omega \in S^{d-1}\), then
    \begin{align*}
      \int_{B(0, r)} g(y) \, dy = \int_0^r \left(\int_{B(0, r)} g(y) \, dS(y) \right) dr
    \end{align*}
  \end{rem}


  \begin{rem}
    We already proved that for \(u\) harmonic we have \( u(x) = \fint_{\partial B(x,r)} u \, dy \). Now we have 
    \begin{align*}
      \int_{B(x, r)} u(y) \, dy 
      &= \int_{B(0, r)} u(x+y) \, dy \\
      \text{(Pol.\ decomposition)} \quad &= \int_0^r \left(\int_{\partial B(0, s)} u(x+y) \, dS(y)\right) ds \\
      &= \int_0^r \left(\int_{\partial B(x, s)} u(y) \, dS(y) \right) ds \\
      \text{(Mean value property)} \quad &= \int_0^r \left(|\partial B(x, s)| \, u(x) \right) ds
      = |B(x,r)| \, u(x)
    \end{align*}
    This implies
    \begin{align*}
      \fint_{B(x,r)} u(y) \, dy = u(x)
      \quad \text{for any \(B(x,r) \subseteq \Omega\).}
    \end{align*}
  \end{rem}

  \begin{rem}
    The reverse direction is also correct, namely if \(u \in C^2(\Omega)\) and
    \begin{align*}
      u(x) 
      &= \fint_{B(x, r)} u(y) \, dy
      = \fint_{\partial B(x,r)} u(y) \, dy
      \quad \text{for all } B(x,r) \subseteq \Omega,
    \end{align*}
    then \(u\) is harmonic, i.e. \(\Delta u = 0\) in \(\Omega\). (The proof is exactly like before)
  \end{rem}

  \begin{thm}[Maximum Principle]\label{maximum-principle}
    Let \(\Omega \subseteq \mathbb{R}^d\) be open, let \(u \in C^2(\Omega) \cap C(\bar \Omega)\), \(\Delta u = 0\) in \(\Omega\). Then
    \begin{enumerate}[label=\alph*)]
      \item \(\sup_{x \in \bar \Omega} u(x) = \sup_{x \in \partial \Omega} u(x)\)
      \item Assume that \(\Omega\) is connected. Then if there is a \(x_0 \in \Omega\) s.t. \( u(x_0) = \sup_{x \in \bar \Omega} u(x)\), then \( u \equiv const.\) in \(\Omega\).
    \end{enumerate}
  \end{thm}

  \begin{proof}
    Given \(U \subseteq \mathbb{R}^d\) open, we can write \(U = \bigcup_i U_i\), where \(U_i\) is open and connected.
    \begin{enumerate}
      \item[b)] Assume that \(\Omega\) is connected and there is a \(x_0 \in \Omega\) s.t. \(u(x_0) = \sup_{y \in \Omega} u(x)\). Define \(U = \{ x \in \Omega \mid u(x) = u(x_0)\} = u^{-1}(u(x_0))\). \(U\) is closed since \(u\) is continuous.
      Moreover, \(U\) is open by the mean-value theorem. I.e.~for all \(x \in U\) there is a \(r > 0\) s.t. \(B(x,r) \subseteq U \subseteq \Omega\).
      Since \(U\) is connected we get \(U = \Omega\), so \(u\) is constant in \(\Omega\). On the other hand, if there is no \(x_0 \in \Omega\) s.t. \(u(x_0) = \sup_{x \in \Omega}\) we have \(\forall x_0 \in \Omega: \quad u(x) < \sup_{x \in \bar \Omega} u(x) = \sup_{x \in \partial \Omega} u(x)\)
      \item[a)] Given \(\Omega \subseteq \mathbb{R}^d\) open, we can write \(\Omega = \bigcup_i \Omega_i\), where \(\Omega_i\) is open and connected. By b) we have
        \[\sup_{x \in \bar \Omega_i} u(x) = \sup_{x \in \partial \Omega_i} u(x), \quad \forall i\]
        So we can conclude
        \[\quad \sup_{x \in \bar \Omega} u(x) = \sup_{x \in \partial \Omega} u(x). \qedhere\]
    \end{enumerate}
  \end{proof}

  \begin{defn}
    \begin{itemize}
      \item If \(\Omega \subseteq \mathbb{R}^d\) is open, \(u \in C^2(\Omega)\), then \(u\) is called \emph{sub-harmonic} if \(\Delta u \ge 0\) in \(\Omega\).
      \item If \(\Delta u \le 0\), then \(u\) is called \emph{super-harmonic}.
    \end{itemize}
  \end{defn}

  \begin{ex}[E 1.4]
    Let \(\Omega \subseteq \mathbb{R}^d\) be open and \(u \in C^2(\Omega)\) be subharmonic.
    \begin{enumerate}[label=\alph*)]
      \item Prove that \(u\) satisfies the Mean Value Inequality
      \begin{align*}
        \fint_{\partial B(x, r)} u(y) \, dS(y)
        \ge \fint_{B(x, r)} u(y) \, dy
        \ge u(x)
      \end{align*}
      for all \(B(x,r) \subseteq \mathbb{R}^d\).
      \item Assume further that \(\Omega\) is connected and \(u \in C(\bar \Omega)\). Prove that \(u\) satisfies the strong maximum principle, namely either
      \begin{itemize}
        \item \(u\) is constant in \(\Omega\), or 
        \item \(\sup_{y \in \partial \Omega} u(y) > u(x)\) for all \(x \in \Omega\).
      \end{itemize}
    \end{enumerate}
  \end{ex}

  \begin{proof}[My Solution]
    \begin{enumerate}[label=\alph*)]
      \item Let \(f(r) = \fint_{\partial B(x, r)} u(y) \, dS(y)\), then we have
        \begin{align*}
          \partial_r f(r)
          &= \partial_r \fint_{\partial B(x,r)} u(y) \, dS(y) \\
          \text{(Dom. Convergence)} \quad &= \fint_{\partial B(x, r)} \partial_r u(y) \, dS(y) \\
          &= \fint_{\partial B(0,1)} \partial_r u(x+yr) \, dS(y) \\
          &= \fint_{\partial B(0,1)} \nabla u(x+yr) \cdot y \, dS(y) \\
          &= \fint_{\partial B(x, r)} \nabla u(y) \cdot \frac{y-x}{r} \, dS(y) \\
          &= \fint_{\partial B(x,r)} \nabla u(y) \cdot \vec{n}_y \, dS(y) \\
          \text{(Gauss-Green)} \quad &= \fint_{B(x, r)} \div(\nabla u(y)) \, dS(y) \\
          &= \fint_{B(x,r)} \underbrace{\Delta u(y)}_{\ge 0} \, dS(y) \ge 0
        \end{align*}
        So we can conclude that
        \[\fint_{\partial B(x, r)} u(y) \, dS(y) = f(r) \ge \lim_{r \to 0} f(r) = u(x).\]

        Now regard
        \begin{align*}
          \int_{B(x,r)} u(y) \, dy 
          &= \int_0^r \left(\int_{\partial B(x, r)} u(y) \, dS(y)\right) \, ds \\
          &= \int_0^r \left(|\partial B(x, r)| \fint_{\partial B(x,r)} u(y) \, dS(y)\right) \, ds \\
          &\ge \int_0^r |\partial B(x, r)| \cdot  u(x) \, dS(y) \\
          &= u(x) \int_0^r |\partial B(x, r)| \, dS(y)
          = u(x) |B(x,r)|.
        \end{align*}

        Thus we have
        \begin{align*}
          u(x) \le \fint_{B(x,r)} u(y) dy.
        \end{align*}

        Finally, lets regard
        \begin{align*}
          \int_{B(x, r)} u(y) \, dy
          &= \int_0^r \left(|\partial B(x,s)| \fint_{\partial B(x, s)} u(y) \, dS(y)\right) \, ds \\
          (\partial_r f(r) \ge 0) \quad &\le \int_0^r \left(|\partial B(x,s)| \fint_{\partial B(x, r)} u(y) \, dS(y)\right) \, ds \\
          &= \fint_{\partial B(x, r)} u(y)  \, dS(y) \int_0^r |\partial B(x,s)| \, ds \\
          &= \fint_{\partial B(x, r)} u(y)  \, dS(y) \cdot |B(x,s)|
        \end{align*}
        and we conclude
        \[\fint_{B(x, r)} u(y) \, dy \le \fint_{\partial B(x,r)} u(y) \, dS(y).\]
      \item Let \(x_0 \in \Omega\) s.t. \(u(x_0) = \sup_{x \in \Omega} u(x)\). Now, \begin{align*}
        \sup_{x \in \Omega} u(x) 
        &= u(x_0) 
        \le \fint_{\partial B(x_0, r)} u(y) \, dy \\
        &\le \fint_{\partial B(x_0, r)} \sup_{x \in \Omega} u(x) \, dy 
        = \sup_{x \in \Omega} u(x)
      \end{align*}
      Since \(u\) is continous we get \(u(y) = u(x_0)\) for all \(y \in B(x_0, r)\), so \(u\) is constant. \qedhere
    \end{enumerate}
  \end{proof}

  \begin{defn}
    The \emph{Poisson Equation} for given \(f, g\) on a bounded set is:
    \begin{align*}
      \begin{cases}
        - \Delta u = f, &\text{in } \Omega \\
        u = g, &\text{on } \partial \Omega
      \end{cases}
    \end{align*} 
  \end{defn}

  \begin{thm}(Uniqueness)
    Let \(\Omega \subseteq \mathbb{R}^d\) be bounded, open  and connected. Let \(f \in C(\Omega), g \in C(\partial \Omega)\). Then there exists \emph{at most} one solution \(u \in C^2(\Omega) \cap C(\bar \Omega)\), s.t. \begin{align*}
      \begin{cases}
        - \Delta u = f, &\text{in } \Omega \\
        u = g, &\text{on } \partial \Omega
      \end{cases}
    \end{align*}
  \end{thm}

  \begin{proof}
    Assume that we have two solutions \(u_1\) and \(u_2\). Then \(u \coloneqq u_1 - u_2\) is a solution to 
    \begin{align*}
      \begin{cases}
        - \Delta u = 0, &\text{in } \Omega \\
        u = 0 &\text{on } \partial \Omega
      \end{cases}
    \end{align*}
    By the maximum principle, we know that \(u = 0\) in \(\Omega\). More precisely, by the maximum principle we have \(\forall x \in \Omega\)
    \begin{align*}
      \sup_{x \in \Omega} u(x) \le \sup_{x \in \partial \Omega} u(x) = 0
      \quad \Rightarrow \quad
      u(x) \le 0
    \end{align*}
    Since \(-u\) satisfies the same property we have \(\forall x \in \Omega\):
    \begin{align*}
      \sup_{x \in \Omega}(-u(x)) \le \sup_{x \in \partial \Omega} (-u(x)) = 0
      \quad \Rightarrow \quad
      - u(x) \le 0
      \quad \Rightarrow \quad
      u(x) \ge 0
    \end{align*}
    So we geht \(u(x)  = 0\) in \(\Omega\).
  \end{proof}

  \begin{ex}[Bonus 1]\label{bonus-1}
    Let \(\Omega\) be open, connected and bounded in \(\mathbb{R}^d\). Let \(u \in C^2(\Omega) \cap C(\bar \Omega)\) s.t. 
    \begin{align*}
      \begin{cases}
        \Delta u = 0, &\text{in } \Omega \\
        u = g, &\text{on } \partial \Omega
      \end{cases}
    \end{align*}
    Prove that \begin{enumerate}[label=\alph*)]
      \item If \(g \ge 0\) on \(\partial \Omega\), then \(u \ge 0\) in \(\Omega\). 
      \item If \(g \ge 0\) on \(\partial \Omega\) and \(g \ne 0\), then \(u > 0\) in \(\Omega\).
    \end{enumerate}
  \end{ex}

  \begin{proof}[My Solution]
    \begin{enumerate}[label=\alph*)]
      \item We have that \(\Delta (-u) = 0\), so \(-u\) is harmonic in \(\Omega\). Since \(\Omega\) is open and bounded we can apply the Maximum Principle (\ref{maximum-principle}) and get that
      \[\sup_{x \in \bar \Omega} -u(x) \le \sup_{x \in \partial \Omega} -g(x) \le 0.\]
      This implies \(\inf_{x \in \Omega} u(x) \ge 0\), so \(u \ge 0\) in \(\Omega\).
      \item We prove this by contraposition. Assume there is a \(x_0 \in \Omega\) s.t. \(u(x_0) = 0\). Since we have \(u \ge 0\) on \(\Omega\) by a), it follows that
      \[0 = -u(x_0) = \sup_{x \in \bar \Omega} -u(x) \le \sup_{x \in \partial \Omega} -g(x) \le 0,\]
      so \(-u\) attains its maximum on \(\Omega\). Hence \(-u = 0 = u\) is constant by the strong maximum principle because \(\Omega\) is connected, in fact \(0 = u|_{\partial \Omega} = g\). \qedhere
    \end{enumerate}
  \end{proof}

  \begin{lem}[Estimates for derivatives]\label{estimates-of-derivatives}
    If \(u\) is harmonic in \(\Omega \subseteq \mathbb{R}^d\), \(\alpha \in \mathbb{N}_0^d\), \(|\alpha| = N\) and \(B(x_0, r) \subseteq \Omega\), then 
    \[|D^\alpha u(x)| \le \frac{(c_dN)^N}{r^{d+N}} \int_{B(x, r)} |u| \, dy\]
  \end{lem}

  \begin{proof}
    Induction: Assume \(|\alpha| = N-1\), Take \(|\alpha| = N\)
    \begin{align*}
      |D^\alpha u(x_0)| 
      &\le \frac{|S_1|}{|B_1|\frac{r}{N}} \| D^\beta u \|_{L^\infty (B(x_0, \frac{r}{n}))}, \quad D^\alpha u = \partial_{x_i}(D^\beta u)_{|\beta| = N-1}
    \end{align*}
    Note: \(x \in B(x_0, \frac{r}{N})\), so \(B(x, \frac{r(N-1)}{N}) \subseteq B(x_0, r)\). By the induction hypothesis:
    \begin{align*}
      \|D^\beta u\|_{L^\infty(B(x_0, \frac{r}{N}))} 
      &\le \frac{[c_d (N-1)]^{N-1}}{[r \frac{(N-1)}{N}]^{d+N-1}} \int_{B(x_0, r)} |u| \, dy
    \end{align*}
    The conclusion is:
    \begin{align*}
      |D^\alpha u (x_0)|
      &\le \frac{|S_1|}{|B_1| \frac{r}{N}} \frac{[c_d(N-1)]^{N-1}}{\left(r \frac{N-1}{N^d}\right)^{d + N - 1}} \int_{B(x_0, r)} |u| \, dy \\
      &= \frac{|S_1|}{|\beta_1|} \frac{c_d^{N-1}}{\left(\frac{r}{N}\right)^{d+N} (N-1)^d} \int_{B(x_0, r)} |u| \, dy \\
      &= \frac{|S_1|}{|\beta_1|} \frac{c_d^{N-1}}{\left(\frac{r}{N}\right)^{d+N} N^d} \left(\frac{N}{N-1}\right)^d \int_{B(x_0, r)} |u| \, dy \\
      &\le \frac{2^d |S_1|}{|B_1|} \frac{c_d^{N-1} N^N}{r^{d+N}} \int_{B(x_0, r)} |u| \, dy \qquad \text{if } c_d \ge \frac{2^d |S_1|}{|B_1|}
    \end{align*}
  \end{proof}

  \begin{thm}[Regularity]
    Let \(\Omega\) be open in \(\mathbb{R}^d\). Let \(u \in C(\Omega)\) satisfy \(u(x) = \fint_{\partial B} u \, dy\) for any \(x \in B(x, r) \subseteq \Omega\). Then \(u\) is a harmonic function in \(\Omega\). Moreover, \(u \in C^\infty(\Omega)\) and \(u\) is analytic in \(\Omega\).
  \end{thm}

  % \begin{proof}
  %   We use the convolution. For simlicity consider the case \(\Omega = \mathbb{R}^d\) first. Take \(\eta \in C_c^\infty(\mathbb{R}^d)\) with \(0 \le \eta \le 1\), \(\eta(x) = 0\) if \(|x| \ge 1\), \(\eta\) radial and \(\int \eta = 1\). Define \(\eta_\epsilon (x) = \epsilon^{-d} \eta(\epsilon^{-1} x)\) for all \(\epsilon > 0\). Then
  %   \begin{align*}
  %     \int_{\mathbb{R}^d} \eta_\epsilon = \int_{\mathbb{R}^d} \eta = 1
  %   \end{align*}
  %   We prove \(u_\epsilon \coloneqq \eta_\epsilon \star u = u\) for all \(\epsilon > 0\). By definition:
  %   \begin{align*}
  %     u_\epsilon(x) 
  %     &= \int_{\mathbb{R}^d} \eta_\epsilon(x-y)u(y) \, dy \\
  %     &= \int_0^\infty \left[\int_{\partial B(x, r)} \eta_\epsilon(x-y) u(y) \, dS(y)\right] dr \\
  %     (\eta \text{ radial}) \quad &= \int_0^\infty \left[\eta_\epsilon(r) \int_{\partial B(x, r)} u(y) \, dS(y)\right] dr \\
  %     \text{(Assumption)} \quad &= \int_0^\infty \eta_\epsilon(r)\, |\partial B(x, r)|\, u(x) \, dr \\
  %     &= u(x) \int_0^\infty \eta_\epsilon(r) |\partial B(0, r)| \, dr \\
  %     &= u(x) \int_{\mathbb{R}^d} \eta_\epsilon(y) \, dy = u(x)
  %   \end{align*}

  %   On the other hand, \(u_\epsilon = \eta_\epsilon \star u\) is \(C^\infty(\mathbb{R}^d)\). In fact \(D^\alpha(\eta_\epsilon \star u) = (D^\alpha \eta_\epsilon) \star u\) is continuous for any \(\alpha\) (Exercise). Then \(u \in C^\infty(\mathbb{R}^d)\), so \(u\) is harmonic in \(\mathbb{R}^d\), i.e. \(\Delta u = 0\) in \(\mathbb{R}^d\). \\

  %   Consider now the general case where \(\Omega \subseteq \mathbb{R}^d\) is open. Take \(\epsilon > 0\) small and define \(\Omega_\epsilon = \{x \in \Omega \mid \dist(x, \partial \Omega) > \epsilon\}\). 
  %   Define \[u_\epsilon(x) = \int_{\mathbb{R}^d} \eta_\epsilon(x-y) u(y) \, dy \quad \text{ for all } x \in \Omega_\epsilon\]
  %   Recall that \(\eta_\epsilon(y) = 0\) if \(|y| \ge \epsilon\), then:
  %   \[u_\epsilon(x) = \int_{B(x, \epsilon)} \eta_\epsilon(x-y)u(y) \, dy\]
  %   is well-defined since \(B(x,\epsilon) \subseteq \Omega\) for all \(x \in \Omega_\epsilon\).
  %   Then by the same computation using the polar-decomposition, we find that \(u_\epsilon(x) = u(x)\) for all \(x \in \Omega\). Note that \(u_\epsilon \in C^\infty(\Omega_\epsilon)\). Taking \(\epsilon \to 0\), we get \(u \in C^\infty(\Omega)\). Then we conclude that \(u\) is harmonic (We need to reverse the proof of the mean-value theorem).\\
  %   To proof that \(u\) is analytic, we need to show that for all \(x_0 \in \Omega\), there is a \(r > 0\) s.t. \(B(x_0, r) \subseteq \Omega\) and \[u(x) = u(x_0) + \sum_{\alpha \ne 0} c_\alpha(x-x_0)^\alpha \quad \text{for  all } x \in B(x_0, r)\]
  %   Here \(\alpha = (\alpha_1, \dots, \alpha_d), \alpha_i \in \{0, 1, 2, \dots\}\) and \(y^\alpha = y_1^{\alpha_1}y_2^{\alpha_2} \dots y_d^{\alpha_d}\). 
  %   We want to prove that the series converges uniformly in \(B(x_0, r)\). Recall the Taylor expansion:
  %   \[u(x) = u(x_0) + \sum_{0 < |\alpha| < N} D^\alpha u(x_0) \frac{(x-x_0)^\alpha}{\alpha!} + R_N(x)\]
  %   where \(|\alpha| = \alpha_1 + \alpha_2 + \dots + \alpha_d\), \(\alpha! = \alpha_1! \cdots \alpha_d!\) and \[R_N(x) = \sum_{|\alpha| = N} \int_0^1 D^\alpha u(x_0 + t(x-x_0)) \frac{(x-x_0)^\alpha}{\alpha!} \, dt\]
  %   New: Let \(x_0 \in \Omega\), take \(r > 0\), \(r < \frac{1}{L+1} \dist(x_0, \Omega^c)\) s.t. if \(x \in B(x_0, r)\), then \[B(x, Lr) \subseteq B(x_0, (L+1)r) \subseteq \Omega\]. With Lemma~\ref{estimates-of-derivatives} we get:
  %   \begin{align*}
  %     |D^\alpha u(x_0 + t(x-x_0))
  %     &\le \frac{(c_d N)^N}{(Lr)^{d+N}} \int_{B(x, Lr)} |u|
  %   \end{align*}
  %   With \((x_0, r) \leadsto (x, Lr)\)
  %   \begin{align*}
  %     |R_N(x)| \le \sum_{|\alpha| = N} \frac{(c_d N)^N}{(Lr)^{d+N}} \frac{1}{\alpha!} \frac{1}{\alpha!} \tau^N \int_{B(x_0, (L+1)r) |u|}
  %   \end{align*}

  %   Thus 
  %   \begin{align*}
  %     \left(\frac{\tilde c_d N}{L}\right) \frac{1}{N!}
  %     &\le \left(\frac{\tilde c_d N}{L}\right) \left(\frac{e}{N}\right)^N \quad \text{ if \(N\) large} \\
  %     &= \left(\frac{\tilde c_d e}{L}\right)^N \xrightarrow{N \to \infty} 0 \quad \text{if } L > \tilde c_d e (L = L_d)
  %   \end{align*}
  %   We conclude that \[u(x) = u(x_0) + \sum_{\alpha \ne 0} \frac{D^\alpha u(x_0)}{\alpha!}(x-x_0)^\alpha\]
  %   The series converges uniformly \(x \in B(x_0, r)\).
  %   Now we proof the bound on derivatives. For \(\alpha = 0\)
  %   \begin{align*}
  %     |u(x_0)| = \left| \fint_{B(x_0, r)} u \right| \le \frac{1}{|B_1|r^d} \int_{B(x_0, r)} |u|
  %   \end{align*}
  %   For \(\alpha = 1:\) \(\Delta u = 0\) in \(\Omega\) \(\Rightarrow\) \(0 = \partial_{x_i} (\Delta u) = \Delta (\partial_{x_i} u)\), so \(\partial_{x_i} u\) is harmonic in \(\Omega\). Hence, by the mean-varlue theorem again:
  %   \begin{align*}
  %     \partial_{x_i} u(x_0) &= \fint_{B(x_0, \frac{r}{2})} \partial_{x_i} u = \frac{1}{|B_1| \frac{\frac{r}{2}}{2}^d} \int_{B(x_0, \frac{r}{2})} \partial_{x_i} u = \frac{1}{|B_1| \frac{r}{2}^d} \int_{\partial B(x_0, \frac{r}{2})}u n_i \, dS
  %   \end{align*}
  %   So we get:
  %   \begin{align*}
  %     |\partial_{x_i} u(x_0)| 
  %     &= \frac{1}{|B_1| r^d} \int_{\partial B(x, r)} \, dS \|u\|_{L^\infty(\partial B(x_0, \frac{r}{2}))}  \\
  %     &= \frac{|S_1|}{|B_1|\frac{r}{2}} \|u\|_{L^\infty(\partial B(x_0, \frac{r}{2}))}
  %   \end{align*}
  %   For any \(y \in \partial B(x_0, \frac{r}{2})\) by the mean value theorem, we get:
  %   \begin{align*}
  %     |u(y)| 
  %     &= \left| \fint_{B(y, \frac{r}{2})} u\right|
  %     &\le \frac{1}{|B_1| \left(\frac{r}{2}\right)^d} \int_{B(y, \frac{r}{2})} |u|
  %     &\le \frac{1}{|B_1| \left(\frac{r}{2}\right)^d} \int_{B(x_0, r)} |u|
  %   \end{align*}
  %   Thus,
  %   \begin{align*}
  %     |\partial_{x_i} u(x_0)| 
  %     &\le \frac{|S_1|}{|B_1| \left(\frac{r}{2}\right)} \frac{1}{|B_1|  \left(\frac{r}{2}\right)^d} \int_{B(x_0, r)} |u|
  %     \le \frac{c_d}{r^{d+1}} \int_{B(x_0, r)} |u|
  %   \end{align*}
  %   Induction: Assume that we already proved the bound when \(|\alpha| = N-1\). Then:
  %   \begin{align*}
  %     \partial_{x_i} D^\alpha u 
  %     &= D^\alpha(\underbrace{\partial_{x_i} u}_{\text{harmonic}})
  %     = 0
  %     \quad \Rightarrow \quad
  %     D^\alpha u \text{ is harmonic}
  %   \end{align*}
  %   So we get
  %   \begin{align*}
  %     \partial_{x_i} (D^\alpha u) &= \fint_{B(x_0, \frac{r}{4})} \partial_{x_i} (D^\alpha u) \\
  %     \Rightarrow \quad |\partial_{x_i} (D^\alpha u)| &\le  \frac{C_d}{r^{d+1}} \int_{B(x_0, \frac{r}{2})} |D^\alpha u|
  %   \end{align*}
  %   and by the induction hypothesis:
    
  %   \begin{align*}
  %     |D^\alpha u(x_0)| &\le \frac{c_d}{r} \|D^\alpha u\|_{L^\infty B(x_0, \frac{r}{2})} \\
  %     &\le \frac{c_d}{r^{d+N-1}} \int_{B(x_0, r)} |u| \quad \forall x \in B\left(x_0, \frac{r}{2}\right)
  %   \end{align*}
  %   Then: \(|\partial_{x_i} D^\alpha u(x_0)| \le \frac{c_d}{r^{d+N}} \int_{B(x_0, r)} |u|\)
  % \end{proof}

  \begin{ex}[E 1.1: Proof the Gauss–Green formula]
    Let \(f \coloneqq (f_i)_1^d \in C^1(\mathbb{R}^d, \mathbb{R}^d)\). Prove that for every open ball \(B(y, r) \subseteq \mathbb{R}^d\) we have \[\int_{\partial B(y, r)} f(y) \cdot \nu_y \, dS(y) = \int_{B(y, r)}\div f \, dx.\]
    Here \(\nu_y\) is the outward unit normal vector and \(dS\) is the surface measure on the sphere.
  \end{ex}

  \begin{proof}[Solution]
    We proof this in d=3. Let \(f \in C^1(\mathbb{R}^3)\)
    \begin{align*}
      \int_{B(0, 1)} \partial_{x_3} f \, dx = \int_{\partial B(0, 1)} f x_3 \, dS(x), \quad x = (x_1, x_2, x_3) \in \mathbb{R}^3, \vec{n} = \frac{x}{|x|} \text{ on } \partial B(0,1)
    \end{align*}
    \begin{align*}
      B(0,1) &
      = \{x_1^2 + x_2^2 + x_3^2 \le 1 \} \\
      &= \{ x_1^2+ x_2^2 \le 1 - \sqrt{1 - x_1^2 - x_2^2} \le x_3 \le \sqrt{1 - x_1^2 - x_2^2}\}
    \end{align*}
    Then: 
    \begin{align*}
      \int_{B(0,1)} \partial_{x_3} f \, dx 
      &= \int_{x_1^2 + x_2^2 \le 1} \left(\int_{-\sqrt{1 - x_1^2 - x_2^2} \le x_3 \le \sqrt{1 - x_1^2 -x_2^2}} \partial_{x_3} f \, dx_3\right) \, dx_1 \, dx_2 \\
      &= \int_{x_1^2 + x_2^2 \le 1} \left[f(x_1, x_2, \sqrt{1 - x_1^2 - x_2^2})\right. \\
      &\qquad \left. - f(x_1, x_2, - \sqrt{1 - x_1^2 - x_2^2})\right] \, dx_1 \, dx_2
    \end{align*}
    Lets take polar coordinates in 2D:\begin{align*}
      x_1 &= r \cos \phi & r > 0, \phi \in [0, 2 \pi)\\
      x_2 &= r \sin \phi & \det \frac{\partial(x_1, x_2)}{\partial(r, \phi)} = r
    \end{align*}
    \begin{align*}
      (\star) &= \int_0^1 \int_0^{2 \pi} [f(r \cos \phi, r \sin \phi, r) - f(r \cos \theta, r \sin \phi, -r)] r \, dr \, d\phi
    \end{align*}
    On the other hand:
    \begin{align*}
      \int_{\partial B(0, 1)} f x_3 \, dS
    \end{align*}
    The polar coordinates in 3D are:
    \begin{align*}
      x_1 &= r \cos \phi sin \theta& r > 0, \phi \in (0, 2 \pi), \theta \in (0, \pi) \\
      x_2 &= r \sin \phi \sin \theta & \det \frac{\partial{x_1, x_2, x_3}}{\partial(r, \phi, t)} = r^2 \sin \theta\\
      x_3 &= \cos \theta
    \end{align*}
    Then: 
    \begin{align*}
      (\star \star) 
      &= \int_0^{2 \pi} \int_0^\pi f(\cos \phi \sin \theta, \sin \phi \sin \theta, \cos \theta) \sin \theta \cos \theta \, d \theta \, d \phi \\
      &= \int_0^{2 \pi} \left(\int_0^{\frac{\pi}{2}} + \int_{\frac{\pi}{2}}^\pi \, d \theta\right) \, d \phi \\
      (r = \sin \theta) \quad &= \int_0^{2 \pi} \int_0^1 f(r \cos \phi, r \sin \phi, \sqrt{1 - r^2}) r \, dr \, d \phi \\
      &\qquad - f(r \cos \phi, r \sin \phi, -\sqrt{1 - r^2}) r \, dr \, d\phi \qedhere
    \end{align*}
  \end{proof}

  \begin{ex}[E 1.2]
    Let \(u \in C(\mathbb{R}^d)\) and \(\int_{B(x, r)} u \, dy = 0\) for every open ball \(B(x, r) \subseteq \mathbb{R}^d\). Show that \(u(x) = 0\) for all \(x \in \mathbb{R}^d\).
  \end{ex}

  \begin{proof}[My Solution]
    Assume there is a \(x_0 \in \mathbb{R}^d\) s.t. w.l.o.g. \(u(x_0) > 0\). Since \(u\) is continous there is a ball \(B(x_0, r)\) s.t. \(u(y) > \frac{u(x_0)}{2}\) for all \(y \in B(x_0, r)\). But then we get
    \begin{align*}
      \int_{B(x_0, r)} u(y) \, dy
      &\ge \int_{B(x_0, r)} \frac{u(x_0)}{2} \, dy
      = \frac{u(x_0)}{2} \, |B(x_0, r)| > 0. \qedhere
    \end{align*}
  \end{proof}

  \begin{ex}[E 1.3]
    Let \(f \in C_c^1(\mathbb{R}^d)\) with \(d \ge 2\) and \(u(x) \coloneqq (\Phi \star f)(x)\). Prove that \(u \in C^2(\mathbb{R}^2)\) and \(- \Delta u(x) = f(x)\) for all \(x \in \mathbb{R}^d\) (\ref{solution-for-poisson} was the same for \(f \in C_1(\mathbb{R})\))
  \end{ex}

  % \begin{proof}[Solution]
  %   We regard d=3. 
    
  %   \begin{lem}
  %     If \(f \in C_c(\mathbb{R}^3)\), then \(\frac{1}{|x|} \star f \in C^1(\mathbb{R}^3)\) and \(\partial_{x_1} \left(\frac{1}{|x|} \star f\right) = \partial_{x_1} \left(\frac{1}{|x|}\right) \star f  = \left( \frac{- x_1}{|x|^3}\right) \star f\)
  %   \end{lem}

  %   \begin{proof}
  %     \begin{align*}
  %       \partial_{x_i} \left(\frac{1}{|x|} \star f\right) 
  %       &= \lim_{h \to 0} \frac{1}{h} \left[\int_{\mathbb{R}^3} \frac{1}{|x-y-he_i|} f(y) \, dy - \int_{\mathbb{R}^3} \frac{1}{|x-y|}f(y) \, dy\right] \\
  %       &= \lim_{h \to 0} \int_{\mathbb{R}^3} \frac{1}{h} \left[ \frac{1}{|x-y-he_i|} - \frac{1}{|x-y|}\right] f(y) \, dy \\
  %       &= \lim_{h \to 0} \int_{|x-y-he_i| \ge 2h} \frac{1}{h} \left[ \frac{1}{|x-y-he_i|} - \frac{1}{|x-y|}\right] f(y) \, dy \\
  %       &\qquad + \lim_{h \to 0} \int_{|x-y-he_i| < 2h} \frac{1}{h} \left[ \frac{1}{|x-y-he_i|} - \frac{1}{|x-y|}\right] f(y) \, dy
  %     \end{align*}
  %     \begin{align*}
  %       (I) \quad \lim_{h \to 0} \int_{\mathbb{R}^3} \frac{\mathbb{1}(|x-y-he_i| \ge 2H)}{h} \left[\frac{1}{|x-y-he_i|} - \frac{1}{|x-y|}\right] f(y) \, dy
  %     \end{align*}
  %     Dominated Convergence:
  %     \begin{align*}
  %       \lim_{h \to 0} (...) = \frac{\partial}{\partial x_i} \left(\frac{1}{|x-y|}\right) f(y) = \frac{-(x_i - y_i)}{|x-y|^3}f(y)
  %     \end{align*}
  %     and
  %     \begin{align*}
  %       \left| \frac{\mathbb{1}(|x-y-he_i| \ge 2h)}{h}\right| \left| \frac{1}{|x-y-he_i|} - \frac{1}{|x-y|}\right| |f(y)|
  %     \end{align*}
  %     Here:
  %     \begin{align*}
  %       \left| \frac{1}{|a|} - \frac{1}{|b|}\right| = \frac{||a|-|b||}{|a||b|} \le \frac{|a-b|}{|a||b|} \quad \forall a,b \in \mathbb{R}^3
  %     \end{align*}
  %     So we get
  %     \begin{align*}
  %       &\mathbb{1}(|x_3 - he_i) \ge 4h) \left|\frac{1}{|x-y-he_i|} - \frac{1}{|x-y|} \right| \\
  %       &\qquad \le \frac{|he_i|}{|x-y-he_i||x-y|} \mathbb{1}(|x-y-he_i| \ge 4h) \\
  %       &\qquad \le \frac{h}{\left(\frac{2}{3}\right)|x-y|}
  %     \end{align*}
  %     \begin{align*}
  %       (II) &= \left[ \int_{|x-y-he_i| < 4h} \frac{1}{h}\left[\frac{1}{|x-y-he_i|}-\frac{1}{|x-y|}\right]f(y) \, dy\right| \\
  %       &\le \int_{|x-y-he_i| < 4h} \frac{1}{h} \left| \frac{1}{|x-y-he_i|}-\frac{1}{|x-y|}\right| |f(y)| \, dy \\
  %       &\le \int_{|x-y-he_i| < 4h} \frac{1}{|x-y-he_i||x-y|}|f(y)| \, dy \\
  %       &\le \|f\|_{L^\infty} \int_{|x-y-he_i| < 4h} \left[\frac{1}{|x-y-he_i|^2}+\frac{1}{|x-y|^2}\right]\, dy
  %     \end{align*}
  %     Here:
  %     \begin{align*}
  %       \int_{|x-y-he_i| < 4h} \frac{1}{|x-y-he_i|^2} \, dy 
  %       &= \int_{|y| < 4h} \frac{1}{|y|^2} \, dy = const.\ h \xrightarrow{h \to 0} 0
  %     \end{align*}
  %     \begin{align*}
  %       \int_{|x-y-he_i| < 4h} \frac{1}{|x-y|^2} \, dy \\
  %       &\le \int_{|x-y| \le 5h} \frac{1}{|x-y|^2} \, dy \\
  %       &= \int_{|y| \le 5h} \frac{1}{|y|^2} \, dy ...
  %     \end{align*}
  %   \end{proof}
  %   To conclude: \(f \in C_c^1(\mathbb{R}^3)\). From the Lemma:
  %   \begin{align*}
  %     \frac{1}{|x|} \star f \in C^1
  %   \end{align*}
  %   and
  %   \begin{align*}
  %     \partial_{x_1} \left(\frac{1}{|x|} \star f\right)
  %     &= \frac{1}{|x|}\star\left(\partial_{x_i} f\right)
  %   \end{align*}
  %   \begin{align*}
  %     \frac{1}{|x|} \star \underbrace{(\partial_{x_i}f)} \in C^1
  %   \end{align*}
  %   and
  %   \begin{align*}
  %     \partial_{x_j} \frac{1}{|x|} \star \partial_{x_i}f =  ...
  %   \end{align*}
  % \end{proof}

  \begin{thm}[Liouville's Theorem] 
    If \(u \in C^2(\mathbb{R}^d)\) is harmonic and bounded, then \(u = const.\)
  \end{thm}

  \begin{proof}
    By the bound of the derivative \ref{estimates-of-derivatives} we have
    \begin{align*}
      |\partial_{x_i} u(x_0)| 
      &\le \frac{c_d}{r^{d+1}} \int_{B(x_0, r)} |u| \, dy \quad \forall x_0 \in \mathbb{R}^d\ \forall r > 0 \\
      &\le \|u\|_{L^\infty} \frac{c_d}{r^{d+1}} |B(x_0, r)| \\
      &\le \|u\|_{L^\infty} \frac{c_d}{r} \xrightarrow{r \to \infty} 0
    \end{align*}
    Thus \(\partial_{x_i} u = 0\) for all \(i = 1, 2, \dots d\) and \(u = const.\) in \(\mathbb{R}^d\)
  \end{proof}

  \begin{thm}[Uniqueness of solutions to Poisson Equation in \(\mathbb{R}^d\)]
    If \(u \in C^2(\mathbb{R}^d)\) is a bounded function and satisfies \(- \Delta u = f\) in \(\mathbb{R}^d\) where \(f \in C_c^2(\mathbb{R}^d)\), then we have
    \begin{align*}
      u(x) = \Phi \star f(x) + C = \int_{\mathbb{R}^d} \Phi(x-y)f(y) \, dy + C \quad \forall x \in \mathbb{R}^d
    \end{align*}
    where \(C\) is a constant and \(\Phi\) is the fundamental solution of the Laplace equation in \(\mathbb{R}^d\).
  \end{thm}

  \begin{proof}
    If we can prove that \(v\) is bounded, then \(v = const.\). We first need to show that \(\Phi \star f\) is bounded.
    \begin{align*}
      \Phi = \Phi_1 + \Phi_2 = \Phi \mathbb{1}(|x| \le 1) + \Phi(|x| \ge 1) \\
      \Phi \star f = \Phi_1 \star f + \Phi_2 \star f
    \end{align*}
    We have \(\Phi_1 \star f \in L^1(\mathbb{R}^d)\) and \(\Phi_2 \star f\) is bounded since \(\Phi \to 0\)  as \(|x| \to \infty\)  in \(d \ge 3\).
  \end{proof}

  \begin{ex} (Hanack's inequality)
    Let \(u \in C^2(\mathbb{R}^d)\) be harmonic and non-negative. Prove that for all open, bounded and connected \(\Omega \subseteq \mathbb{R}^d\), we have
    \begin{align*}
      \sup_{x \in \Omega} u(x) \le C_\Omega \inf_{x \in \Omega} u(x),
    \end{align*}
    where \(C_\infty\) is a finite constant depending only on \(\Omega\).
  \end{ex}

  \begin{proof} (Exercise)
    Hint: \(\Omega = B(x,r)\). General case cover \(\Omega\) by finitely many balls, one ball is inside \(\Omega\).
  \end{proof}


  \chapter{Convolution, Fourier Transform and Distributions}

  \section{Convolutions}
  \begin{defn}[Convolution]
    Let \(f, g: \mathbb{{R}^d \to \mathbb{R}}\) or \(\mathbb{C}\).
    \begin{align*}
      (f \star g)(x)
      &= \int_{\mathbb{R}^d} f(x-y) g(y) \, dy
      = \int_{\mathbb{R}^d} f(y) g(x-y) \, dy 
      = (g \star f)(x)
    \end{align*}
  \end{defn}

  \begin{rem}[Properties of the Convolution]
    \begin{itemize}
      \item \((f \star g)(x) = f \star (g \star h)\)
      \item \(\hat{f \star g} = \hat f \star \hat g\)
    \end{itemize}
  \end{rem}


  \begin{thm}[Young Inequality]
    If \(f \in L^1(\mathbb{R}^d)\) and \(g \in L^p(\mathbb{R}^d)\), where \(1 \le p \le \infty\), then \(f \star g \in L^p(\mathbb{R}^d)\) and \(\|f \star g \|_{L^p} \le \|f\|_{L^1} \|g\|_{L^p}\). More generally, if \(f \in L^p(\mathbb{R}^d), g \in L^q(\mathbb{R}^d)\), then \(f \star g \in L^1(\mathbb{R}^d)\), \(\| f \star g\|_{L^1} \le \|f\|_{L^p} \|g\|_{L^q}\), where \(1 \le p, q, r, \le \infty\), \(\frac{1}{p} + \frac{1}{q} = 1 + \frac{1}{r}\)
  \end{thm}

  \begin{proof}
    Let \(f \in L^1, g \in L^p\). With the Hölder Inequality \ref{hölder-inequality}, we have:
    % \begin{align*}
    %   \left|(f \star g)(x)| 
    %   &= \left| \int_{\mathbb{R}^d} f(x-y)g(y) \, dy \right| \\
    %   &\le \left(\int_{\mathbb{R}^d} |f(x-y)| \, dy\right)^{\frac{1}{q}} \left(\int_{\mathbb{R}^d} |f(x-x)| |g(y)|^p \, dy \right)^{\frac{1}{p}} \\
    %   &= \| f \|_{L^1}^{\frac{1}{q}} \left(\int_{\mathbb{R}^d} \dots \right)^{\frac{1}{p}}
    % \end{align*}
    \begin{align*}
      \|f \star g\|_{L^p}^p
      &= \int_{\mathbb{R}^d} |f \star g(x)|^p \, dx \\
      &\le \|f\|_{L^1}^{\frac{p}{q}} \int_{\mathbb{R}^d} \int_{\mathbb{R}^d} |f(x-y)||g(y)|^p \, dy \, dx \\
      &= \| f \|_{L^1}^{\frac{p}{q} + 1} \|g\|_{L^p}^p
    \end{align*}
    So we have \(\| f \star g \|_{L^p} \le \|f\|_{L^1} \|g\|_{L^p}\)
  \end{proof}

  \begin{thm}[Smoothness of the Convolution]
    If \(f \in C_c^\infty(\mathbb{R}^d),\ g \in L^p(\mathbb{R}^d),\ 1 \le p \le \infty\). Then \(f \star g \in C^\infty(\mathbb{R})\) and 
    \[D^\alpha (f\star g) = (D^\alpha f) \star g\]
    for all \(\alpha = (\alpha_1, \dots, \alpha_d), \alpha_i \in \{0, 1, 2, \dots\}\)
  \end{thm}

  \begin{proof}
    First we note that \(x \mapsto (f \star g)\) is continous as \(x_n \to x\) in \(\mathbb{R}^d\) since
    \begin{align*}
      (f \star g)(x_n) 
      &= \int_{\mathbb{R}^d} f(x_n - y) g(y) \, dy \xrightarrow{\text{dom. conv.}} \int_{\mathbb{R}^d} f(x-y) g(y) \, dy = (f \star g)(x)
    \end{align*}
    We can apply Dominated convergence because 
      \[f(x_n - y)g(y) \to f(x-y)g(y)\quad  \forall y \text{ as \(f\) is continuous and } x_n \to x\]
      and
      \[|f(x_n -y)\ g(y)| \le \|f\|_{L^\infty} |g(y)| \ \mathbb{1}(|y| \le R) \in L^1(\mathbb{R}^d).\]
      Where \(R > 0\) satisfies \(B(0, R) \supseteq \supp f + \sup_n |x_n|\).
      Now we can compute the derivatives:
      \begin{align*}
        \partial_{x_i} (f \star g)(x)
        &= \lim_{h \to 0} \frac{(f \star g)(x + he_i) - (f \star g)(x)}{h} \\
        &= \lim_{h \to 0} \int_{\mathbb{R}^d} \frac{f(x + he_i - y) - f(x-y)}{h} g(y) \, dy \\
        \text{(Dominated Convergence)} \quad &= \int_{\mathbb{R}^d}\lim_{h \to 0} \frac{f(x + he_i - y) - f(x-y)}{h} g(y) \, dy \\
        &= \int_{\mathbb{R}^d} (\partial_{x_i} f)(x-y) g(y) \, dy
      \end{align*}
      We could apply Dominated Convergence since
      \begin{align*}
        \frac{f(x + he_i -y) - f(x-y)}{h} g(y) \xrightarrow{h \to 0} (\partial_{x_i} f) (x-y) g(y) \quad \text{as \(f \in C^1\)} \\
        \left| \frac{f(x + h e_i -y) - f(x-y)}{h} g(y) \right| \le \| \partial_{x_i} f \|_{L^\infty} |g(y)| \ \mathbb{1}(|y| \le R) \in L^1(\mathbb{R}^d)
      \end{align*}
      where \(B(0, R) \supseteq \supp(f) + B(0, |x| + 1)\)
      and \(\partial_{x_i} (f \star g) = (\partial_{x_i} f) \star g \in C(\mathbb{R}^d)\) since \(\partial_{x_i} f \in C_c^\infty(\mathbb{R}^d)\).
      By induction we get \(D^\alpha (f \star g) = (D^\alpha f \star g) \in C(\mathbb{R}^d)\).
  \end{proof}


  \begin{rem}
      Question: Is there a \(f\) s.t. \(f \star g = g\) for all \(g\). In fact there is no regular function \(f\) that solves this formally:
      \[f \star g = g \Rightarrow \widehat{f \star g} = \hat g \Rightarrow \hat f \hat g = \hat g\ \Rightarrow \hat f = 1 \Rightarrow f \text{ is not a regular function!}\]

      However, if \(f\) is the Dirac-Delta Distribution, \(f = \delta_0\) then \(\delta_0 \star g = g\) for all \(g\). Formally:
      \begin{align*}
        \delta_0(x) &= \begin{cases}
          0 &x \ne 0 \\
          \infty &x = 0 \\
          \int \delta_0 = 1
        \end{cases}
      \end{align*}
      In fact, if \(f \in L^1(\mathbb{R}^d)\), \(\int f = 1\), \(f_\epsilon(x) = \epsilon^{-d} f(\epsilon^{-1} x)\), then \(f_\epsilon \to \delta_0\) in an appropriate sense and \(f_\epsilon \star g \to g\) for all \(g\) nice enough.
  \end{rem}
  
  \begin{thm}[Approximation by convolution]
    Let \(f \in L^1(\mathbb{R}^d)\), \(\int f = 1\), \(f_\epsilon(x) = \epsilon^{-d} f(\frac{x}{\epsilon})\). Then for all \(g \in L^p(\mathbb{R}^d)\), where \(1 \le p < \infty\), then
    \[f_\epsilon \star g \to g \quad \text{in } L^p(\mathbb{{R}^d})\]
  \end{thm}

  \begin{proof}\
    \begin{enumerate}[label=Step \arabic*:]
      \item Let \(f, g \in C_c(\mathbb{R}^d)\). Then
      \begin{align*}
        (f_\epsilon \star g)(x) - g(x) 
        &= \int_{\mathbb{R}^d} f_\epsilon(y) g(x-y) \, dy - \int_{\mathbb{R}^d} f_\epsilon(y) g(x) \, dy \\
        &= \int_{\mathbb{R}^d} f_\epsilon(y) (g(x-y) - g(x)) \, dy \\
        |(f_\epsilon \star g)(x) - g(x)| 
        &= \left| \int_{\mathbb{R}^d} f_\epsilon(y) (g(x-y) - g(x)) \, dy \right| \\
        &\le \int_{\mathbb{R}^d} |f_\epsilon(y)| |g(x-y) - g(x)| \, dy \\
        &\le \int_{|y| \le R_\epsilon} |f_\epsilon(y)||g(x-y) - g(x)| \, dy \\
        &\le \underbrace{\int_{|y| \le R_\epsilon} |f_\epsilon(y)| \, dy}_{\le \|f_\epsilon\|_{L^1} = \|f\|_{L^1}} \left[\sup_{|z| \le R} |g(x-z) - g(x)| \right] 
        \xrightarrow{\epsilon \to 0} 0
      \end{align*}
      We have Dominated Convergence since:
      \[(f_\epsilon \star g)(x) - g(x) \to 0 \quad \text{as } \epsilon \to 0\]
      and
      \[|f_\epsilon \star g(x) - g(x)| \le \|f\|_{L^1} \sup_{|z| \le R_\epsilon} |g(x-z) - g(x)| \le 2 \|f\|_1 \|g\|_{L^\infty} \mathbb{1}(|x| \le R_1).\]
      Where \(B(0, R_1) \supseteq \supp(g) + B(0, R_\epsilon)\), thus
      \(f_\epsilon \star g \to g\) in \(L^p(\mathbb{R}^d)\). To remove the technical assumptions \(f, g \in C_c(\mathbb{R}^d)\), then we use a density argument. We use the fact that \(C_c(\mathbb{R}^d)\) is dense in \(L^p(\mathbb{R}^d)\), \(1 \le p < \infty\).
      \item Let \(g \in C_c(\mathbb{R}^d), g \in L^p(\mathbb{R}^d)\). Then there is \(\{g_m\} \subseteq L^p(\mathbb{R}^d), g_m \to g\) in \(L^p(\mathbb{R}^d)\). Then 
      \begin{align*}
        \|f_\epsilon \star g - g\|_{L^p} 
        &\le \|f_\epsilon \star (g - g_m)\|_{L^p}  + \|f_\epsilon \star g_m - g_m \|_{L^p}+ \|g_m - g\|_{L^p} \\
        \text{(Young)} \quad &\le \|f_\epsilon\|_{L^1}\|g-g_m\|_{L^p}  + \|f_\epsilon \star g_m - g_m \|_{L^p}+ \|g_m - g\|_{L^p} \\
        &\le \|f\|_{L^1}\|g-g_m\|_{L^p}  + \|f_\epsilon \star g_m - g_m \|_{L^p}+ \|g_m - g\|_{L^p} \\
        &\le (\|f\|_{L^1} + 1) \|g - g_m\|_{L^p} + \|f \star g_m - g_m\|_{L^p}
      \end{align*}
      
      So we get:
      \begin{align*}
        \limsup_{\epsilon \to 0} \|f_\epsilon \star g - g\|_{L^p} 
        &\le (\|f\|_{L^p} + 1) \|g - g_m\|_{L^p} + \underbrace{\limsup_{\epsilon \to 0} \|f_\epsilon \star g_m - g_m\|_{L^p}}_{0 \text{by step 1.}} \\
        \xrightarrow{m \to \infty} 0
      \end{align*}
      \item Let \(f \in L^1(\mathbb{R}^d)\) and \(g \in L^p(\mathbb{R}^d)\). Take \(\{f_m\} \subseteq C_c(\mathbb{R}^d)\), s.t. 
      \begin{align*}
        \begin{cases}
          F_m \to g in L^1(\mathbb{R}) \text{ as } m \to \infty \\
          \int_{\mathbb{R}^d} F_m = 1 (\text{it is possible since } \int_{\mathbb{R}^d}) f = 1)
        \end{cases}
      \end{align*} 
      Define \(F_{m, \epsilon}(x) = \epsilon^{-d} F_m(\epsilon^{-1} x)\) (recall \(f_\epsilon(x) = \epsilon^{-d} f(\epsilon^{-1} x)\)). Then:
      \begin{align*}
        f_\epsilon \star g - g &= (f_\epsilon - F_{m, \epsilon}) \star g + F_{m, \epsilon} \star g -g \\
        \Rightarrow \|f_\epsilon - g \|_{L^p} &\le \underbrace{\|f_\epsilon - F_{m, \epsilon} \star g\|_{L^p}}_{\mathclap{\overset{\text{Young}}{\le} \|f_\epsilon - F_{m, \epsilon}\|_{L^1} \|g\|_{L^p} = \|f - F_m\|_{L^1} \|g\|_{L^p}}} + \|F_{m, \epsilon} \star g - g\|_{L^p} \\
        \Rightarrow \limsup_{\epsilon \to 0} \|f_\epsilon \star g - g\|_{L^p} &\le \|f - F_m\|_{L^1} \|g\|_{L^p} = \|f - F_m\|_{L^1} \|g \|_{L^p} \qedhere
      \end{align*}
    \end{enumerate}
  \end{proof}

  
  \begin{lem}
    \(C_c(\mathbb{{R}^d})\) is dense in \(L^p(\mathbb{R}^d)\), \(1 \le p < \infty\)
  \end{lem}

  \begin{proof}
    For all \(g \in L^p(\mathbb{R}^d)\) there are \(g_m\) step functions and \(g_m \to m\) in \(L^p(\mathbb{R}^d)\),
    % \[g_m(x) = \sum_{\substack{\Omega \\ \text{{finite sum} \\ \Omega \subseteq \mathbb{R}^d \text{measurable}}}} \chi_\Omega(x) a_\Omega\]
    We can assume that \(\Omega\) is open and bounded and we want to approximate \(\chi_\Omega\) by \(C_c(\mathbb{R}^d)\). 
  \end{proof}

  \begin{lem}[Urnson]
    Define 
    \[\Omega_\epsilon = \{x \in \Omega \mid \dist(x, \partial \Omega) > \epsilon\}\]
    Then there is a \(\eta_\epsilon \in C_c(\mathbb{R}^d)\) s.t.
    \begin{align*}
      \begin{cases}
        0 \le \eta(x) \le 1 & \forall x \in \mathbb{R}^d \\
        \eta_\epsilon(x) = 1 & \text{if } x \in \Omega_\epsilon \\
        \eta_\epsilon(x) = 0 & \text{if } x \notin \Omega
      \end{cases}
    \end{align*}
  \end{lem}

  \begin{lem}[Gernal Version of Urnson]
    If \(A, B \subseteq \mathbb{R}^d\), \(A\) closed, \(B\) closed, \(A \cap B = \emptyset\). Then
    \[\eta(x) = \frac{\dist(x, A)}{\dist(x, A) + \dist(x, B)}\]
    Then \(\eta \in C(\mathbb{R}^d)\), \(0 \le \eta \le 1\) and \(\eta = 0\)if \(x \in B\), \(\eta = 1\) if \(x \in A\). App to \(A = \overline{\Omega_\epsilon} \subset \subset \Omega\) and \(B = \mathbb{R}^d \setminus \Omega\).
  \end{lem}

  
  \begin{thm}[Appendix C4 in Evans]
    Let \(\Omega\) be open in \(\mathbb{R}^d\) and for \(\epsilon > 0\) define
    \[\Omega_\epsilon = \{x \in \Omega \mid \dist(x, \mathbb{R}^d \setminus \Omega) > \epsilon\}\]
    Let \(f \in C_c^\infty(\mathbb{R}^d), \int_{\mathbb{R}^d} f = 1, \supp f \subseteq B(0, 1), f_\epsilon(x) = \epsilon^{-d} f(\epsilon^{-1} x) \supp\) is \(B(0, \epsilon)\). Then for all \(g \in L_{loc}^p(\Omega)\) (i.e. \(\mathbb{1}_K g \in L^p(\Omega) \forall K\) compakt set in \(\Omega\)), then:
    \begin{enumerate}[label=\alph*)]
      \item \(g_\epsilon(x) = (f_\epsilon \star g)(x) = \int_{\mathbb{R}^d} f_\epsilon(x-y) g(y) \, dy - \int_\Omega f_\epsilon(x-y) g(y) \, dy\) is well-defined in \(\Omega_\epsilon\) and \(g_\epsilon \in C^\infty(\Omega_\epsilon)\).
      \item \(g_\epsilon \to g\) in \(L_{loc}^p(\Omega)\) if \(1 \le p < \infty\) and \(g_\epsilon(x) \to g(x)\) almost everywhere \(x \in \Omega\).
      \item If \(g \in C(\Omega)\), then \(g_\epsilon(x) \to g(x)\) uniformly in any compact subset of \(\Omega\).
    \end{enumerate}
  \end{thm}

  \begin{proof}
    \begin{enumerate}[label=\alph*)]
      \item \(D^\alpha(g_\epsilon) = (D^\alpha f_\epsilon) \star g \in C(\Omega_\epsilon)\)
      % \item Replace \(g \mapsto \mathbb{1}_K g\) where \(K\) is a compact set \(\subbseteq \Omega\). Then \(\mathbb{1}_K g \in L^p\). Then our theorem \(f_\epsilon \star (\mathbb{1}_K g) \to \mathbb{1}_K g\) in \(L^p(\Omega)\). On the other hand \(\mathbb{1}_K[(f_\epsilon \star \mathbb{1}_K g) - (f_\epsilon \star g)] \to 0\) as \(\epsilon \to 0\) (exercise)
      \item Already proved in \(\mathbb{R}^d\) space.
    \end{enumerate}
  \end{proof}

  
  \begin{cor}[Lebesgue differentation theorem]
    If \(f \in L_{loc}^P(\mathbb{R}^d)\), then
    \begin{align*}
      \fint_{B(x, \epsilon)} |f(y) - f(x)|^p \, dy \to 0 \quad \text{ as } \epsilon \to 0
    \end{align*}
  \end{cor}


  \begin{ex}[E 2.1]
    Let \(u \in C^2(\mathbb{R}^2)\) be convex. I.e.
    \begin{align*}
      t u(x) + u(y) (1-t) \ge u(tx + (1-t)y) \forall x,y \in \mathbb{R}^d \forall t \in [0,1]
    \end{align*}
    \begin{enumerate}[label=\alph*)]
      \item Prove for all \(x \in \mathbb{R}^d\) that \(H(x) =  \) ...
    \end{enumerate}
  \end{ex}
  
  \begin{proof}[Solution]\
    \begin{enumerate}[label=\alph*]
      \item In 1D: If \(u\) is convex \(\Leftrightarrow\) \(u''(x) \ge 0\) for all \(x \in \mathbb{R}\). In general: Taylor expansion for all \(x,z \in \mathbb{R}^d\):
      \begin{align*}
        u(x) &= u(z) + \nabla u(z)(x-y) + \int_0^1 \sum_{|\alpha| = 2} D^\alpha u(z + s(x-z)) \frac{(x-z)^\alpha}{\alpha!} \, ds
      \end{align*}
      \(x = z + s(x-z), s= 1\)
      Use \(z = tx + (t-1)y\) \(\Rightarrow\) \(x-z = (1-t)(x-y)\)
      \begin{align*}
        t u(x) &= tu(z) + t\nabla u(z) (1-t)(x-y) + t\int_0^1 \sum_{|\alpha| = 2} D^\alpha u(z + s(x-z)) \frac{\left[(1-t)(x-y)\right]^\alpha}{\alpha!} \, ds \\
        (1-t) u(y) &= (1-t)u(z) + (1-t)\nabla u(z) t (y-x) + (1-t)\int_0^r \sum_{|\alpha| = 2} D^\alpha u(z + s(y-z)) \frac{[t(y-x)]^\alpha}{\alpha!} \, ds
      \end{align*}
      \begin{align*}
        \Rightarrow t u(x) + (1-t) u(y) = u(z) + t \int_0^1 ... + (1-t) \int_0^1 ... \\
        \Rightarrow t \int_0^1 ... + (1-t) \int_0^1 ... \ge 0 \forall x,y,t,z = tx + (1-t)y
      \end{align*}
      
      \begin{align*}
        t(1-t)^2 \int_0^1 \sum_{|\alpha| = 2} D^\alpha u(z + s(x-z)) \frac{(x-y)}{\alpha!} \, ds + (1-t) t^2 \int_0^1 \sum_{|\alpha| = 2} D^\alpha u(z + s(y-z)) \frac{(y-z)^\alpha}{\alpha!} \,ds \ge 0
      \end{align*}
      for all \(x,y \in \mathbb{R}^d, t \in [0,1], z = tx+ (1-t)y\). Divides for \(t(1-t)\)
      \begin{align*}
        (1-t) \int_0^1 \dots + + \int_0^1 \dots \ge 0
      \end{align*}
      Take \(t \to 0\)
      \begin{align*}
        \int_0^1 \sum_{|\alpha| = 2} D^\alpha u(y + s(x-y)) \frac{(x-y)^\alpha}{\alpha!} \, ds \ge 0 \forall x,y \in \mathbb{R}^d
      \end{align*}
      Take \(y = x +a, a \in \mathbb{R}^d\)
      \begin{align*}
        \int_0^1 \sum_{|\alpha| = 2} D^\alpha u(x +a+sa) \frac{a^\alpha}{\alpha!} \, ds \ge 0 \forall \epsilon > 0, \forall x,a \in \mathbb{R}^d
      \end{align*}
      Take \(\epsilon \to 0\)
      \begin{align*}
        \int_0^1 \sum_{|\alpha| = 2} D^\alpha u(x) \frac{a^\alpha}{\alpha!} \ge 0 \Rightarrow \sum_{i,j = 1, i \ne j}\partial_{x_i} \partial_{x_j} u(x) a_i a_j + \sum_{i=j=1}^d \partial_{x_i}^2 u(x) \frac{a_i^2}{2}
      \end{align*}
      We get
      \begin{align*}
        \frac{1}{2} a^T Ha \ge 0 \forall a(a_i)_{i=1}^d \in \mathbb{R}^d
      \end{align*}
      \item \(H(x) \ge 0 \Rightarrow \left(\partial_i \partial_j u\right) \ge 0 \Rightarrow Tr H(x) \ge 0 \Rightarrow \sum_{i=1}^d \partial_{x_i}^2 u(x) \ge 0 \Rightarrow \Delta u(x) \ge 0 \forall x \in \mathbb{R}^d\)
    \end{enumerate}
  \end{proof}

  
  \begin{ex}[E 2.2]
    
  \end{ex}

  \begin{proof}[Solution]
    Regard \(d = 3\). De function \(\frac{1}{|x|}\) is harmonic in \(\mathbb{R}^3 \setminus \{0\}\). We prove 
    \begin{align*}
      \fint_{\partial B(x, r)} \frac{dS(y)}{|y|} = \frac{1}{\max(|x|, r)}
    \end{align*}
    If \(|x| > r\), then \(0 \notin B(x,r + \epsilon)\). Then
    \[y \mapsto \frac{1}{|y|}\] is harmonic in \(B(x, r  + \epsilon)\). Then by the Mean Value Property:
    \[\fint_{\partial B(x,r)} \frac{dS(y)}{|y|} = \frac{1}{|x|}\]
    If \(|x| < r\): Then \(\frac{1}{|y|}\) is not harmonic in \(B(x,r)\) since \(0 \in B(x,r)\). Note
    \begin{align*}
      \fint_{\partial B(x,r)} \frac{d S(y)}{|y|} 
      &= \fint_{\partial B(0, r)} \frac{dS(y)}{|x-y|}
    \end{align*}
    This function depends on \(x\) only via \(|x|\). 
    \begin{align*}
      ... &= \fint_{\partial B(0,r)} \frac{dS(y)}{|Rx-Ry|}
    \end{align*}
    for all \(R\) rotation \(SO(3)\), \(dS(R_y) = dS(y)\)
    \begin{align*}
      &= \fint_{\partial B(0, r)} \frac{dS(y)}{|Rx - y|} \\
      &= \fint_{\partial B(0, r)} \frac{dS(y)}{|z - y|} \\
      \text{(Radial in z)} \quad &= \fint_{\partial B(0, |x|)} \left(\fint_{\partial B(0, r)} \frac{dS(y)}{|z-y|}\right) \, dS(z) \\
      (\text{Fubini}) \quad &= \fint_{\partial B(0,r)} \left(\fint_{\partial B(0, |x|)} \frac{dS(z)}{|z-y|}\right) \, dS(y) \\
      (\text{case 1 since \(|y| = r > |x|\))} \quad &= \fint_{\partial B(0,r)} \frac{1}{|y|} \, dS(y)
      = \frac{1}{r}
    \end{align*}
    If \(|x| = r\): Continuity: \(x \mapsto \fint_{\partial B(0, r)} \frac{dS(y)}{|x-y|}\)
  \end{proof}

  \begin{rem}
    For \(f \in C^{|\alpha|}, g \in C^{|\beta|}\):
    \begin{align*}
      D^{\alpha + \beta}(f \star g) = (D^\alpha f)\star(D^\beta g)
    \end{align*}
  \end{rem}

  
  \begin{lem}
    If \(d \ge 3\) and \(f: \mathbb{R}^d \to \mathbb{R}\) radial. Then:
    \begin{align*}
      \left(\frac{1}{|x|^{d-2}} \star f \right)(x) 
      = \int_{\mathbb{R}^d} \frac{f(y)}{|x-y|^{d-2}} \, dy \\
      = \int_{\mathbb{R}^d} \frac{f(y)}{\max(|x|^{d-2}, |y|^{d-2})}\, dy
    \end{align*}
  \end{lem}
  \begin{proof}
    (d=3) Polar coordinates:
    \begin{align*}
      \int_{\mathbb{R}^3} \frac{f(y)}{|x-y|}\, dy 
      &= \int_0^{\infty} \left[\int_{\partial B(0,1)} \frac{1}{|x-rw|} \, d\omega \right] \, f(r) \, dr \\
      (a) \quad &= \int_0^\infty \left[\int_{\partial B(0,1)} \frac{d \omega}{\max(|x|, r)}\right] f(r) \, dr \\
      &= \int_{\mathbb{R}^3} \frac{f(y)}{\max(|x|, |y|)} \, dy
    \end{align*}
    (b) (d=3) If \(f\) radial and non-negative
    \begin{align*}
      \int_{\mathbb{R}^3} \frac{f(y))}{|x-y|} &= \int_{\mathbb{R}^3} \frac{f(y)}{|x|} \, dy = \frac{(Sf?)}{|x|}
    \end{align*}
    Then
    \begin{align*}
      \int_{\mathbb{R}^3}\int_{\mathbb{R}^3} \frac{f_1(x-z_1)f_2(y-z_2)}{|x-y|} \, dx \, dy &= \int_{\mathbb{R}^3}\int_{\mathbb{R}^3} \frac{f_1(x) f_2(y)}{|x+ z_1 - y - z_2} \, dx \, dy \\
      &= \int_{\mathbb{R}^3} \left(\int_{\mathbb{R}^3} f_1(x) \, dx \right) f_2(y) \, dy \le \int_{\mathbb{R}^3} \frac{\left(\int_{\mathbb{R}^3} f_1\right)}{|y + z_2 - z_1|} f_2(y) \, dy \\
      &\le \frac{(\int_{\mathbb{R}^3} f_1)(\int_{\mathbb{R}^3} f_2)}{|z_1 - z_2|}
    \end{align*}
  \end{proof}

  
  \begin{ex}[Bonus 2]
    \begin{enumerate}[label=\alph*)]
      \item Prove that \(u(x) = \frac{1}{|x|}\) is sub-harmonic in \(\mathbb{R}^2 \setminus \{0\}\). 
      \item Prove that if \(f: \mathbb{R}^2 \to \mathbb{R}\) radial, non-negative, measurable:
      \begin{align*}
        \int_{\mathbb{R}^2} \frac{f(y)}{|x-y|} \, dy \ge \int_{\mathbb{R}^2} \frac{f(y)}{\max(|x|, |y|)} \, dy
      \end{align*}
    \end{enumerate}
  \end{ex}

  \begin{proof}[My Solution]
    \begin{enumerate}[label=\alph*)]
      \item Let \(x \in \mathbb{R} \setminus \{0\}\).
      \begin{align*}
        \partial_{x_i} u &= \partial_{x_i} |x|^{-1} = - |x|^{-2} \frac{x_i}{|x|} = -x_i |x|^{-3} \\
        \Rightarrow \ \partial_{x_i}^2 u &= \partial_{x_i} (-x_i |x|^{-3}) = -|x|^{-3} + 3x_i^2 |x|^{-5} \\
        \Rightarrow \ \Delta u &= - |x|^{-3} + 3x_1^2 |x|^{-5} - |x|^{-3} + 3x_2^2 |x|^{-5} \\
        &= - 2 |x|^{-3} + 3 \underbrace{(x_2^2 + x_2^2)}_{= |x|^2} |x|^{-5} = \frac{1}{|x|^3} > 0
      \end{align*}
      So \(u\) is sub-harmonic in \(\mathbb{R}^2\setminus \{0\}\).

      \item Let \(r > 0, x \in \mathbb{R}^2\) and \(|x| < r\). First we show that
      \begin{align*}
        \fint_{\partial B(x, r)} \frac{1}{|y|} \, dS(y) \ge \frac{1}{r} \qquad (\star)
      \end{align*}
      Now, 
      \begin{align*}
        \fint_{\partial B(0, r)} \frac{1}{|y|} \, dS(y)
        &= \fint_{\partial B(0, r)} \frac{1}{|x-y|} dS(y) \eqqcolon \tilde u(x)
      \end{align*}
      Take \(z \in \mathbb{R}^2 \setminus \{0\}\) such that \(z = |x|\), then \(\tilde u(x) = \tilde u(z)\). Let \(0 < \epsilon < r\) be small. Then we get
      \begin{align*}
        \tilde u(z) 
        &= \fint_{\partial B(0, r)} \frac{dS(y)}{|z-y|} \\
        \left(\begin{aligned}|y| = r > |x| = |z| \\ \tilde u \text{ radial function} \end{aligned}\right)
        \quad &= \fint_{\partial B(0, |x|-\epsilon)} \left(\fint_{\partial B(0, r)} \frac{dS(y)}{|z-y|} \, \right) \, dS(z) \\
        \text{(Fubini)} \quad &= \fint_{\partial B(0, r)} \left(\fint_{\partial B(0, |x|-\epsilon)} \frac{dS(z)}{|z-y|}\right) \, dS(y) \\
        &= \fint_{\partial B(0, r)} \left(\fint_{\partial B(y, |x|-\epsilon)} \frac{dS(z)}{|z|}\right) \, dS(y) \\
        \left(\frac{1}{|y|} \text{ sub-harmonic in } \mathbb{R}^2\setminus \{0\}\right) 
        \quad &\ge \fint_{\partial B(0, r)} \frac{1}{|y|} \, dS(y) \\
        &= \fint_{\partial B(0, r)} \frac{1}{r} \, dS(y) \\
        &= \frac{1}{r}
      \end{align*}
      Now, 
      \begin{align*}
        \int_{\mathbb{R}^2} \frac{f(y)}{|x-y|} \, dy &= \int_{|x| \ge |y|} \frac{f(y)}{|x-y|} \, dy + \int_{|x| < |y|} \frac{f(y)}{|x-y|} \, dy,
      \end{align*}
      where
      \begin{align*}
        \int_{|x| \le |y|} \frac{f(y)}{|x-y|} \, dy &= \int_0^\infty \int_{\partial B(0, r)} \frac{f(y)}{|x-y|} \mathbb{1}(|x| \le |y|) \, dS(y)  \, dr \\
        (f \text{ radial}) \quad &= \int_0^\infty f(r) \int_{\partial B(0,r)} \frac{\mathbb{1}(|x| \le r)}{|x-y|} \, dS(y) \, dr \\
        &= \int_0^\infty f(r) \int_{\partial B(x,r)} \frac{\mathbb{1}(|x| \le r)}{|y|} \, dS(y) \, dr \\
        (\star) \quad &\ge \int_0^\infty  \frac{f(r)}{r} |\partial B(x, r)| \mathbb{1}(|x| \le r) \, dr \\
        &= \int_0^\infty \int_{\partial B(x, r)} \frac{f(r)}{r} \mathbb{1}(|x| \le r) \, dS(y) \, dr \\
        &= \int_{\mathbb{R}^2} \frac{f(y)}{|y|}\mathbb{1}(|x| \le |y|) \, dy \\
        &= \int_{|x| \le |y|} \frac{f(y)}{|y|} \, dy
      \end{align*}
      and
      \begin{align*}
        \int_{|x| > |y|} \frac{f(y)}{|x-y|} \, dy 
        &= \int_0^\infty \left(\int_{\partial B(0, r)} \frac{f(r)}{|x-y|}\mathbb{1}(|x| > |y|) \, dS(y)\right) \, dr \\
        (f \text{ radial}) \quad &= \int_0^\infty f(r) \mathbb{1}(|x| > r)\left(\int_{\partial B(x,r)} \frac{1}{|y|} \, dS(y)\right) \, dr \\
        \left(\begin{aligned}
          \frac{1}{|y|} \text{ sub-harmonic in \(\mathbb{R}^2\),} \\ \text{MVP and } |x| > r
        \end{aligned}\right)
         \quad 
        &\ge \int_0^\infty f(r) \mathbb{1}(|x| > r)|\partial B(x,r)|\frac{1}{|x|} \, dr \\
        &= \int_0^\infty \int_{\partial B(x,r)} f(r) \mathbb{1}(|x| > r) \frac{1}{|x|} \, dS(y) \, dr \\
        &= \int_{\mathbb{R}^2} f(y) \mathbb{1}(|x| > |y|) \frac{1}{|x|} \, dy \\
        &= \int_{|x| > |y|} f(y) \frac{1}{|x|} \, dy.
      \end{align*}

      So we can conclude, 
      \begin{align*}
        \int_{\mathbb{R}^2} \frac{f(y)}{|x-y|} \, dy &= \int_{|x| > |y|} \frac{f(y)}{|x-y|} \, dy + \int_{|x| \le |y|} \frac{f(y)}{|x-y|} \, dy \\
        &\ge \int_{|x| > |y|}  \frac{f(y)}{|x|} \, dy + \int_{|x| \le |y|} \frac{f(y)}{|y|} \, dy \\
        &= \int_{\mathbb{R}^2} \frac{f(y)}{\max(|x|, |y|)} \, dy \qedhere
      \end{align*}
    \end{enumerate}
  \end{proof}

  \section{Fourier Transformation}
  \begin{defn}[Fourier Transform]
    For \(f \in L^1(\mathbb{R}^d)\) define
    \[\four f(k) = \hat f(k) = \int_{\mathbb{R}^d} f(x) e^{- 2 \pi i k \cdot x} \, dx, \quad k\cdot x = \sum_{i=1}^d k_i x_i\]
  \end{defn}

  
  \begin{thm}[Basic Properties]
    \begin{enumerate}
      \item If \(f \in L^1(\mathbb{R}^d)\), then \(\hat f \in L^\infty(\mathbb{R}^d)\) and \(\| \hat f \|_{L^\infty} \le \|f\|_{L^1}\)
      \item For all \(f \in L^1(\mathbb{R}^d) \cap L^2(\mathbb{R}^d)\), \(\|\hat f\|_{L^2} = \|f\|_{L^2}\). Moreover, \(\four\) can be extended to be a unitary transforamtion \(L^2(\mathbb{R}^d) \to L^2(\mathbb{R}^d)\) s.t.
      \[\|\four g\|_{L^2} = \|f\|_{L^2} \quad \forall f \in L^2(\mathbb{R}^d)\]
      \item The inverse of \(F\) can be defined as
      \item \[(F^{-1}f)(x) = \check f (x) = \int_{\mathbb{R}^d} f(x) e^{2 \pi ik x} \, dk\] for all \(f \in L^1(\mathbb{R}^d) \cap L^2(\mathbb{R}^d)\)
      \item \(\widehat{D^\alpha f}(k) = (2 \pi i k)^\alpha \hat f(k)\) as \((2 \pi ik)^\alpha f(k) \in L^2(\mathbb{R}^d)\) (\(k^\alpha = k_1^{\alpha_1} \cdots k_\alpha^{\alpha_k}\))
      \item \(\widehat{f \star g}(k) = \hat f(k) \hat g (k)\) if \(f,g\) are nice enough.
    \end{enumerate}
  \end{thm}

  \begin{thm}[Hausdorff-Young-Inequality]\label{hausdorff-young}
    If \(1 \le p \le 2\), \(\frac{1}{p} + \frac{1}{p'} = 1\) and \(f \in L^p(\mathbb{R}^d) \cap L^1(\mathbb{R}^n)\) then
    \[\| \hat f \|_{L^{p'}} \le \|f\|_{L^p}\]
    and 
    \[\|\hat f\|_{L^p} \le \|f\|_{L^p} \quad \forall f \in L^p(\mathbb{R}^d)\]
  \end{thm}
  
  % \begin{rem}
  %   If \(1 \le p \le 2\) and \(f \in L^p(\mathbb{R}^d)\) we can write \(f = f_1 + f_2\) when \(f_1 \in L^1\), \(f_2 \in L^2\), e.g.
  %   \begin{align*}
  %     f = \underbrace{f \mathbb{1}(|f| \ge 1)}_{f_1} + \underbrace{f \mathbb{1}(|f| < 1)}_{f_2}
  %   \end{align*}
  %   \begin{align*}
  %     \int_{\mathbb{R}^d} |f_2|^2 \, dy &= \int_{\mathbb{R}^d}|f|^2 \mathbb{1}(|f| < 1) \le \int_{\mathbb{R}^d} |f|^p \, dy < \infty \\
  %     \int_{\mathbb{R}^d} |f_1| \, dy &= \int_{\mathbb{R}^d} |f| \mathbb{1}(|f| \ge 1) \le \int_{\mathbb{R}^d} |f|^p < \infty
  %   \end{align*}
  %   thus we can define \(\hat f = \hat f_1 + \hat f_2\) well defined in \(L^\infty(\mathbb{R}^d) + L^2(\mathbb{R}^d)\) what it in unclear why \(\hat f \in L^q\)?
  %   Proof of HY inequality. Weee nedd Riez-Theorem interpolation theorem. If \(1 \le p_0, p_1, q_0, q_1 \le \infty\), and \(\Omega \subseteq \mathbb{R}^d\) open and 
    % \[T: L^{p_0}(\Omega} + L^{p_1})(\Omega) \longrightarrow L^{q_0}(\Omega} + L^{q_1})(\Omega)\]
    % is a linear operator and
    % \begin{align*}
    %   T: \ L^{p_0} \to L^{q_0} \text{ and } \|T\|_{L^{p_1} \to L^{q_1}} \le 1, \quad \text{ for } i = 0, 1.
    %   \text{ Then } T: \ L^{p_0} \to L^{q_0} \text{ and } \|T\|_{L^{p_1} \to L^{q_1}} \le 1, \quad \text{ for any } 0 < \theta < 1, where \begin{cases}
    %     \frac{1}{p_0} = \frac{\theta}{p_0} + \frac{1 - \theta}{p_2} \\
    %     \frac{1}{q_0} = \frac{\theta}{q_0} + \frac{1 - \theta}{q_1}
    %   \end{cases}
    % \end{align*}
    % Consider the Foureir Transform:
    % \begin{align*}
    %   F: L^1 + L^1 \to L^2 + L^\infty 
    % \end{align*}
    % and
    % \begin{align*}
    %   \|F\|_{L^1 \to L^\infty} \le 1 \text{ as } \|\hat f\|_{L^\infty} \le \|f\|_{L^1} \forall f p \in L^1 \\
    %   \|F\|_{L^2 \to L^2} = 1 \text{ as } \| \hat f \|_{L^2} = \|f\|_{L^2} \forall f \in L^2 \\
    %   \Rightarrow \|F\|_{L^{p_0} \to L^{p_t}} \le 1 \forall \theta \in (0,1)
    % \end{align*}
    % \(p_0 = 1, p_1 = 2, q_0 = \infty, q_1 = 2\)
    % \begin{align*}
    %   \frac{1}{p_0} = \frac{\theta}{p_0} + \frac{1 - \theta}{p_2} = \theta + \frac{1 - \theta}{2} = \frac{1 + \theta}{2} \\
    %   \frac{1}{q_\theta} = \frac{\theta}{q_0} + \frac{1 - \theta}{q_1} = \frac{1 - \theta}{2} \\
    %   \Rightarrow \frac{1}{p_0} + \frac{1}{q_\theta}} = \frac{1 + \theta}{2} + \frac{1 - \theta}{2} = 1
    % \end{align*}
    % Thus: Let \(1 \le p,q,r \le 2\) s.t. \(\frac{1}{p} + \frac{1}{a} = 1 + \frac{1}{r}}\)
    % Let \(f \in L^p(\mathbb{R}^d)\), \(g \in L^q(\mathbb{R}^d)\). Recall \(f \star g \in L^r(\mathbb{R}^d)\) by Young. We have
    % \[\widehat{f \star g}(k) = \hat f(k) \hat g(k) \text{ a.e. k \in \mathbb{R}^d}\]
  
    
    % \begin{ex}
    %   Hint: first \(f,g \in C_c(\mathbb{R}^d)\) then use a density arugment)
    % \end{ex}

    % \begin{align*}
    %   \widehat{f \star g}(k) &= \int_{\mathbb{R}^d} (f \star g)(x) e^{-2 \pi i k x} \, dx = \int_{\mathbb{R}^d}\int_{\mathbb{R}^d} f(x-y) g(y) e^{-2 \pi i kx} \, dx \, dy \\
    %   = \int_{\mathbb{R}^d}\int_{\mathbb{R}^d} \left(f(x-y) e^{- 2 \pi i k(x-y)}\right) (g(y)) e^{- 2 \pi i k y}) \, dx \, dy \\
    %   &= \int_{\mathbb{R}^d} \left(\int_{\mathbb{R}^d} (f(x-y) e^{- 2 \pi i k (x-y)} \, dy)\right) (g(y) e^{ - 2 \pi i k y}) \, dy = \hat f(k) \hat g(k)
    % \end{align*}
    \begin{rem}
      We want to apply the Fourier transform to find the solution of a PDE, e.g. the Poisson-Equation:
      \begin{align*}
        - \Delta u = f \text{ in } \mathbb{R}^d
        \Rightarrow | 2 \pi k|^2 \hat u (k) = \hat f(k)
        \Rightarrow \hat u(k) = \frac{1}{|2 \pi k|^2} \hat f(k) 
      \end{align*}
      If we can find \(G\) s.t. \(\hat G(k)  = \frac{1}{|2 \pi k|^2}\), then
      \begin{align*}
        \hat u(k) &= \hat G(k) \hat f(k) = \widehat{G \star f} \\
        \Rightarrow u(x) &= (G \star f) (x) = \int_{\Rd} G(x-y)f(y)\, dy
      \end{align*}
      In fact \(G\) is the fundamential solution of laplace quation.
  \end{rem}

  
  \begin{thm}[Fourier Transform of \(\frac{1}{|x|^\alpha}\) for \(0 < \alpha < d\)] We have formally
    \begin{align*}
      \widehat{\frac{c_\alpha}{|x|^\alpha}} = \frac{c_{d-\alpha}}{|k|^{d - \alpha}} \quad \forall\ 0 < \alpha < d
    \end{align*}
    Here
    \begin{align*}
      c_\alpha = \pi^{- \frac{d}{2}} \Gamma \left(\frac{\alpha}{2} \right) = \pi^{- \frac{\alpha}{2}} \int_0^\infty e^{-\lambda} \lambda^{\frac{\alpha}{2}-1} \, d\lambda
    \end{align*}
    More precisely, for all \(f \in C_c^\infty(\mathbb{R}^d)\), 
    \begin{align*}
      \frac{c_\alpha}{|x|^\alpha}\star f = \left(\frac{c_{d-\alpha}}{|k|^{d - \alpha}} \hat f (k)\right)^\lor
    \end{align*}
    Moreover if \(\alpha > \frac{d}{2}\), then we also have
    \begin{align*}
      \left(\frac{c_\alpha}{|x|^\alpha} \star f\right)^\land = \frac{c_{d - \alpha}}{|f|^{d-\alpha}} \hat f (k)
    \end{align*}
  \end{thm}

  % \begin{rem}
  %   If \(f \in L^p\), \(1 \le p \le 2\) \(\Rightarrow\) \(f = \underbrace{f_1}_{\in L^1} + \underbrace{f_2}_{\in L^2} \Rightarrow \hat f = \hat f_1 + \hat f_2\) \\
  %   Question: If \(f = \tilde f_1 + \tilde f_2\), where \(\tilde f_1 \in L^1\) and \(\tilde f_2 \in L^2\), do we have that \(\hat f_1 + \hat f_2 = \widehat{\tilde{f_1}} + \widehat{\tilde{f_2}} \in L^1 \cap \L^2\)?
  %   In fact:
  %   \begin{align*}
  %     f_1 + f_2 &= \tilde f_1 + \tilde f_2  \\
  %     \Rightarrow \underbrace{f_1 - \tilde f_1}_{\in L^1} = \Rightarrow \underbrace{\tilde f_2 - f_2}_{\in L^2} \in L^1 \cap L^2 \\
  %     \Rightarrow \hat f_1 - \hat{\tilde f_1} = \widehat{\tilde f_2}- \hat f_2 \Rightarrow \hat f_1 + \hat f_2 = \widehat{\tilde f_1} + \widehat{\tilde f_2}.
  %   \end{align*}
  % \end{rem}
  
  \begin{lem}[Fourier Transform of Gaussians] In \(\Rd\),
    \[\widehat{e^{- \pi |x|^2}} = e^{- \pi |k|^2}\]
    More generally for all \(\lambda > 0\):
    \[\widehat{e^{- \pi \lambda^2 |x|^2}} = \lambda^{-d} e^{-\pi \frac{|k|^2}{\lambda^2}}\]
    (exercise)
  \end{lem}

  \begin{proof}[Proof of Theorem]
    Formally:
    \begin{align*}
      \frac{c_\alpha}{|x|^\alpha} &= \frac{1}{|x|^\alpha} \pi^{- \frac{\alpha}{2}} \int_0^\infty e^{-\lambda} \lambda^{\frac{\alpha}{2} -1} \, d \lambda = \int_0^\infty e^{- \pi \lambda |x|^2} \lambda^{\frac{\alpha}{2}-1} \, d \lambda \\
      \Rightarrow \frac{\hat c_\alpha}{|x|^\alpha}(k) &= \int_0^\infty \widehat{e^{- \pi \lambda |x|^2}}(k) \lambda^{\frac{\alpha}{2}-1} \, d \lambda = \int_0^\infty \lambda^{-\frac{d}{2}} e^{- \pi \frac{|k|^2}{\lambda}} \lambda^{\frac{\alpha}{2}-1} \, d \lambda \\
      (\lambda \to \frac{1}{\lambda}) \quad &= \int_0^\infty \lambda^{\frac{d}{2} e^{- \pi |k|^2 \lambda}} \lambda^{- \frac{\alpha}{2} + 1} \lambda^{-2} \, d\lambda \\
      &= \frac{c_{d-\alpha}}{|k|^{d-\alpha}}
    \end{align*}

    Let \(f \in C_c(\Rd)\). Then \(\left(\frac{1}{|x|^\alpha} \star f\right)(x) = \int_{\Rd} \frac{1}{|x-y|^\alpha} f(y) \, dy\) is well defined as \(\frac{1}{|x-y|} \in L_{loc}^1(\mathbb{R}^d, dy)\). It is bounded
    \begin{align*}
      \frac{1}{|x|^\alpha} \star f = \frac{1}{|x|^\alpha} \underbrace{\mathbb{1}(|x| \le 1)}_{\in L^\infty(\Rd)} \star \underbrace{f}_{L^\infty} + \underbrace{\frac{1}{|x|} \mathbb{1}(|x| > 1)}_{\in L^\infty} \star \underbrace{f}_{\in L^1} \in L^\infty(\Rd)
    \end{align*}
    When \(|x| \to \infty\):
    \begin{align*}
      \left(\frac{1}{|x|^\alpha} \star f\right)(x) &= \int_{\Rd} \frac{f(y)}{|x-y|^\alpha} \, dy = \int_{|y| \le R} \frac{f(y)}{|x-y|^\alpha} \, dy \sim \frac{\int_{\Rd} f(y) \, dy}{|x|^\alpha}
    \end{align*}

    Note that \(\frac{c_{d-\alpha}}{|k|^{d-\alpha}} \underbrace{\hat f(k)}_{\text{bounded}} \in L^1(\Rd)\).
    \begin{align*}
      (...) \mathbb{1}(|k| \le 1) + (...) \mathbb{1}(|k|> 1)
      \frac{1}{|k|^{d - \alpha}}|\hat f(k)| \mathbb{1}(|k| \le 1) \le \|f\|_{L^1} \frac{\mathbb{1}(|k| \le 1)}{|k|^{d-\alpha}} \in L^1(\Rd, dk) \\
      \frac{1}{|k|^{d-\alpha}} |\hat f(k)| \mathbb{1}(k >1) \le |\hat f(k)| \in L^2(\Rd, dK) \text{ as } f \in L^2(\Rd)
    \end{align*}

    \begin{lem}
      If \(f \in C_c^\infty(\Rd)\), then \(\hat f \in L^1(\mathbb{R}^d)\)
    \end{lem}

    \begin{proof}(Exercise)
      Hint: \(|\widehat{D^\alpha f}| = |2 \pi k|^{|\alpha|} |\hat f(k)| \leadsto |\hat f(k)| \le \frac{1}{|k|^{|k|}}\) as \(|k| \to \infty\).
    \end{proof}

    Compute:
    \begin{align*}
      \left(\frac{c_{d-\alpha}}{|k|^{d-\alpha}} \hat f(k)\right)^\lor (x) 
      &= \int_{\Rd} \frac{c_{d-\alpha}}{|k|^{d-\alpha}} \hat f(k) e^{2 \pi i k x} \, dk \\
      &= \int_{\Rd} \left(\int_0^\infty e^{-\pi |k|^2 \lambda} \lambda^{\frac{d-\alpha}{2}-1} \, d \lambda \right) \hat f (k) e^{2 \pi i k x} \, dk \\
      &= \int_0^\infty \left(\int_{\Rd} e^{-\pi |k|^2 \lambda} \hat f (k) e^{2 \pi i k x} \, dk \right) \lambda^{\frac{d-\alpha}{2}-1} \, d \lambda \\
      &= \int_0^\infty \left(e^{- \pi k^2 \lambda} \hat f(x)\right)^\lor \lambda^{\frac{d-\alpha}{2} - 1} \, d \lambda \\
      &= \int_0^\infty \left(\widehat{\lambda^{-\frac{d}{2}} e^{- \pi \frac{x^2}{\lambda}}}(k) \hat f(k)\right)^\lor \lambda^{\frac{d-\alpha}{2} - 1} \, d \lambda \\
      &= \int_0^\infty \left(\lambda^{- \frac{d}{2}} e^{- \pi \frac{x^2}{\lambda}} \star f \right) \lambda^{\frac{d-\alpha}{2} - 1} \, d \lambda \\
      &= \left(\int_0^\infty \lambda^{- \frac{d}{2}} e^{- \pi \frac{x^2}{\lambda}}\lambda^{\frac{d-\alpha}{2} - 1} \, d \lambda \right) \star f
    \end{align*}
    Assume \(d > \alpha > \frac{d}{2}\). Then \(\frac{c_\alpha}{|x|^\alpha} \star f \in L^\infty\) and behaves \(\frac{c_\alpha(\int f)}{|x|^\alpha}\) as \(|x| \to \infty\). This implies:
    \begin{align*}
      \int_{\mathbb{R}^d} \left| \frac{c_\alpha}{|x|^\alpha} \star f \right|^2 \le c + \int_{|x| \ge R} \frac{c}{|x|^{2d}} \, dx < \infty 
    \end{align*}
    Thus the Fourier Transform \(\widehat{\frac{c_\alpha}{|x|^\alpha}} \star f\) exists. Combining with 
    \begin{align*}
      \frac{c_\alpha}{|x|^\alpha} \star f = \left(\frac{c_{d-\alpha}}{|f|^{d-\alpha}} \hat f(k) \right)^\lor \\
      \Rightarrow \widehat{\frac{c_\alpha}{|x|^\alpha} \star f} = \frac{c_{d-\alpha}}{|k|^{d-\alpha}} \hat f (k)
    \end{align*}
  \end{proof}
  
  \begin{rem}
    If \(d \ge 3\)
    \begin{align*}
      \hat G(k) 
      &= \frac{1}{|2 \pi k|^2}  \\
      \Rightarrow G(x) 
      &= \left(\frac{1}{|2 \pi k|^2}\right)^\lor
      = \frac{1}{d(d-2(k) |x|^{d-2})} 
      = \Phi(x)
    \end{align*}
  \end{rem}

  \section{Theory of Distribution}
  Let \(\Omega \subseteq \mathbb{R}^d\) be open.
  \begin{itemize}
    \item \(D(\Omega) = C_c^\infty(\Omega)\) the space of test functions.
    \item \(\phi_n \to \phi\) in \(D(\Omega)\) if \(\exists K \subseteq \Omega\), \(\supp(\phi_n), \supp(\phi) \subseteq K\) and \(\|D^\alpha(\phi_n - \phi)\|_{L^\infty} \to 0\) for all \(\alpha = (\alpha_1, \dots, \alpha_d)\), \(d_i \in \{0, 1, 2, \dots\}\).
    \[D'(\Omega) = \{T: D(\Omega) \to \mathbb{R} \text{ on } \mathbb{C} \text{ linear and continuous}\}\] the space of distributions.
  \end{itemize}

  Motivation: \(L^2(\Omega)' = L^2(\Omega)\), \((L^p(\Omega))' = (L^q(\Omega))\), \(\frac{1}{p} + \frac{1}{q} = 1\).


  \begin{eg}["normal functions" are distributions]
    If \(f \in L_{loc}^1(\Omega)\), then \(T = T_f\) defined by:
    \[T(\phi) = \int_{\Omega} f(x) \phi(x) \, dx\]
    is a distribution for all \(\phi \in D(\Omega)\), i.e. \(T \in D'(\Omega)\). Indeed, it is clear that \(T(\phi)\) is well-defined for all \(\phi \in D(\Omega)\) and \(\phi \mapsto T(\phi)\) is linear. Let us check that \(\phi \mapsto T(\phi)\) is continuous. Take \(\phi_n \to \phi\) in \(D(\Omega)\) and prove that \(T(\phi_n) \to T(\phi)\). Since \(\phi_n \to \phi\) in \(D(\Omega)\), there is a compact \(K\) s.t. \(\supp(\phi_n), \supp(\phi) \subseteq K \subseteq \Omega\).
  \end{eg}

  Question: Why is \(f \mapsto T_f\) injective?

  \begin{lem}[Fundamental lemma of calculus of variants]
    Let \(\Omega \subseteq \mathbb{R}^d\) be open. If \(f, g \in L_{loc}^1(\Omega)\) and 
    \(\int_\Omega f \phi \, dy = \int_{\Omega} g \phi \, dy\) for all \(\phi \in D(\Omega) \), then \(f = g\) in \(L_{loc}^1(\Omega)\)
  \end{lem}

  % \begin{proof}
  %   By the linearity, it suffices to show that if \(f \in L_{loc}^1(\Omega)\) and \(\int_\Omega f \phi = 0\) for all \(\phi \in D(\Omega)\), then \(f = 0\).
  %   \begin{enumerate}[label=Step \arabic*)]
  %     \item (\(\Omega = \mathbb{R}^d\) and \(f \in L^1(\mathbb{R}^d)\))Take \(h \in C_c^\infty(\mathbb{R}^d)\), \(\int_{\mathbb{R}^d} h = 1\), \(h_\epsilon(x) = \epsilon^{-d}h(\epsilon^{-1}x)\) for all \(\epsilon > 0\). Then \(h_\epsilon \star f \to f\) in \(L^1(\mathbb{R}^d)\) as \(\epsilon \to 0\). On the other hand: \[h_\epsilon \star f(x) = \int_{\mathbb{R}^d} f(y) \underbrace{h_\epsilon(x-y)}_{\phi_{\epsilon, x}(y)} \, dy = 0\] as \(\phi_{\epsilon, x} \in C_c^\infty\).
  %     \item (\(\Omega \subseteq \mathbb{R}^d, f \in L_{loc}^1(\Omega)\)) For any \(\epsilon > 0\), 
  %     \[\Omega_\epsilon = \{x \in \Omega \mid \dist(x, \Omega^\complement) > \epsilon\}\]
  %     Take \(h \in C_c^\infty(\mathbb{R}^d)\), \(\supp f \subseteq \{|x| \le 1\}\) and \(\int_{\mathbb{R}^d} h = 1\), \(h_\epsilon(x) = \epsilon^{-d}h(\epsilon^{-1}x)\). Then for all \(g \in C_c^\infty(\Omega_\epsilon)\) for all \(\epsilon > 0\) small we have 
  %     \begin{align*}
  %       h_\epsilon \star (gf)(x) 
  %       &= \int_{\mathbb{R}^d} \underbrace{h_\epsilon(x-y) g(y)}_{\phi_{\epsilon, x}(y)}f(y) \, dy = 0 \quad \text{as } \phi_{\epsilon, x} \in C_c^\infty(\Omega)
  %     \end{align*}
  %     but ...
  %   \end{enumerate}
  % \end{proof}
  
  \begin{eg}[Dirac delta function]
    Let \(\Omega \subseteq \mathbb{R}^d\) open. Define \(T: D(\Omega) \to \mathbb{R}\) or \(\mathbb{C}\) by \(T(\phi) = \phi(x_0)\). Let \(x_0 \in \Omega\). Then \(T \in D'(\Omega)\) and we denote it by \(\delta_{x_0}\). It is clear that \(\phi \mapsto T(\phi) = \phi(x_0)\) is well-defined and linear for all \(\phi \in D(\Omega)\). Take \(\phi_n \to \phi\) in \(D(\Omega)\) and prove \(T(\phi_n) \to T(\phi)\), i.e. \(\phi_n(x_0) \to \phi(x_0)\) (obvious.)
  \end{eg}

  \begin{eg}[Principle Value]
    The function \(f(x) = \frac{1}{x}\) is not in \(L_{loc}^1(\mathbb{R})\), but we can still define
    \[\int_{\mathbb{R}} f(x) \phi(x) \, dx = \int_{\mathbb{R}} \frac{\phi(x)}{x} \, dx\] for all \(\phi \in D(\mathbb{R})\) s.t. \(\phi(0) = 0\). In fact, \[\phi(x) = |\phi(x)-\phi(0)| \le (\sup |\phi'|)(x),\] so \(\frac{|\phi(x)|}{|x|} \in L^\infty(\mathbb{R})\) and compactly supported. So \(\frac{\phi(x)}{x} \in L^1(\mathbb{R})\).
    Define \(T: D(\mathbb{R}) \to \mathbb{R}\) or \(\mathbb{C}\) by \begin{align*}
      T(\phi) 
      &= \lim_{\epsilon \to 0} \int_{|x| \ge \epsilon} \frac{\phi(x)}{x} \, dx \quad \forall \phi \in D(\mathbb{R}) \text{ s.t. } \phi(0) = 0
    \end{align*}
    We denote \(T = p.v. \left(\frac{1}{x}\right)\). We check that \(T \in D'(\mathbb{R})\): For all \(\epsilon > 0\) we have  \[\left|\frac{\phi(x)}{x}\right| \le \frac{\|\phi\|_{L^\infty}}{\epsilon}\] for all \(|x| \ge \epsilon\) and \(\phi\) is compactly supported. So we get for all \(\epsilon > 0\):
    \begin{align*}
      \mathbb{1}(|x| \ge \epsilon)\frac{\phi(x)}{x} \in L^1(\mathbb{R}) \leadsto \int_{|x| \ge \epsilon} \frac{\phi(x)}{x} \, dx < \infty
    \end{align*}
    We can write:
    \begin{align*}
      \int_{|x| \ge \epsilon} \frac{\phi(x)}{x} \, dx 
      = \int_{|x|\ge 1} \frac{\phi(x)}{x} \, dx + \int_{\epsilon \le |x|\le 1} \frac{\phi(x)}{x}\, dx
    \end{align*}
    The second part can be written as:
    \begin{align*}
      \int_{\epsilon \le |x| \le 1} \frac{\phi(x)}{x} \, dx
      &= \int_{\epsilon}^1 \frac{\phi(x)}{x} \, dx + \int_{-1}^{-\epsilon} \frac{\phi(x)}{x} \, dx 
      = \int_\epsilon^1 \frac{\phi(x) - \phi(-x)}{x}\, dx
    \end{align*}
    Since \(\phi \in C_c^\infty(\mathbb{R})\) it holds that \(|\phi(x) - \phi(-x)|  \le 2 \|\phi'\|_{L^\infty}(x)\).
    \begin{align*}
      \Rightarrow \frac{\phi(x) - \phi(-x)}{x} \in L^\infty(\mathbb{R})
      \Rightarrow \frac{\phi(x) - \phi(-x)}{x} \in L^1(0, 1) \\
      \Rightarrow \int_0^1 \frac{\phi(x) - \phi(-x)}{x} \, dx = \lim_{\epsilon \to 0} \int_\epsilon^1 \frac{\phi(x) - \phi(-x)}{x} \, dx
    \end{align*}
  \end{eg}

  \begin{rem}
    The function \(\frac{1}{|x|^d}\) is not in \(L_{loc}^1(\mathbb{R}^d)\) but \(\exists T \in D'(\mathbb{R}^d)\) s.t. \(T(\phi) = \int_{\mathbb{R}^d} \frac{\phi(x)}{|x|^d} \, dx\) for all \(\phi \in C_c^\infty(\mathbb{R}^d)\) s.t. \(\phi(0) = 0\)
  \end{rem}

  Let in the following \(\mathbb{K} \in \{\mathbb{R}, \mathbb{C}\}\).

  \begin{defn}[Derivatives of distributions] 
    Let \(\Omega \subseteq \mathbb{R}^d\) and \(T \in D'(\Omega)\). Define for \(\alpha \in \mathbb{N}^d\): 
    \begin{align*}
      D^\alpha T: \ D(\Omega) &\longrightarrow \mathbb{K} \\
      \phi &\longmapsto (-1)^{|\alpha|}T(D^\alpha \phi)
    \end{align*}
    
  \end{defn}
  Motivation: \(f \in C_c^\infty(\Omega)\)
  \begin{align*}
    \int_\Omega(D^\alpha f) \phi = (-1)^{|\alpha|} \int_\Omega f(D^\alpha \phi)
  \end{align*}
  \glqq{}If the classical derivative exists, then it is the same as the distributional derivative.\grqq{} We write
  \[(D^\alpha T)(\phi) = T_{D^\alpha f} (\phi) = (-1)^{|\alpha|}T_f(D^\alpha \phi).\]
  
  \begin{rem}
    For all \(T \in D'(\Omega)\) it holds \(D^\alpha T \in D'(\Omega)\) for all \(\alpha \in \mathbb{N}^d\). Clearly
    \[\phi \longmapsto (D^\alpha T)(\phi) = (-1)^{|\alpha|}T(D^\alpha \phi)\] is linear. Moreover, if \(\phi_n \to \phi\) in \(D(\Omega)\), then \(D^\alpha \phi_n \to D^\alpha \phi \text{ in } D(\Omega)\), so
    \begin{align*}
      (D^\alpha T)(\phi_n) = (-1)^{|\alpha|} T(D^\alpha \phi_n) \xrightarrow{n \to \infty} (-1)^{|\alpha|} T(D^\alpha \phi) = (D^\alpha T)(\phi)
    \end{align*}
  \end{rem}

  \begin{eg}
    Consider \(f: x \mapsto |x|\), then \(f \in C(\mathbb{R})\) but \(f \notin C^1(\mathbb{R})\). However, 
    \[f'(x) = g(x) = \begin{cases}
      1 & x \ge 0 \\ -1 &x < 0
    \end{cases} \in L_{loc}^1\]
    Lets check \(f' = g\), i.e. \(-f(\phi') = f'(\phi) = g(\phi)\) for all \(\phi \in D(\mathbb{R})\). Thus we need to prove:
    \begin{align*}
      - \int_{\mathbb{R}} f(x) \phi'(x) \, dx = \int_{\mathbb{R}} g(x) \phi(x) \, dx \quad \forall \phi \in D(\mathbb{R})
    \end{align*}
    namely:
    \begin{align*}
      \underbrace{- \int_{\mathbb{R}} |x| \phi'(x) \, dx}_{\coloneqq (\star)} &= \int_0^\infty \phi(x) \, dx - \int_{-\infty}^0 \phi(x) \, dx
    \end{align*}
    Now we have
    \begin{align*}
      (\star) = - \int_0^\infty x \phi'(x) \, dx + \int_{-\infty}^0 x \phi'(x) \, dx.
    \end{align*}
    By integration by parts:
    \begin{align*}
      \int_0^\infty x \phi'(x) \, dx = \underbrace{[x \phi(x)]_0^\infty}_{= 0} - \int_0^\infty \phi(x) \, dx = - \int_0^\infty \phi(x) \, dx
    \end{align*}
    and similary:
    \begin{align*}
      \int_{-\infty}^0 x \phi'(x) \, dx = - \int_{-\infty}^0 \phi(x) \, dx
    \end{align*}
    Thus \(f' = g\) in \(D'(\Omega)\). We claim that \(g' = 2 \delta_0\) in \(D'(\mathbb{R})\). In fact, for all \(\phi \in D(\mathbb{R})\), then:
    \begin{align*}
      g'(\phi) 
      &= - g(\phi') 
      = - \int_{\mathbb{R}} g\phi' \, dx
      = - \int_{-\infty}^0 (-1) \phi'  \, dx - \int_0^\infty (1) \phi'  \, dx\\
      &= - \int_0^\infty \phi'  \, dx + \int_{-\infty}^0 \phi' \, dx
      = [\phi(0) - \underbrace{\phi(\infty)}_{= 0}] + [\phi(0) - \underbrace{\phi(-\infty)}_{= 0}]
      = 2 \phi(0) = 2 \delta_0 (\phi)
    \end{align*}
    So \(g' = 2 \delta_0\) in \(D'(\mathbb{R})\).
  \end{eg}

  \begin{ex}
    Prove that \((D^\alpha \delta_x)(\phi) = (-1)^{|\alpha|}(D^\alpha \phi)(x)\) for all \(\phi \in D(\mathbb{R})\) for all \(x \in \mathbb{R}\).
  \end{ex}

  \begin{defn}[Convergence of distributions]
    Let \(\Omega \subseteq \mathbb{R}^d\) be open, then
    \[T_n \xrightarrow{n \to \infty} T\] in \(D'(\Omega)\) if \(T_n(\phi) \xrightarrow{n \to \infty} T(\phi)\) for all \(\phi \in D(\Omega)\).
  \end{defn}

  \begin{ex}
    Let \(f \in L^1(\mathbb{R}^d)\), \(\int f = 1\) For \(\epsilon > 0\), define \(f_\epsilon(x) = \epsilon^{-d}f(\epsilon^{-1} x)\). Then: \(f_\epsilon \to \delta_0\) in \(D'(\Omega)\).
  \end{ex}
  
  \begin{ex}
    Let \(\Omega \subseteq \mathbb{R}^d\) be open and \(T_n \to T\) in \(D'(\Omega)\). Then:
    \(D^\alpha T_n \to D^\alpha T\) in \(D'(\Omega)\) for all \(\alpha = (\alpha_1, \dots, \alpha_d)\)
  \end{ex}
  
  \begin{defn}[Convolution of distributions]
    Let \(T \in D'(\mathbb{R})\) and \(f \in L_c^\infty(\mathbb{R}^d)\). Define \[(T \star f)(y) = T(f_y)\]
    We write \(f_y(x) = f(x-y)\) and \(\tilde f(x) = f(-x)\).
  \end{defn}
  
  \begin{thm}
    Let \(T \in D'(\mathbb{R})\). Then for all \(f \in D(\mathbb{R})\):
    \begin{enumerate}
      \item \(y \mapsto T(f_y)\) is \(C^\infty(\mathbb{R}^d)\) and 
      \[D_y^\alpha(T(f_y)) = (D^\alpha T)(f_y) = (-1)^{|\alpha|}T(D^\alpha f_y)\]
      \item For all \(g \in L^1(\mathbb{R}^d)\) and compactly supported, then
      \[\int_{\mathbb{R}^d} g(y) T(f_y) \, dy = T(\underbrace{f \star g}_{\in C_c^\infty(\mathbb{R})})\]
    \end{enumerate}
  \end{thm}

  \begin{proof}
    \begin{enumerate}
      \item We prove that \(y \mapsto T(f_y)\) is continuous. Take \(y_n \to y\) in \(\mathbb{R}^d\), then:\[T(f_{y_n}) \to T(f_y)\] since \(f_{y_n} \to f_y\) in \(D(\mathbb{R}^d)\). We check this: Since \(f \subseteq C_c^\infty(\mathbb{R}^d)\), it holds that \(\supp f \subseteq B(0, R) \subseteq \mathbb{R}^d\). Since \(y_n \to y\) in \(\mathbb{R}^d\). We have \(\sup_n |y_n| < \infty\). Thus \(f_{y_n}, f_y\) are supported in \(\overline{B(0, R + \sup_n |y_n|)} = K\) compact. Moreover
      \begin{align*}
        |f_{y_n}(x) - f_y(x)|
        &= |f(x-y_n) - f(x-y))|
        \le \| \nabla f \|_{L^\infty} \|y_n - y\| \to 0
      \end{align*}
      So we get \(\| f_{y_n} - f_y\|_{L^\infty} \to 0\)
      Similary:
      \[\|D^\alpha f_{y_n} - D^\alpha f_n \|_{L^\infty} \to 0\] \qedhere
    \end{enumerate}
  \end{proof}


  \begin{ex}[E 3.1 Lebesgue Differentiation Theorem]
    Let \(f \in L_{loc}^1(\mathbb{R}^d)\). Prove that that for almost every \(x \in \mathbb{R}^d\):
    \[\fint_{B(x,r)} |f(y)| \, dy \xrightarrow{r \to 0} 0\]
  \end{ex}

  \begin{proof}
    Clearly the same result holds with \(\mathbb{R}^d \leadsto \Omega \subseteq \mathbb{R}^d\) open. Also it suffices to consider \(f \in L^1(\mathbb{R}^d)\). From the last time discussion, by a density argument there exists \(r_n \to 0\) s.t.
    \[\fint_{B(x, r_n)} |f(y) - f(x)| \, dy = 0\]
    for a.e. \(x \in \mathbb{R}^d\). We prove that for all \(\epsilon > 0\), te set \(A_\epsilon = \{x \in \mathbb{R}^d \mid \limsup_{r \to 0} \fint_{B(x,r)} |f(y) - f(x)| \, dy > \epsilon\}\) has measure \(0\). This will imply that 
    \[\bigcup_{n = 1}^\infty A_{\frac{1}{n}} = \left\{x \in \mathbb{R}^d \mid \limsup_{r \to 0} \int_{B(x,r)} |f(y) - f(x)| \, dy > 0\right\}\] has measure \(0\), which is what wie want to show. First, we show that \(|A_\epsilon| = 0\): Take \(\{f_n\} \subseteq C_c^\infty\), \(f_n \to f\) in \(L^1(\mathbb{R}^d)\). By the triangle inequality:
    \begin{align*}
      |f(y) - f(x)| \le |f(y) - f_n(y)| + |f_n(y) - f_n(x)| + |f_n(x) - f(x)|
    \end{align*}
    So we get 
    \begin{align*}
      &\fint_{B(x,r)} |f(y) - f(x)| \, dy \\
      \quad &\le \fint_{B(x,r)}|f(y) - f_n(y)| \, dy + \fint_{B(x, r)} |f_n(y) - f_n(x)| + |f_n(x) - f(x)| \\
      \Rightarrow \quad \limsup_{r \to 0} ... &\le \limsup_{r \to 0} (\dots) +0 + |f_n(x) - f(x)|
    \end{align*}
    Thus, for all \(x \in A_\epsilon\), then:
    \begin{align*}
      \limsup_{r \to 0} \fint_{B(x, r)} |f_n(y) - f(y)| \, dy + |f_n(x) - f(x)| > 2 \epsilon
    \end{align*}
    Observation: If \(a, b \ge 0\), \(a + b > 2 \epsilon\) then either \(a > \epsilon\) or \(b > \epsilon\). Therefore \(A_\epsilon \subseteq \left(S_{n, \epsilon} \bigcup \tilde S_{n, \epsilon}\right)\), where
    \begin{align*}
      S_{n, \epsilon} &= \{x \mid |f_n(x) - f(x)| > \epsilon\} \\
      \tilde S_{n, \epsilon} &= \{x \mid \limsup_{r \to 0} \fint_{B(x,r)} |f_n(y) - f(y)| \, dy > \epsilon\}
    \end{align*}
    Consequently: \(|A_\epsilon| \le |S_{n, \epsilon}| + |\tilde S_{n, \epsilon}|\) for all \(n \ge 1\). By the Markov / Chebyshev inequality:
    \begin{align*}
      |S_{n, \epsilon}| 
      &\le \int_{S_{n, \epsilon}} \frac{|f_n(x) - f(x)|}{\epsilon} \, dx
      = \int_{\mathbb{R}^d} \frac{|f_n(x) - f(x)|}{\epsilon} \, dx
      = \frac{\|f_n - f\|_{L^1}}{\epsilon}
    \end{align*}
    We want to prove a simpler bound for \(\tilde S_{n \epsilon}\). For all \(x \in \tilde S_{n \epsilon}\): 
    \begin{align*}
      \limsup_{r \to 0} \fint_{B(x, r)} |f_n(x) - f(y)| \, dy > \epsilon
    \end{align*}
    So there is a \(r_x \in (0,1)\) s.t.
    \[\fint_{B(x,r_x) = B_x} |f_n(y) - f(y)| \, dy > \epsilon\]
    Thus \(\tilde S_{n \epsilon} \subseteq \left(\bigcup_{x \in \tilde S_{n, \epsilon}} B_x\right)\). 
    
    \begin{lem}[Vitali Covering]
      If \(F\) is a collection of balls in \(\mathbb{R}^d\) with bounded radius, then there exists a sub-collection \(G \subseteq F\) s.t.
      \begin{itemize}
        \item \(G\) has disjoint balls
        \item \(\bigcup_{B \in F} B \subseteq \bigcup_{B \in G} 5B, 5B(x,r) = B(x, 5r)\)
      \end{itemize}
    \end{lem}

    \begin{rem}
      The condition of the boundedness of the radius is necessary. Otherwise, consider \(\{B(0,n)\}_{n=1}^\infty\)
    \end{rem}

    Here consider \(F = \{B_x\}_{x \in \tilde S_{n \epsilon}}\). With the vitali covering leamm there is a \(G \subseteq F\) s.t. \(G \) contains disjoint balls and:
    \[\tilde S_{n, \epsilon} \subseteq \bigcup_{B \in F} B \subseteq \bigcup_{B \in G} 5 B\]
    So we get
    \[|\tilde S_{n, \epsilon}| \le |\bigcup_{B \in G} 5B| \le \sum_{B \in G} |5B| = \sum_{B \in G} 5^d|B|\]
    On the other hand, for all \(B \in G \subseteq F\): 
    \begin{align*}
      \fint_B |f_n(y) - f(y)| \, dy > \epsilon \Rightarrow \int_B |f_n - f| > \epsilon|B|
    \end{align*}
    This implies:
    \begin{align*}
      \sup_{B \in G} \int_B |f_n - f| > \epsilon \sum_{B \in G} |B|
    \end{align*}
    Since balls in \(G\) are disjoint:
    \begin{align*}
      \int_{\mathbb{R}^d} \ge \int_{\bigcup_{B \in G}} |f_n - f| \, dy 
      > \epsilon \sum_{B \in G} |B|
      \ge \frac{\epsilon}{5^d} |\tilde S_{n, \epsilon}|
    \end{align*}
    So 
    \[|\tilde S_{n \epsilon}| \le \frac{5^d}{\epsilon} \|f_n - f\|_{L^1}\]
    In summary: 
    \[|A_\epsilon| \le |S_{n, \epsilon}| + |\tilde S_{n, \epsilon}| \le \frac{5^d + 1}{\epsilon} \|f_n - f\|_{L^1} \to 0\]
    as \(n \to \infty\). So \(|A_\epsilon| = 0\) for all \(\epsilon > 0\)
  \end{proof}
  
  \begin{rem}
    \begin{enumerate}
      \item The proof can be done by using the Besicovitch covering lemma: For all \(E \subseteq \mathbb{R}^d\) s.t. \(E\) is bounded. Let \(F = \) collection of balls s.t. for all \(x \in E\) there is a \(B_x \in F\) s.t. \(x\) is the center of \(B_x\). There is a sub-collection \(G \subseteq F\) s.t.
      \begin{itemize}
        \item \(E \subseteq \bigcup_{B \in G} B\)
        \item Any point in \(E\) belongs to at most \(C_d\) balls in \(C_T\) (\(C_d\) depends only on \(\mathbb{R}^d\)), i.e. 
        \begin{align*}
          \mathbb{1}_E(x) \le \sum_{B \in G} \mathbb{1}_B(x) \le C_d \mathbb{1}_E(x) \forall x
        \end{align*}
      \end{itemize}
      \item By a simpler argument we can prove the weak \(L^1\)-estimate:
      \[\{x \mid f^\star(x) > \epsilon\} \le \frac{c_d}{\epsilon} \|f\|_{L^1(\mathbb{R}^d)}\] (Hardy-Littlewood maximal function)
    \end{enumerate}
  \end{rem}

  \begin{ex}[E 3.2]
    Let \(1 \le p, q, r \le 2\), \(\frac{1}{p} + \frac{1}{q} = 1 + \frac{1}{r}\). Recall that if \(f \in L^p(\mathbb{R}^d)\), \(g \in L^q(\mathbb{R}^d)\), then \(f \star g \in L^r(\mathbb{R}^d)\) by Young's Inequality, and its Fourier transform is well-defined by the Hausdroff-Young inequality. Prove that 
    \[\widehat{f \star g}(k) = \hat f(k) \hat g(k) \quad \forall k \in \mathbb{R}^d\]

    Hint: In the lecture we already discussed the case \(f, g \in C_c(\mathbb{R}^d)\).
  \end{ex}

  \begin{proof}[Solution] \
    \begin{enumerate}[label=Step \arabic*)]
      \item \(f, g \in C_c^\infty(\mathbb{R}^d)\) (Fubini)
      \item \(f \in L^p, g \in L^q\), find \(f_n, g_n \in C_c^\infty\) s.t. \(f_n \to f\) in \(L^p\), \(g_n \to g\) in \(L^q\). \(\widehat{f_n \star g_n} = \hat f_n \hat g_n\) pointwise a.e. we have
      \begin{align*}
        \text{(Hausdorff-Young)} \quad &\|\widehat{f \star g} - \widehat{f_n \star g_n}\|_{L^{r'}} \\
        &\le \|\widehat{f \star g} - \widehat{f_n \star g_n}\|_{L^r} \\
        &= \|(f - f_n) \star g_n + f_n \star (g_n - g) \|_{L^r} \\
        &\le \| (f-f_n) \star g_n \|_{L^r} + \| f_n \star (g_n - g)\|_{L^r} \\
        \text{(Young)} &\le \|f - f_n\|_{L^p} \|g_n\| + \|f_n\|_{L^p} \|g_n - g\|_{L^p} \xrightarrow{n \to \infty} 0
      \end{align*}
      Moreover:
      \begin{align*}
        \|\hat f_n \hat g_n - \hat f \hat g \|_{L^{r'}} 
        &= \|(\hat f_n \hat f)\hat g_n + \hat f (\hat g_n - \hat g) \|_{L^{r'}} \\
        \text{(Hölder)} \quad &\le \|\hat f_n - \hat f \|_{L^{p'}} \| \hat g_n \|_{L^{q'}} + \| \hat f \|_{L^{q'}} \\
        \text{(Hausdorff-Young (\ref{hausdorff-young}))} \quad &\le \| f_n - f \|_{L^p}\|g_n\|_{L^q} + \|f\|_{L^p} \|g_n - g\|_{L^p} \xrightarrow{n \to \infty} 0
      \end{align*}
      So \(\hat f_n \hat g_n \to \hat f \hat g \text{ in } L^{r'}\)
      \(\widehat{f \star g} = \hat f \hat g\) in \(L^{r'}\)
      \(\frac{1}{r'} = \frac{1}{p'} + \frac{1}{q'}\) \qedhere
    \end{enumerate}
  \end{proof}

  
  \begin{ex}[E 3.3]
    \(f \in C_c^\infty(\mathbb{R}^d)\). Prove \(|\hat f(k)| \le \frac{C_N}{(1 + |k|)^N}\)
  \end{ex}

  \begin{proof}[Solution]
    Since \(f \in C_c^\infty\) we have that \(D^\alpha f \in C_c^\infty\).
    Recall
    \begin{align*}
      \widehat{D^\alpha f}(k) &= (-2 \pi ik)^\alpha \hat f (k)
    \end{align*}
    For example
    \begin{align*}
      \widehat{- \Delta f}(k) &= |2 \pi i k|^2 \hat f (k) \\
      (\text{Induction}) \leadsto \widehat{(-\Delta)^N f}(k) &= |2 \pi k|^{2N} \hat f (k)
    \end{align*}
    So we can conclude
    \[ \hat f(k) = \frac{\widehat{(-\Delta)^N}f(k)}{|2 \pi k|^{2N}} \forall k \in \mathbb{R}^d\]
    \begin{enumerate}
      \item \(f \in C_c^\infty \subseteq L^1(\mathbb{R}^d) \Rightarrow \hat f \in L^\infty\)
      \item \((-\Delta)^N f \in C_c^\infty \subseteq L^1(\mathbb{R}^d) \Rightarrow \widehat{(-\Delta)^N f} \in L^\infty\)
    \end{enumerate}
    Conclusion: \(\hat f(k) \le \begin{cases}
      C &\forall k \\ \frac{C_N}{|k|^{2N}} &\forall k
    \end{cases}\)
    So \(\hat f(k) \le \frac{C_N}{(1+|k|)^N}\)
  \end{proof}

  \begin{ex}[E 3.4]
    
  \end{ex}

  \begin{proof}
    Siehe Goodnotes
  \end{proof}
  
  \begin{ex}[Bonus 3]
    Let \(f \in L^1(\mathbb{R}^d)\) such that
    \[|\hat f(k)| \le \frac{C_N}{(1 + |k|)^N}\]
    for all \(k \in \mathbb{R}^d\), for all \(N \ge 1\). (\(C_N\) is independent of \(k\)). Prove that \(f \in C^\infty(\mathbb{R}^d)\)
  \end{ex}
  (\(f \in C^\infty\)) i.e. \(\exists \tilde f \in C^\infty\) s.t. \(f = \tilde f\) a.e.

  \begin{proof}[My Solution]
    First we regard for \(N \in \mathbb{N}\) and \(|k| \ge 1\):
    \begin{align*}
      \int_{\mathbb{R}^d} \frac{1}{(1 + |k|)^N} \, dk 
      &= \int_0^\infty \left(\int_{\partial B(0, r)} \frac{1}{(1+r)^N} \, dS(y)\right) \, dr \\
      &= \int_0^\infty \frac{1}{(1+r)^N} |\partial B(0, r)| \, dr \\
      &\le \int_1^\infty \frac{1}{r^N} \underbrace{|\partial B(0,r)|}_{c r^{d-1}} \, dr \quad \text{for a } c \in \mathbb{R} \\
      &= c \int_1^\infty \frac{1}{r^{N-d+1}} \, dr
    \end{align*}
    From Ana I we know that \(\int_1^\infty \frac{1}{r^{N-d+1}} \, dr < \infty\) is equivalent to \(N-d+1 > 1\) \(\Leftrightarrow\) \(N > d\), so for \(N > d\) we have 
    \[\frac{1}{(1+|k|)^N} \in L^1(\mathbb{R}^d).\]
    Now let \(\alpha \in \mathbb{N}^d\), then we have
    \begin{align*}
      k^\alpha 
      = k_1^{\alpha_1} \cdots k_d^{\alpha_d}
      = |k|^{\alpha_1} \cdots |k|^{\alpha_d}
      = |k|^{\alpha_1 + \cdots + \alpha_d}
      = |k|^{|\alpha|}
      = (1 + |k|)^{|\alpha|}.
    \end{align*}
    By assumption we have for all \(N \ge 1\):
    \begin{align*}
      k^\alpha \hat f(k) 
      \le k^\alpha \frac{C_n}{(1 + |k|)^N}
      \le (1 + |k|)^{|\alpha|} \frac{C_n}{(1 + |k|)^N}
      = \frac{C_n}{(1 + |k|)^{N - |\alpha|}}
    \end{align*}
    If we set \(N\) such that \(N - |\alpha| > d\), for example \(N = d + |\alpha| + 1\), then we can conclude that \(k^\alpha \hat f \in L^1(\mathbb{R}^d)\). This implies \(\widehat{k^\alpha \hat f} \in L^\infty(\mathbb{R}^d)\), so
    \begin{align*}
      \widehat{k^\alpha \hat f} (k)
      = \partial^\alpha \widehat{\hat f}(k)
      = \partial^\alpha (\hat f)^\lor (-k)
      = \partial^\alpha f(-k) \in L^\infty(\mathbb{R}^d).
    \end{align*}
    This implies \(f \in C^\infty(\mathbb{R}^d)\).
  \end{proof}
  
  \begin{thm}
    Take \(T \in D'(\mathbb{R}), f \in C_c^\infty(\mathbb{R}^d) = D(\mathbb{R}^d)\), \(f_y(x) = f(x-y)\)
    \begin{enumerate}[label=\alph*)]
      \item \(y \mapsto T(f_y) \in C^\infty(\mathbb{R}^d)\) and \(D_y^\alpha(T(f_y)) = (D^\alpha T) (f_y) = (-1)^{|\alpha|} T(D_x^\alpha f_y)\)
      \item \(\forall g \in L^1(\mathbb{R}^d)\) and compactly supported 
      \[\int_{\mathbb{R}^d} g(y) T(f_y) \, dy = T(\underbrace{f \star g}_{\in C_c^\infty})\]
    \end{enumerate}
  \end{thm}

  \begin{proof}
    \begin{enumerate}[label=\alph*)]
      \item \(y \mapsto T(f_y)\) is continuous since \(y_n \to y\) in \(\mathbb{R}^d\), then 
      \(f_{y_n} \to f_y\) implies \(T(f_{y_n}) \to T(f_y)\). Let's check that \(y \mapsto T(f_y) \in C^1\):
      \begin{align*}
        \lim_{h \to 0} \frac{T(f_{y-he_i})-T(f_y)}{h}
        &= \lim_{h \to 0} T \left(\frac{f_{y-he_i} - f_y}{h}\right)
      \end{align*}
        We have \(\frac{f_{y - h e_i} - f_y}{h} \xrightarrow{h \to 0} (\partial_i f)_y\) in \(D(\mathbb{R}^d)\)
      \begin{itemize}
        \item \(\exists K\) compact set such that \(\supp(f_{y - e_i} - f_y)\), \(\supp \partial_i f \subseteq K\) as \(|h|\) small.
        \item \(\begin{aligned}[t]
          &\frac{f_{y - h e_i}(x)- f_y(x)}{h} - (\partial_i f)_y(x) \\
          &\quad = \frac{f(x-y+he_i) - f(x-y)}{h} - (\partial_i f)(x-y) \\
          &\left| \int_0^1 \partial_i f(x-y+the_i) \, dt - \partial_i f(x-y) \right| \xrightarrow{h \to 0} 0 \text{ uniformly in } x
        \end{aligned}\) \\
        Similary:
        \begin{align*}
          &\left| D_x^\alpha \left(\frac{f(x-y+he_i) - f(x-y)}{h} - (\partial_i f)(x-y)\right) \right| \\
          &= \left| \frac{D^\alpha f(x-y+he_i) - D^\alpha f(x-y)}{h} - \partial_i(D^\alpha f)(x-y) \right| \xrightarrow{h \to 0} 0 
        \end{align*}
        uniformly in \(x\). Conclude: 
        \begin{align*}
          \lim_{h \to 0} \frac{T(f_{y - he_i}) - T(f_y)}{h} \xrightarrow{h \to 0} T((\partial_i f)_y) \in C(\mathbb{R}^d)
        \end{align*}
        So we geht that \(y \mapsto T(f_y) \in C^1\) and \(- \partial_{y_i} T(f_y) = T((\partial_i f)_y)\)
      \end{itemize}
      By induction: 
      \begin{align*}
        D_y^\alpha T(f_y) = (-1)^{|\alpha|} T((D^\alpha f)_y) = (D^\alpha T)(f_y) \quad \forall \alpha \in \mathbb{N}^d
      \end{align*}
      \item Heuristic: \(T = T(x)\)
      \begin{align*}
        \int_{\mathbb{R}^d} g(y) T(f_y) \, dy 
        &= \int_{\mathbb{R}^d} g(y) \left(\int_{\mathbb{R}^d}T(x) f(x-y) \, dx \right)\, dy \\
        &= \int_{\mathbb{R}^d} T(x) \left(\int_{\mathbb{R}^d} g(y) f(x-y) \, dy \right) \, dx \\
        &= \int_{\mathbb{R}^d} T(x) (f \star g)(x) \, dx = T(f \star g)
      \end{align*}
      \begin{enumerate}[label=Step \arabic*:]
        \item \(g \in C_c^\infty(\mathbb{R}^d)\) \begin{align*}
          (\text{Rieman Sum}) \quad \int_{\mathbb{R}^d} g(y) T(f_y) \, dy 
          &= \lim_{\Delta_N \to 0} \Delta_N \sum_{j=1}^N g(y_j) T(f_{y_j}) \\
          &= \lim_{\Delta_N \to 0} T\left(\Delta_N \sum_{j=1}^N g(y_j) f_{y_j}\right) \\
          &= T(f\star g)
        \end{align*}
        because
        \begin{align*}
          \lim_{\Delta_N \to 0} \Delta_N \sum_{j=1}^N g(y_j) f_{y_j} (x) \to (f\star g)(x) \text{ in } D(\mathbb{R}^d) \\
          \lim_{\Delta_N \to 0} \Delta_N \sum_{j=1}^N g(y_j) f(x-y_j) \xrightarrow{\text{Riemann}} \int_{\mathbb{R}^d} g(y) f(x-y) \, dy = (f \star g)(x)
        \end{align*}
        Proof of: 
        \begin{align*}
          \lim_{\Delta_N \to 0} \Delta_N \sum_{j=1}^N g(y_j) f(x-y_j) \to (f\star g)(x) \text{ in } D(\mathbb{R}^d)
        \end{align*}
        \begin{enumerate}[label=\arabic*)]
          \item Since \(f, g \in C_c^\infty\) we have \(f \star g \in C_c^\infty\). And we have \[x \mapsto \Delta_N \sum_{j=1}^N g(y_j) f(x-y_j) \in C^\infty\] since \(f \in C^\infty\) supported in \((\supp g + \supp f)\). So all functions are \(C_c^\infty\) and supported in \((\supp g + \supp f)\).
          \item 
          \begin{align*}
            \left| \lim_{\Delta_N \to 0} \Delta_N \sum_{j=1}^N g(y_j) f(x-y_j) - \int_{\mathbb{R}^d} g(y) f(x-y) \, dy \right| \xrightarrow{\Delta_N \to 0} 0
          \end{align*}
          uniformly in \(x\). (Result from the Riemann-Sum)
          \item \begin{align*}
            &\left| D_x^\alpha(\Delta_N \sum_{j=1}^N g(y_j) f(x-y) - (f \star g)(x)) \right| \\
            &= \left| \Delta_N \sum_{j=1}^N g(y_j) D^\alpha f(x-y) - (D^\alpha f)\star g(x) \right| \xrightarrow{\Delta_N \to 0} 0
          \end{align*}
          uniformly in \(x\) for all \(\alpha\).
        \end{enumerate}
        \item Take \(g \in L^1(\mathbb{R}^d)\) and compactly supported. Then \(\exists \{g_n\} \subseteq C_c^\infty(\mathbb{R}^d)\), \(\supp g_n \subseteq \supp g + B(0,1)\) such that \(g_n \to g\) in \(L^1(\mathbb{R}^d)\). By Step 1: 
        \begin{align*}
          \int_{\mathbb{R}^d} g_n(y) T(f_y) \, dy = T(g_n \star f)
        \end{align*}
        Take \(n \to \infty\):
        \begin{align*}
          \int_{\mathbb{R}^d} g_n(y) T(f_y) \, dy \to \int_{\mathbb{R}^d} g(y) T(f_y) \, dy
        \end{align*}
        since \(g_n \to g\) in \(L^1\) compactly supported and \(y \mapsto T(f_y) \in C^\infty \subseteq L^\infty(K)\). Moreover (exercise):
        \[\underbrace{g_n \star f}_{\in C_c^\infty} \to g \star f \quad \text{ in } D(\mathbb{R}^d)\]
        So \(T(g_n \star f) \xrightarrow{n \to \infty} T(g \star f)\).
        Finally we optain:
        \[\int g(y) T(f_n) \, dy = T(g \star f)\qedhere\] 
      \end{enumerate}
  \end{enumerate}
  \end{proof}
  
  \begin{thm}
    Let \(\Omega \subseteq \mathbb{R}^d\) be open. Let \(T \in D'(\Omega)\) and \(f \in C_c^\infty(\Omega)\). Denote
    \[\Omega_f = \{y \in \mathbb{R}^d \mid \supp f_y = y + \supp f \subseteq \Omega\}\]
    \begin{enumerate}[label=\alph*)]
      \item \(y \mapsto T(f_y) \in C^\infty(\Omega_f)\) and \(D_y^\alpha(T(f_y)) = (D^\alpha T)(f_y) = (-1)^{|\alpha|}T((D^\alpha f)_y)\)
      \item For all \(g \in L^1(\Omega_g)\) compactly supported in \(\Omega_f\) and it holds:
      \[\int_\Omega g(y) T(f_y) \, dy = T(f \star g).\]
    \end{enumerate}
  \end{thm}
  
  \begin{thm}
    Let \(T \in D'(\Omega)\) s.t. \(\nabla T = 0\) in \(D'(\Omega)\). Then: \(T = const.\) in \(\Omega\).
  \end{thm}

  \begin{proof}
    \((\Omega = \mathbb{R}^d)\) for all \(f \in C_c^\infty\), \(y \mapsto T(f_y) \in C^\infty(\mathbb{R}^d)\) and \(\partial_{y_i} T(f_y) = (\partial_j T)(f_y) = 0\) for all \(i = 1, \dots, d\). Then by the result of the theorem for \(C^\infty\) functions,
    \(y \mapsto T(f_y) = const\) independent of \(y\). Consequently:
    \begin{align*}
      T(f_y) = T(f_0) = T(f) \quad \forall y \in \mathbb{R}^d \ \forall f \in C_c^\infty(\mathbb{R}^d)
    \end{align*}
    For any \(g \in C^\infty(\mathbb{R}^d)\):
    \begin{align*}
      \left(\int_{\mathbb{R}^d} g \, dy\right) T(f)
      &= \int_{\mathbb{R}^d} g(y) T(f_y) \, dy
      = T(f \star g)
      = T(g \star f)
      = \left(\int_{\mathbb{R}^d} f \, dy\right) T(g)
    \end{align*}
    So \(\frac{T(f)}{\int_{\mathbb{R}^d}f}\) is independent of \(f\) (as soon as \(\int f \ne 0\)). So we get that \(T(f) = const \int_{\mathbb{R}^d} f\), where const is independent of \(f\).
  \end{proof}
  
  \begin{rem}
    If \(u \in C^1(\mathbb{R}^d)\), then:
      \begin{align*}
        u(x+y) - u(x) 
        &= \int_0^1 \sum_{j=1}^d y_j (\partial_j u)(x + ty_j) \, dt
        = \int_0^1 y \nabla u(x+ty) \, dt
      \end{align*}
      So we get that if \(\nabla u = 0\), then \(u(x+y) - u(x) = 0\) for all \(x,y\), so \(u = const.\)
  \end{rem}

  \begin{thm}[Taylor expansion for distributions]
    Let \(
      T \in D'(\mathbb{R}^d)\) and \(f \in C_c^\infty(\mathbb{R}^d)\). Then \(y \mapsto T(f_y) \in C^\infty\)
       and 
    \[T(f_y) - T(f) = \int_0^1 \sum_{j=1}^d y_j(\partial_j T) (f_{ty}) \, dt.\]
    In particular, if \(g \in L_{loc}^1\) and \(\nabla g \in L_{loc}^1\), then \(\forall y \in \mathbb{R}^d\):
    \[g (x+y) - g(x) = \int_0^1 g(x + ty) y \, dt\]
    for a.e. \(x \in \mathbb{R}^d\).
  \end{thm}

  \begin{proof}
    \(y \mapsto T(f_y)\) is \(C^\infty\) and \(\frac{d}{dt} [T(f_{ty})] = (\nabla T)(f_{ty}) y\) So we get
    \begin{align*}
      T(f_y) - T(f) 
      &= \int_0^1 \frac{d}{dt}(T(f_{ty})) \, dt \\
      &= \int_0^1 (\nabla T)(f_{ty}) y \, dt \\
      &= \int_0^1 \sum_{j=1}^d (\partial_j T)(f_{ty}) y_j \, dt \qedhere
    \end{align*}
  \end{proof}

  
  \begin{cor}
    Let \(g \in L_{loc}^1(\mathbb{R}^d)\) s.t. \(\partial_j g\in L_{loc}^1(\mathbb{R}^d)\) for all \(j = 1, 2, \dots, d\) (i.e. \(g \in W_{loc}^{1,1}(\mathbb{R}^d)\)). Then for all \(y \in \mathbb{R}^d\):
    \begin{align*}
      g(x+y) - g(x) &= \int_0^1 y \cdot \nabla g(x + ty) \, dt \\
      &= \int_0^1 \sum_{j=1}^d y_j \partial g(x+ty) \, dt
    \end{align*}
    for a.e. \(x\).
  \end{cor}

  \begin{proof}
    For all \(f \in C_c^\infty\) we have 
    \begin{align*}
      \int_{\mathbb{R}^d} f(x) [g(x+y) - g(x)] \, dx
      &= \int_{\mathbb{R}^d} g(x) [f(x-y) - f(x)] \, dx \\
      &= g(f_y) - g(f) \\
      &= \int_0^1 \sum_{j=1}^d y_j (\partial_j g)(f_{ty}) \, dt \\
      &= \int_0^1 \sum_{j=1}^d y_j \int_{\mathbb{R}^d} \sum_{j=1}^d y_j \left[\int_{\mathbb{R}^d} (\partial_j g)(x) f_{ty}(x) \, dx\right] \\
      &= \int_0^1 \sum_{j=1}^d y_i \left[\int_{\mathbb{R}^d}(\partial_j g)(x+ty) f(x) \, dx\right] \, dt \\
      &= \int_{\mathbb{R}^d} f(x) \left[\int_0^1 \sum_{j=1}^d y_j \partial_j g(x+ty) \, dt \right] \, dx
    \end{align*}
    For all \(\phi \in C_c^\infty\): \( = g(x+y) - g(x)\) a.e. \(x \in \mathbb{R}^d\).
  \end{proof}


  \begin{rem}
    If \(T \in D'(\Omega)\), \(\Omega \subseteq \mathbb{R}^d\) open, if \(y \nabla T = 0\), then \(T = const\).
  \end{rem}

  \begin{thm}[Equivalence of the classical and distributional derivatives]
      Let \(\Omega \subseteq \mathbb{R}^d\). Then the following are equivalent:
      \begin{enumerate}
        \item \(T \in D'(\Omega)\) s.t. \(\partial_{x_i} T = g_i \in C(\Omega)\) for all \(i = 1, \dots, d\).
        \item \(T = f \in C^1(\Omega)\) and \(g_i = \partial_{x_i} f\)
      \end{enumerate}
  \end{thm}

  \begin{proof} \
    \begin{itemize}
      \item [(2) \(\Rightarrow\) (1):] If \(T = f \in C^1(\Omega)\), then: \(\partial_{x_i} f \in C(\Omega)\).
      \begin{align*}
        \partial_{x_i} T(\phi) &= - T(\partial_{x_i} \phi) 
        = - \int_\Omega f(\partial_{x_i} \phi) \int_\Omega (\partial_{x_i} f) \phi
      \end{align*}
      for all \(\phi \in D(\Omega)\), so \(\partial_{x_i} T = \partial_{x_i} f\).
      \item [(1) \(\Rightarrow\) (2):] Why is \(T = f\) with \(f\) continous? As \(\partial_{x_i} f = g_i\): 
      \begin{align*}
        f(x+y) - f(x) 
        &= \int_0^1 \nabla f(x+ty) y \, dt
        = \int_0^1 \sum_{i=1}^d g_i(x + ty) y_i \, dt
      \end{align*}
      So we get
      \begin{align*}
        f(y) = f(0) + \int_0^1 \sum_{i=1}^d g_i(ty) g_i \, dt.
      \end{align*}
      We expect that \(f \in C^1\) and \(\partial_{x_i} f = g_i\). But this is not trivial to prove.
    \end{itemize}
    \begin{align*}
      \frac{f(y + he_i) - f(y)}{h} 
      &= \int_0^1 \sum_{i=1}^d [g_i(ty + the_i)(y_i + h \delta_{ij})] \, dt \\
      &= \int_0^1 g_i(ty + the_i) \, dt + \int_0^1 \sum_{j \ne i} \frac{[g_i(ty + the_i) - g_i(ty)]}{h} y_i \, dt \\
      &\xrightarrow{h \to 0} \int_0^1 g_i(ty) \, dt  + \text{ is difficult ...}
    \end{align*}
    Lets take \(\phi \in C_c^\infty\), then:
    \begin{align*}
      T(\phi_{y}) - T(\phi)
      &= \int_0^1 \underbrace{\nabla T}_{(g_i)_{i=1}^d} (\phi_{ty}) y \, dt \\
      &= \int_0^1 \sum_{i=1}^d \left(\int_\Omega g_i(x) \smash{\underbrace{\phi_{ty} }_{\mathclap{= \phi(x - ty)}}} \, dx \right) \, dt \\
      &= \int_{\mathbb{R}^d} \left(\sum_{i=1}^d \int_0^1 g_i(x) \phi(x-ty) y_i \ dt\right) \, dx \\
      &= \int_{\mathbb{R}^d} \left(\sum_{i=1}^d \int_0^1 g_i(x + ty) \phi(x) y_i \, dt\right) \, dx \\
      &= \int_{\mathbb{R}^d} \left(\sum_i \int_0^1 g_i(x + ty) y_i \, dt \right) \phi(x) \, dx
    \end{align*}
    Integrating against \(\psi(y)\) with \(\psi \in C_c^\infty\):
    \begin{align*}
      &\int_{\mathbb{R}^d} T(\phi_y) \psi(y) \, dy - T(\phi) \int_{\mathbb{R}^d} \psi(y) \, dy  \\
      &\quad = \int_{\mathbb{R}^d} \left(\int_{\mathbb{R}^d} \sum_{i} \int_0^1 g_i (x + ty) y_i \psi(y) \, dt \, dy \right) \psi(x) \, dx
    \end{align*}
    \begin{align*}
      &\Rightarrow T(\phi \star \psi) - T(\phi)\int \psi = \dots \\
      &\Rightarrow \int_{\mathbb{R}^d} T(\psi_y) \phi(y) \, dy - T(\phi) \int \psi = \dots
    \end{align*}
    Take \(\psi \in C_c^\infty(\mathbb{R}^d)\) such that \(\int \psi = 1\). Then:
    \begin{align*}
      T(\phi)
      &= \int_{\mathbb{R}^d} \underbrace{T(\psi_x) - \left(\int_{\mathbb{R}^d} \sum_{i=1}^d \int_0^1 g_i(x + ty) y_i \psi(y) \, dt \, dy\right)}_{\smash{f(x)}} \phi(x) \, dx
    \end{align*}
    for all \(\phi \in C_c^\infty\), so \(T = f \in C(\Omega)\). Thus \(T = f \in C(\Omega)\) and \(\partial_{x_i} T = g_i \in C(\Omega)\). Then we need to prove that \(f \in C^1(\Omega)\) and \(\partial_{x_i} f = g_i\) (classical derivative). Since \(f \in W_{loc}^{1,1}\):
    \begin{align*}
      f(x + y) - f(x)
      &= \int_0^1 \sum_{i=1}^d g_i(x + ty)y_i \, dt \quad \forall x,y
    \end{align*}
    In particular:
    \begin{align*}
      \frac{f(x + h e_i) - f(x)}{h}
      &= \int_0^1 \frac{1}{h} \sum_{i=1}^d g_i (x + the_i) h \delta_{ij} \, dt \\
      &= \int_0^1 g_i(x + the_i) \, dt \xrightarrow{h \to 0} g_i(x)
    \end{align*}
    So we get \(\partial_{x_i} f(x) = g_i(x) \in C(\Omega)\) in the classical sense. So \(f \in C^1(\Omega)\).
  \end{proof}

  
  \begin{defn}[Sobolev Spaces]
    Let \(\Omega \subseteq \mathbb{R}^d\) be open. We define for \(1 \le p \le \infty\):
    \begin{align*}
      W^{1, p}(\Omega)
      &= \{f \in L^p(\Omega) \mid \partial_{x_i} f \in L^p(\Omega)\ \forall i=1, \dots, d \} \\
      W^{k, p}(\Omega)
      &= \{f \in L^p(\Omega) \mid D^\alpha f \in L^p(\Omega) \ \forall |\alpha|\le k \} \\
      W^{k, p}_{loc}(\Omega)
      &= \{f \in L_{loc}^p(\Omega) \mid D^\alpha f \in L_{loc}^p(\Omega) \ \forall |\alpha|\le k \}
    \end{align*}
  \end{defn}

  
  \begin{thm}[Approximation of \(W_{loc}^{1,p}(\Omega)\) by \(C^\infty(\Omega)\)]
    Let \(\Omega \subseteq \mathbb{R}^d\) be open, let \(f \in W_{loc}^{1,p}(\Omega)\). Then there exists \(\{f_n\} \subseteq C^\infty(\Omega)\) such that \(f_n \to f \) in \(W_{loc}^{1,p}(\Omega)\), i.e. for all \(K \subseteq \Omega\) compact: \(\|f_n - f\|_{L^p(K)} + \sum_{i=1}^d \| \partial_{x_i}(f_n - f)\|_{L^p(K)} \to 0\) .
  \end{thm}

  \begin{proof}
    Case \(\Omega = \mathbb{R}^d\): Take \(g \in C_c^\infty\), \(\int g = 1\), \(g_\epsilon(x) = \epsilon^{-d} g(\epsilon^{-1}x)\). Then \(g_\epsilon \star f \in C_c^\infty\). Since \(f \in L_{loc}^p(\Omega)\) we have \(g_\epsilon \star f \to f\) in \(L_{loc}^p\) as \(\epsilon \to 0\). Moreover \(\partial_{x_i} (g_\epsilon \star f) = (g_\epsilon \star \partial_{x_i} f)\xrightarrow{\epsilon \to 0} \partial_{x_i} f\) in \(L_{loc}^p\). Then we can take \(f_n = g_{\frac{1}{n} \star f}\).
  \end{proof}

  \begin{rem}
    In general, if we want to compute the distributional derivative \(D^\alpha f\), then we can find \(f_n \to f\) in \(D'(\Omega)\) and compute \(D^\alpha f\). Then \(D^\alpha f_n \to D^\alpha f\) in \(D^\alpha (\Omega)\). As an example we can compute \(\nabla |f|\) with \(f \in W_{loc}^{1,p}(\Omega)\).
    \begin{align*}
      (\nabla |f|)(x)
      &= \begin{cases}
        \nabla f(x) & f(x) > 0 \\
        - \nabla f(x) & f(x) < 0 \\
        0 & f(x) = 0
      \end{cases}
    \end{align*}
  \end{rem}

  
  \begin{thm}[Chain Rule]
    Let \(G \in C^1(\mathbb{R}^d)\) with \(|\nabla G|\) is bounded. Let \(f = (f_i)_{i=1}^d \subseteq W_{loc}^{1,p}(\Omega)\). Then \(x \mapsto G(f(x)) \in W_{loc}^{1,p}(\Omega)\) and
    \begin{align*}
      \partial_{x_i} G(f)
      &= \sum_{k=1}^d (\partial_k G)(f) \cdot \partial_{x_i} f_k \quad \text{ in } D'(\Omega)
    \end{align*}
    Moreover, if \(G(0) \in L^p(\Omega)\) (i.e. either \(|\Omega| < \infty\) or \(G(0) = 0\)), then if \(f = (f_i)_{i=1}^d \subseteq W^{1,p}(\Omega)\), then \(G(f) \in W^{1,p}(\Omega)\).
  \end{thm}

  \begin{proof}
    Since \(G \in C^1\) we have that \(G\) is bounded in any compact set. Moreover \(\|\nabla G\|_{L^\infty} < \infty\) implies:
    \[|G(f) - G(0)| \le \|\nabla G\|_{L^\infty} |f| \in L^p_{loc}\]
  
    So \(G(f) \in L_{loc}^p\). Let us compute \(\partial_{x_i} G(f)\). Let \(\{f^{(n)}\}_{n=1}^\infty \subseteq C^\infty\) such that \(f^{(n)} \to f\) in \(W_{loc}^{1,p}\), then: 
    \begin{align*}
      |G(f(^n)) - G(f)|
      \le \|\nabla G\|_{L^\infty} |f^{(n)} - f| \to 0 \text{ in  \(L_{loc}^p\)}
    \end{align*}
    So \(G(f^{(n)}) \to G(f)\) in \(L_{loc}^p\), thus \(\partial_{x_i} G(f^{(n)}) \to \partial_{x_i} G(f)\) in \(D'(\Omega)\). On the other hand, by the standard Chain-Rule for \(C^1\)-functions:
    \begin{align*}
      \partial_{x_i} G(f^{(k)})
      &= \sum_{k=1}^d \underbrace{\partial_k G(f^{(k)})}_{\text{b.d.} \to \partial_k G(f)} \underbrace{\partial_i f_k^{(n)}}_{\to \partial_i f_k \text{ in } L^p(\Omega)} \\
      &\to \sum_{k=1}^d \partial_k G(f) \partial_i f_k \text{ in }L_{loc}^p(\Omega)
    \end{align*}
    Thus
    \begin{align*}
      \partial_{x_i} G(f) = \sum_{k=1}^d \underbrace{\partial_k G(f)}_{\in L^\infty} \underbrace{\partial_i f_k}_{\in L_{loc}^p} \in L_{loc}^p
      \partial_{x_i} G(f) = \sum_{k=1}^d \underbrace{\partial_k G(f)}_{\in L^\infty} \underbrace{\partial_i f_k}_{\in L_{loc}^p} \in L_{loc}^p \text{ in } D'(\Omega)
    \end{align*}
    So \(G(f) \in W_{loc}^{1,p}(\Omega)\). Aussume that \(G(0) \in L^p(\Omega)\) (i.e. \(|\Omega| < \infty\) or \(G(0) = 0\)). If \(f \in W^{1,p}(\Omega)\), then \(G(f) \in W^{1,p}(\Omega)\) since
    \begin{align*}
      |G(f) - G(0) | \le \|\nabla G\|_{L^\infty} |f| \in L^p \Rightarrow G(f) \in L^p
    \end{align*}
    and 
    \begin{align*}
      \partial_{x_i} G(f) = \sum_k \underbrace{\partial_k G}_{\in L^\infty} \underbrace{\partial_i f_k}_{\in L^p} \in L^p \Rightarrow G(f) \in W^{1,p}(\Omega)
    \end{align*}
  \end{proof}

  
  \begin{thm}[Derivative of absolute value] Let \(\Omega \subseteq \mathbb{R}^d\) be open. Let \(f \in W^{1,p}(\Omega)\). 
    Then \(|f| \in W^{1,p}(\Omega)\)
    and  if \(f\) is real-valued:
    \begin{align*}
      (\nabla |f|) (x) =
      \begin{cases}
        \nabla f(x) & f(x) > 0 \\
        -\nabla f(x) & f(x) < 0 \\
        0 & f(x) = 0
      \end{cases}
    \end{align*}
  \end{thm}

  \begin{proof}
    Exercise. Hint: Use the Chain-Rule for \(G_\epsilon(x) = \sqrt{\epsilon^2 + x^2} - \epsilon \to |x|\) as  \(\epsilon \to 0\)
  \end{proof}

  \section{Distribution vs. measures}
  Let \(\mu\) be a Borel measure in \(\mathbb{R}^d\) s.t. \(\mu(K) < \infty\) for all compact \(K \subseteq \mathbb{R}^d\). Then define 
  \begin{align*}
    T: \ D(\mathbb{R}^d) &\longrightarrow \mathbb{C} \\
    \phi &\longmapsto \int_{\mathbb{R}^d} \phi(x) \, d\mu(x) \quad \forall \phi \in C_c^\infty
  \end{align*}
  \(\leadsto\) T is a distribution since if \(\phi_n \to \phi\) in \(D(\Omega)\), then
  \begin{align*}
    |T(\phi_n) - T(\phi)| 
    \le \int_{\mathbb{R}^d} |\phi_n - \phi| \, d\mu(x) \le \|\phi_n - \phi\|_{L^\infty} \left(\int_{K} \, d \mu \right) \xrightarrow{n \to \infty} 0
  \end{align*}
  
  
  \begin{eg}
    \(\partial_0\) in \(D'(\mathbb{R}^d)\) is a Borel probability measure.
  \end{eg}  

  
  \begin{thm}[Positive distributions are measures] 
    Let \(\Omega \subseteq \mathbb{R}^d\) be open, let \(T \in D'(\Omega)\). Assume \(T \ge 0\), i.e. \(T(\phi) \ge 0\) for all \(\phi \in D(\Omega)\) satisfying \(\phi(x) \ge 0\) for all \(x\). Then there is a Borel positive measure \(\mu\) on \(\Omega\) such that \(\mu(K) < \infty\) for all \(K \subseteq \Omega\) compact and:
    \[T(\phi) = \int_\Omega \phi(x) \, d\mu (x) \quad \forall \phi \in D^(\Omega)\]
  \end{thm}

  \begin{proof}See Lieb-Loss Analysis. Sketch: If \(O \subseteq \mathbb{R}^d\) is open, then 
    \[\mu(O) = \sup \{T(\phi) \mid \phi \in D(\Omega), 0 \le \phi \le 1, \supp \phi \subseteq O\}\]
    For all \(A \subseteq \Omega\) (not necessarily open),
    \[\mu(A) = \inf \{\mu(O) \mid O \text{ open}, A \subseteq O\}\]
    The mapping \(\mu: 2^\Omega \to [0, \infty]\) is an outer measure, i.e.
    \begin{enumerate}
      \item \(\mu(\emptyset) = 0\)
      \item \(\mu(A) \le \mu(B)\) if \(A \subseteq B\)
      \item \(\mu \left(\bigcup_{i=1}^\infty A_i\right) \le \sum_{i=1}^\infty \mu(A_i)\)
    \end{enumerate}
    From the outer measure we can find a \(\sigma\)-algebra \(\Sigma\) and \(\mu\) is a measure on \(\Omega\) s.t. \(E\) is measurable iff \[\mu(E) = \mu(E \cap A) + \mu(E \cap A^\complement)\].
    So all open sets are measurable, thus outer regularity (by def \(\mu(A) = \inf\{\mu(O) \mid O \text{ open } \supseteq A\)), so inner regularity \(\mu(A) = \sup\{\mu(K) \mid K \text{ compact} \subseteq A\}\). 
  \end{proof}


  \begin{ex}[E 4.1]
    Prove that if \(T_n \to T\) in \(D'(\mathbb{R}^d)\), then \(D^\alpha T_n  \to D^\alpha T\) in \(D^\alpha(\mathbb{R}^d)\) for all \(\alpha \in \mathbb{N}^d\).
  \end{ex}

  \begin{proof}[My Solution]
    See Goodnotes.
  \end{proof}

  \begin{ex}[E 4.2]
    
  \end{ex}

  \begin{proof}[My Solution]
    See Goodnotes.
  \end{proof}

  \begin{ex}[E 4.3]
    \(f \in L^1(\mathbb{R}^d)\), \(\int f = 1\) \(f_\epsilon(x) = \epsilon^{-d} f(\epsilon^{-1}x)\). Then \(f_\epsilon \to \delta_0\) in \(D'(\mathbb{R}^d)\). 
  \end{ex}

  \begin{proof}[My Solution]
    See Goodnotes.
  \end{proof}

  \begin{ex}[E 4.4]
    \(\{f_n\} \subseteq L^1\), \(\supp\) in \(B(0,1), f_n \to f\) in \(L^1\). Prove for all \(g \in C_c^\infty\) that \(f_n \star g \to f \star g\) in \(D(\mathbb{R}^d)\).
  \end{ex}

  \begin{proof}[Solution]
    Since \(f_n \in L^1\), \(\supp B(0,1)\), \(g \in C_c^\infty\) We have \(f_n \star g \in C_c^\infty\), \(\supp(f_n \star g) \subseteq (\supp g) + \overline{B(0,1)} = K\). Since \(f_n \to f\) in \(L^1\) there is a subsequence \(f_{n_k} \to f\) almost everywhere, so \(f \supp\) in \(\overline{B(0,1)}\), so \(f \star g \in C_c^\infty\), \(\supp(f \star g) \subseteq K\). We have:
    \begin{align*}
      |f_n \star g(x) - f \star g(x)| 
      &= \left|\int_{\mathbb{R}^d} (f_n(y)-f(y))g(x-y) \, dy \right| \\
      &\le \int_{\mathbb{R}^d} |f_n(y) - f(y)| |g(x-y)| \, dy \\
      &\le \|g\|_{L^\infty} ||f_n - f\|_{L^1} 
      \xrightarrow{n \to \infty} 0
    \end{align*}
    thus \(\|f_n \star g - f \star g\|_{L^\infty} \to 0\). Similary:
    \begin{align*}
      \|D^\alpha(f_n \star g) - D^\alpha (f\star g)\|_{L^\infty} 
      &= \|f_n \star \underbrace{(D^\alpha g)_{\in C_c^\infty}} - f \star (D^\alpha g)\|_{L^\infty} \xrightarrow{n \to \infty} 0  \forall \alpha
    \end{align*}
    So \(f_n \star g \to f \star g\) in \(D(\mathbb{R}^d)\).
  \end{proof}

  \begin{ex}[E 4.5]
    Compute distributional derivatives \(f', f''\) of \(f(x) = x|x-1|\).
  \end{ex}

  \begin{proof}[Solution]
    We prove \(f'(x) = g(x) \coloneqq \begin{cases}
      2x - 1 & x > 1 \\  1- 2x & x < 1
    \end{cases}\). Take \(\phi \in C_c^\infty(\mathbb{R}^d)\).
    \begin{align*}
      -f'(\phi) 
      &= - \int_{\mathbb{R}^d} f \phi' \, dy \\
      &= - \int_{-\infty}^1 f \phi' \, dy - \int_1^\infty f \phi' \, dy  \\
      &= [f \phi]_{- \infty}^1 - \int_{- \infty}^1 f' \phi \, dy + [f \phi]_1^\infty - \int_1^\infty f' \phi \\
      &= [f \phi]_{- \infty}^1 - \int_{- \infty}^1 f' \phi \, dy + [f \phi]_1^\infty - \int_1^\infty g \phi \\
      &= f(1-) \phi(1) - f(1+)\phi(1) - \int_{\mathbb{R}^d} g \phi \, dy \\
      &= 0  - \int_{\mathbb{R}^d} g \phi \, dy \\
    \end{align*}
    Now we compute \(f'' = g'\). Take \(\phi \in C_c^\infty(\mathbb{R}^d)\):
    \begin{align*}
      -(g')(\phi) 
      &= \int_{\mathbb{R}^d} g\phi' \\
      &= \int_{- \infty}^1 + \int_1^\infty  \\
      &= [g(1-) - g(1+)] \phi(1) - \int_{\infty}^1(-2) \phi - \int_1^\infty 2 \phi \\
      &= - 2 \phi(1) + \int_{-\infty}^\infty [2 \mathbb{1}_{(1, \infty)}(x) - 2 \mathbb{1}_{(1,  \infty)} (x)]\phi(x) \, dx \\
      &= -2 \delta_1(\phi) + \int_{-\infty}^\infty [2 \mathbb{1}_{(1, \infty)}(x) - 2 \mathbb{1}_{(1,  \infty)} (x)]\phi(x) \, dx \\
      \Rightarrow g' &= \underbrace{2 \delta_1}_{\notin L_{loc}^1} - \underbrace{2 \mathbb{1}_{(-\infty, 1)} + 2 \mathbb{1}_{(1, \infty)}}_{\int L_{loc}^1}
    \end{align*}
  \end{proof}

  \begin{ex}[Bonus 4]
    Let \(T \in D'(\mathbb{R}^d)\), \(f \in C_c^\infty(\mathbb{R}^d)\), \(\int_{\mathbb{R}^d} f(y) \, dy = 1\). Let \(f_\epsilon \coloneqq \epsilon^{-d} f\left(\frac{x}{\epsilon}\right)\) for \(\epsilon > 0\). Show that \(T \star f_\epsilon \xrightarrow{\epsilon \to 0} T\).
  \end{ex}

  \begin{proof}[My Solution]
    Let \(\phi \in D(\mathbb{R}^d)\). Now, since \(f\) is compactly supported we can write
    \begin{align*}
      (T \star f_\epsilon)(\phi) 
      &= \int_{\mathbb{R^d}} (T \star f_\epsilon)(x) \phi(x) \, dx \\
      &= \int_{\mathbb{R}^d} \left(\int_{\mathbb{R}^d} T(x-y) f_\epsilon(y) \, dy \right) \phi(x) \, dx \\
      &= \int_{\mathbb{R}^d} \left(\int_{\mathbb{R}^d} \epsilon^{-d} T(x-y) f\left(\frac{y}{\epsilon}\right) \, dy \right) \phi(x) \, dx \\
      \left(z(y) \coloneqq \frac{y}{\epsilon}\right) \quad &= \int_{\mathbb{R}^d} \left( \int_{\mathbb{R}^d} T(x-\epsilon z) f(z) \, dz \right) \phi(x) \, dx \\
      &\xrightarrow{\epsilon \to 0} \int_{\mathbb{R}^d} \left(\int_{\mathbb{R}^d} T(x) f(z) \, dz \right) \phi(x) \, dx \\
      &= \int_{\mathbb{R}^d} T(x)\phi(x) \, dx \underbrace{\int_{\mathbb{R}^d}  f(z) \, dz}_{= 1}
      = T(\phi) \qedhere
    \end{align*}
  \end{proof}

  \chapter{Weak Solutions and Regularity}

  \begin{defn}
    Consider the linear PDE:
    \[\sum_{\alpha} c_\alpha D^\alpha u(x) = F(x), \quad c_\alpha \text{ constant}, F \text{ given}\]
    A function \(u\) is called a weak solution (a distributional solution) if 
    \[\sum_\alpha c_\alpha D^\alpha u = F \quad \text{in } D'(\Omega).\]
    Namely,
    \[\sum_\alpha (-1)^{|\alpha|} c_\alpha \int_\Omega u (D^\alpha \phi) = \int_\Omega F \phi, \quad \forall \phi \in D(\Omega)\]
  \end{defn}

  Regularity: Given some condition on the data \(F\), what can we say about the smoothness of \(u\)? Can we say that the equation holds in the classical sense? We derived \(G\) (the solution of the Laplace Equation) before in two ways:
  \begin{enumerate}
    \item \(\Delta G(x) = 0\) for all \(x \ne 0\), assuming \(G(x) = G(|x|)\) and \(d \ge 2\)
    \item \(\hat G(k) = \frac{1}{|2\pi k}|^2\), \(d \ge 3\)
  \end{enumerate}

  
  \begin{thm}
    For all \(d \ge 1\) we have \(G \in L_{loc}^1(\mathbb{R^d})\) and \(- \Delta G = \delta_0\) in \(D'(\mathbb{R}^d)\).
  \end{thm}

  \begin{proof}
    Take \(\phi \in D(\mathbb{R}^d)\). Then:
    \begin{align*}
      (- \Delta G_y)(\phi) 
      &= G_y(-\Delta \phi)
      = \int_{\mathbb{R}^d} G_y(x) (-\Delta \phi)(x) \, dx \\
      &= \int_{\mathbb{R}^d} G(y-x) (-\Delta \phi)(x) \, dx \\
      &= [G \star (-\Delta \phi)](y) = (-\Delta)(G \star \phi)(y)
    \end{align*}
    Recall for all \(f \in C^2\), \(-\Delta (G \star f) = f\) pointwise. So we can conclude \(-\Delta G_y = \delta_y\) in \(D'(\mathbb{R}^d)\).
  \end{proof}
  
  \begin{rem}
    In \(d = 1\), \(G(x) = - \frac{1}{2}|x|\), so \(-G'(x) = \sgn(x)/2\), so \(-G''(x) = \delta_0\).
  \end{rem}

  \begin{rem}
    Formally: \(-\Delta(G_y \star \phi) = (-\Delta G_y) \star \phi(x) = (\delta_0 \star \phi)(x) = \int \delta_0(y) \phi(x y) \, dy = \delta_0 (\phi(x-\bullet))\)
  \end{rem}

  \begin{thm}[Poisson's equation with \(L_{loc}^1\) data]\label{PoissonsequationwithL1locdata}
    Let \(f \in L_{loc}^1(\mathbb{R}^d)\) s.t. \(\omega_d f \in L^1(\mathbb{R}^d)\) where 
    \[\omega_d(x) = \begin{cases}
      1 + |x| & d = 1 \\ \log(1 + |x|) & d=2 \\ \frac{1}{1 + |x|^{d-2}} & d \ge 3,
    \end{cases}\]
    then \(u(x) = (G\star f)(x) \in L_{loc}^1(\mathbb{R}^d)\). Moreover \(-\Delta u = f\) in \(D'(\mathbb{R}^d)\). In fact, \(u \in W_{loc}^{1,1}(\mathbb{R}^d)\) and:
    \[\partial_{x_i} u(x) = (\partial_{x_i} G) \star f(x) = \int_{\mathbb{R}^d} (\partial_{x_i} G)(x-y)f(y) \, dy\]
  \end{thm}

  \begin{rem}
    We can also replace \(\mathbb{R}^d\) by \(\Omega\) and get \(- \Delta u = f\) in \(D'(\Omega)\). 
  \end{rem}

  \begin{proof}[Proof of Theorem \ref{PoissonsequationwithL1locdata}]
    First we check that \(u \in L_{loc}^1\). Take any Ball \(B(0, R) \subseteq \mathbb{R}^d\), prove \(\int_B |u| \, dy < \infty\). We have 
    \begin{align*}
      \int_B |u| \, dy 
      &= \int_B \left| \int_{\mathbb{R}^d} G(x-y) f(y) \, dy \right| \, dx \\
      &\le \int_B \int_{\mathbb{R}^d} |G(x-y)||f(y)| \, dy \, dx \\
      &= \int_{\mathbb{R}^d} \left(\int_B |G(x-y) \, dx\right)|f(y)| \, dy
    \end{align*}
    If \(y \notin B = B(0,R)\), then by Newtons's theorem (Mean-value theorem):
    \begin{align*}
      \int_{B(0, R)} |G(x-y)| \, dx
      &= |B(0, r)| |G(y)|
      \le C|B| \omega_d(y)
    \end{align*}
    If \(y \in B\), then \(|y| \le R\), so \(|x-y| \le 2 R\) if \(x \in B\).
    \begin{align*}
      \int_{B(0,R)}|G(x-y)| \, dx
      &\le \int_{|x-y| \le 2 R} |G(x-y)| \, dx
      = \int_{|z| \le 2 R} |G(z)| \, dz 
      \le c_R \text{ as } G \in L_{loc}^1
    \end{align*}
    Thus
    \begin{align*}
      \int_B |u| \, dy 
      \le c_B \int_{|y| \ge R} \omega_d (y) |f(y)|\, dy + c_B \int_{|y| \le R} |f(y)| \, dy < \infty
    \end{align*}
    Let us prove \(- \Delta = f\) in \(D'(\mathbb{R}^d)\). Take \(\phi \in D(\mathbb{R}^d)\). Then:
    \begin{align*}
      (-\Delta u)(\phi)
      &= u(-\Delta \phi)\\
      &= \int_{\mathbb{R}^d} u(x) (-\Delta \phi)(x) \, dx \\
      &= \int_{\mathbb{R}^d}\int_{\mathbb{R}^d} G(x-y) f(y) (-\Delta \phi)(x) \, dx \, dy\\
      &= \int_{\mathbb{R}^d}\int_{\mathbb{R}^d} G(y-x) f(y) (-\Delta \phi)(x) \, dx \, dy \\
      &= \int_{\mathbb{R}^d} [G \star (-\Delta \phi)](y) f(y) \, dy \\
      &= \int_{\mathbb{R}^d} -\Delta(G\star \phi)(y) f(y) \, dy \\
      &= \int_{\mathbb{R}^d} \phi(y) f(y) \, dy
    \end{align*}
    So \(-\Delta u = f\) in \(D'(\mathbb{R}^d)\). We check that \(\partial_i G \star f \in L_{loc}^1(\mathbb{R}^d)\). Note that 
    \[|\partial_i G(x)| \le c \frac{1}{|x|^{d-1}} \in L_{loc}^1(\mathbb{R}^d)\]
    and
    \[\int_{B(0,R)} |\partial_i G(x-y)| \, dx \le \begin{cases}
      C_r \omega_d(y) & |y| \ge R \\ C_r & |y| \le R
    \end{cases}\]
    So \(\int_{B(0,R)} |(\partial_i G\star f)|(y) < \infty\) for all \(R > 0\). For all \(\phi \in D(\mathbb{R}^d)\): 
    \begin{align*}
      -(\partial_i u)(\phi) 
      &= u(\partial_i \phi)
      = \int_{\mathbb{R}^d} u(x) \partial_i \phi(x) \, dx \\
      &= \int_{\mathbb{R}^d} \int_{\mathbb{R}^d} G(x-y) f(y) \partial_i \phi(x) \, dx \, dy \\
      &= \int_{\mathbb{R}^d} \int_{\mathbb{R}^d} G(y-x) f(y) \partial_i \phi(x) \, dx \, dy \\
      &= \int_{\mathbb{R}^d} (G \star \partial_i^y \phi)(y) f(y) \, dy \\
      &= \int_{\mathbb{R}^d}(\partial_i^y G \star \phi)(y) f(y) \, dy \\
      &= \int_{\mathbb{R}^d} \int_{\mathbb{R}^d} \partial_i^y G(y-x) f(y) \phi(x) \, dx \, dy \\
      &= \int_{\mathbb{R}^d} \int_{\mathbb{R}^d} -(\partial_i G)(x-y) f(y) \phi(x) \, dx \, dy \\
      &= - \int_{\mathbb{R}^d} (\partial_i G \star f)(x) \phi(x) \, dx
    \end{align*}
    So \(\partial_i u = \partial_i G \star f \in L_{loc}^1(\mathbb{R}^d)\). Thus \(u \in L_{loc}^1\), \(\partial_i u \in L_{loc}^1\) for all \(i\). So \(u \in W_{loc}^{1,1}(\mathbb{R}^d)\).
  \end{proof}

  Regularity: We consider the Laplace Equation \(\Delta u = 0\) in \(\mathbb{R}^d\).

  
  \begin{lem}[Weyl]\label{weyl}
    If \(\Omega \subseteq \mathbb{R}^d\) open and \(T \in D'(\Omega)\) s.t. \(\Delta T = 0\) in \(D'(\Omega)\), then: \(T = f \in C^\infty(\Omega)\) and \(f\) is a harmonic function.
  \end{lem}

  \begin{proof}
    (\(\Omega = \mathbb{R}^d\)). Take \(\phi \in C_c^\infty\), then \(y \mapsto T(\phi_y) = T(\phi(-y))\) is \(C^\infty\) and \(\Delta_y T(\phi_y) = T((\Delta \phi)_y) = (\Delta T)(\phi_y)=0\). Take \(g \in C_c^\infty\), \(g\) is radial. Then:
    \begin{align*}
      \int_{\mathbb{R}^d} T(\phi_y) g(y) \, dy 
      \overset{\text{(exercise)}}{=} \int_{\mathbb{R}^d} T(\phi)g(y) \, dy 
      = T(\phi) \left(\int_{\mathbb{R}^d} g \, dy \right)
    \end{align*}
  
  
    \begin{ex}
      Let \(f \in C^\infty(\mathbb{R}^d)\) be a harmonic function and \(g \in C_c^\infty\), \(g\) is radial. Then:
      \begin{align*}
        \int_{\mathbb{R}^d} f(x) g(x) \, dx = f(0) \left(\int_{\mathbb{R}^d} g(x) \, dx\right)
      \end{align*}
    \end{ex}

    On the other hand:
    \begin{align*}
      \int_{\mathbb{R}^d} T(\phi_y) g(y) \, dy = T(\phi \star g) = T(g \star \phi) = \int_{\mathbb{R}^d} T(g_y) \phi(y)\, dy
    \end{align*}

    Take \(\int_{\mathbb{R}^d} g \, dy = 1\), then:
    \begin{align*}
      T(\phi) 
      &= \int_{\mathbb{R}^d} T(g_y) \phi(y) \, dy 
    \end{align*}
    For all \(\phi \in C_c^\infty\). Then \(T = T(g_y) \in C^\infty\)
  \end{proof}

  Now lets regard the Poisson Equation \(- \Delta u = f\) in \(D'(\mathbb{R}^d)\).

  \begin{rem}
    Any solution has the form \(u = G \star g + h\) where \(\Delta h = 0\) in \(D'(\mathbb{R}^d)\). By Weyls Lemma (\ref{weyl}), \(h \in C^\infty\), then we only need to consider the regularity of \(G \star f\).
  \end{rem}

  \begin{rem}
    The regularity is a \emph{local question}, namely if we write \[f = f_1 + f_2 = f \phi + f(1-\phi),\] where \(\phi = 1\) in a ball \(B\) and \(\phi \in C_c^\infty\).
  \end{rem}
  Then \(G \star f = G \star f_1 + G \star f_2\). Here \(f_2 = f(1 - \phi) = 0\) in \(B\). With Weyls Lemma (\ref{weyl}), \(G \star f_2 \in C^\infty\).

  \begin{thm}[Low Regularity of Poisson Equation]\label{Low Regularity for Poisson Equation}
    Lef \(f \in L^p(\mathbb{R}^d)\) and compactly supported. Then
    \begin{enumerate}[label=\alph*)]
      \item If \(p \ge 1\), then \begin{itemize}
        \item \(G \star f \in C^1(\mathbb{R}^d)\) if \(d = 1\).
        \item \(G \star f \in L_{loc}^q(\mathbb{R}^d)\) for any \(q < \infty\) if \(d = 2\).
        \item \(G \star f \in L_{loc}^q(\mathbb{R}^d)\) for \(q < \frac{d}{d-2}\) if \(d \ge 3\).
      \end{itemize}
      \item If \(\frac{d}{2} < p \le d\), then \(G \star f \in C_{loc}^{0, \alpha}(\mathbb{R}^d)\) for all \(0 < \alpha < 2 - \frac{d}{p}\), i.e.
      \begin{align*}
        |(G \star f)(x) - (G \star f)(y) | \le C_k|x-y|^\alpha \quad \forall x,y \in K
      \end{align*}
      with \(K\) compact in \(\mathbb{R}^d\).
      \item If \(p > d\), then \(G \star f \in C_{loc}^{1, \alpha} (\mathbb{R}^d)\) for all \(0 < \alpha < 1 - \frac{d}{p}\).
    \end{enumerate}
    where \(G\) is den fundamental solution of the laplace equation.
  \end{thm}

  \begin{eg}
    Let \(r = |x|\)
    \begin{align*}
      u(x) 
      &= \omega(r) = \log(|\log(r)|)
    \end{align*}
    if \(0 < r < \frac{1}{2}\), so \(u\) is well-defined in \(B = B(0, \frac{1}{2})\). We conclude:
    \begin{align*}
      - \Delta_{\mathbb{R}^3} u(x) = - \omega''(r) - \frac{2 \omega'(r)}{r} = f(x) \in L^{\frac{3}{2}(B)}
    \end{align*}
    But the Theorem (b) tells us that if \(f \in L^{\frac{3}{2}}\) then \(u\) is continuous but \(u \notin C(B)\).
  \end{eg}

  \begin{proof}[Proof of theorem \ref{Low Regularity for Poisson Equation}]
    \begin{enumerate}[label=\alph*)]
      \item (\(p=1\)) Why is \(G \star f \in L_{loc}^q\)? Recall from the proof of Youngs inequality: \begin{align*}
        |(G\star f)(x)| 
        &= \left| \int_{\mathbb{R}^d} G(x-y) f(y) \, dy \right| \\
        (\text{Hölder}) \quad &= \left(\int_{\mathbb{R}^d} |G(x-y)|^q |f(y)| \, yd\right)^{\frac{1}{q}}\left(\int_{\mathbb{R}^d} |f(y)| \, dy\right)^{\frac{1}{q'}}
      \end{align*}
      Where \(\frac{1}{q} + \frac{1}{q'} = 1\). Then:
      \begin{align*}
        |(G \star f)(x)|^q 
        &\le C \int_{\mathbb{R}^d} |G(x-y)|^q |f(y)| \, dy
      \end{align*}
      For any Ball \(B = B(0, R) \subseteq \mathbb{R}^d\):
      \begin{align*}
        \int_B |G \star f(x)|^q \, dx
        &\le C \int_B \left(\int_{\mathbb{R}^d} |G(x-y)|^q |f(y)| \, dy\right) \, dx \\
        &= C \int_{\mathbb{R}^d} \left(\int_B |G(x-y)|^q \, dx \right) |f(y)| \, dy
      \end{align*}
      \(G(x) \sim \frac{1}{|x|^{d-2}} \leadsto |G|^{q} = \frac{1}{|x|^{(d-2)q}} \in L_{loc}^1(\mathbb{R}^d)\) if \((d-2)q < 2 \Leftrightarrow q < \frac{d}{d-2}\). Here, \(y \in \supp f \), so \(|y| \le R_1\), then \(|x-y| \le R + R\) if \(|x| \le R\). With \(y \in \supp f\), this implies:
      \begin{align*}
        \int_{B(0,R)}|G(x-y)|^q \, dx \le \int_{|z| \le R + R_1} |G(z)|^q \, dz < \infty
      \end{align*}

      \item \begin{align*}
        (G \star f)(x) - (G \star f)(y) 
        &= \int_{\mathbb{R}^d} (G(x-z)-G(y-z)) f(z) \, dz
      \end{align*}
      So \begin{align*}
        |G \star f(x) - (G\star f)(y)| 
        &\le C \int_{\mathbb{R}^d} \left| \frac{1}{|x-z|^{d-2}} - \frac{1}{|y-z|^{d-2}}\right| |f(z)| \, dz
        \end{align*}
        for all \(x, y \in \mathbb{R}^d\):
        \begin{align*}
          \left| \frac{1}{|x|^{d-2}} - \frac{1}{|y|^{d-2}} \right|
          &= \left| \left( \frac{1}{|x|} - \frac{1}{|y|}\right) \left(\frac{1}{|x|^{d-3}} + \cdots + \frac{1}{|y|^{d-3}}\right) \right| \\
          &\le C \frac{||x|-|y||}{|x||y|} \max \left(\frac{1}{|x|^{d-3}}, \frac{1}{|y|^{d-3}}\right) \\
          &= C \frac{|x-y|}{|x||y|} \max \left(\frac{1}{|x|^{d-3}}, \frac{1}{|y|^{d-3}}\right) \\
          &\le C \max(|x|, |y|)^{1-\alpha} \frac{|x-y|^\alpha}{|x||y|} \max \left(\frac{1}{|x|^{d-3}}, \frac{1}{|y|^{d-3}}\right)
        \end{align*}
        as
        \begin{align*}
          ||x|-|y|| 
          &\le \min \left(|x-y|, \max(|x|, |y|)\right)
          \le |x-y|^\alpha \max(|x|, |y|)^{1-\alpha}
        \end{align*}
        Thus, for all \(x,y \in \mathbb{R}^d\):
        \begin{align*}
          \left| \frac{1}{|x|^{d-2}}- \frac{1}{|y|^{d-2}}\right| 
          &\le C |x-y|^\alpha \frac{\max(|x|, |y|)^{1-\alpha}}{|x||y|} \max \left(\frac{1}{|x|^{d-3}}, \frac{1}{|y|^{d-3}}\right) \\
          &\le C |x-y|^\alpha \max \left(\frac{1}{|x|^{d-2+\alpha}}, \frac{1}{|y|^{d-2+\alpha}}\right)
        \end{align*}
        So we get \begin{align*}
          \left| \frac{1}{|x-y|^{d-2}}- \frac{1}{|y-z|^{d-2}}\right|
          &\le C |x-y|^\alpha \max \left(\frac{1}{|x-z|^{d-2+\alpha}}, \frac{1}{|y-z|^{d-2+\alpha}}\right)
        \end{align*}
        Therefore:
        \begin{align*}
          &|G \star f(x) - G \star f(y)| \\
          &\quad\le C \int_{\mathbb{R}^d}|x-y|^\alpha \max \left(\frac{1}{|x-z|^{d-2+\alpha}}, \frac{1}{|y-z|^{d-2+\alpha}}\right) |f(z)| \, dz \\
          &\quad\le C |x-y|^\alpha \left(\sup_{\xi \in \mathbb{R^d}} \int_{\mathbb{R}^d} \frac{1}{|\xi - z|^{d-2+\alpha}} |f(z)| \, dz\right)
        \end{align*}
        Claim: If \(f \in L^p(\mathbb{R}^d)\) is compactly supported, \(d \ge p > \frac{d}{2}\), then: 
        \begin{align*}
          \sup_{\xi \in \mathbb{R}^d} \int_{\mathbb{R}^d} \frac{1}{|\xi - z|^{d - 2 + d}}|f(z)| \, dz < \infty
        \end{align*}
        for all \(0 < \alpha < 2 - \frac{d}{p}\). Assume \(\supp f \subseteq \overline{B(0, R_1)}\). Consider 2 cases:
        \begin{itemize}
          \item If \(|\xi| > 2 R_1\), then: \(|\xi - z| \ge R_1\) for all \(z \in B(0, R_1)\). Hence: \begin{align*}
            \int_{\mathbb{R}^d} \frac{1}{|\xi -z|^{d-2+\alpha}}|f(z)| \, dz
            &\le \frac{1}{R_1^{d-2+\alpha}} \|f\|_{L^1} < \infty
          \end{align*}
          \item If \(|\xi| \le 2 R_1\), then: \(|\xi - z| \le 3 R_1\) for all \(z \in B(0, R_1)\):
          \begin{align*}
            \int_{\mathbb{R}^d} \frac{1}{|\xi - z|^{d-2+\alpha}} |f(z)| \, dz
            &\le \int_{|\xi - z| \le 3 R_1} \frac{1}{|\xi - z|^{d - 2 + \alpha}} |f(z)| \, dz \\
            (\text{Hölder}), \left(\frac{1}{p} + \frac{1}{q} = 1\right) \quad &\le \left(\int_{\mathbb{R}^d}|f(z)|^p \, dz\right)^{\frac{1}{p}}\\
            &\quad \cdot \left(\int_{|\xi - z| \le 3 R_1} \frac{1}{|\xi - z|^{(d - 2 + \alpha)q}}\right)^{\frac{1}{q}} \\
            &= \|f\|_{L^p} \left(\int_{|z| \le 3 R_1} \frac{1}{|z|^{(d-2+\alpha)q}} \, dz\right)^{\frac{1}{q}} < \infty
          \end{align*}
        \end{itemize}
        \item (\(d \ge 3\)) We already know: \begin{align*}
          \partial_i(G \star f) =(\partial_i G \star f) \in L_{loc}^1(\mathbb{R}^d)
        \end{align*}
        as \(\omega_d f \in L^1(\mathbb{R}^d)\). We claim that \(\partial_i G \star f \in C^{0, \alpha}(\mathbb{R}^d)\). So \(G \star f \in C^{1, \alpha}(\mathbb{R}^d)\) by the equivalence between the classical and the distributional derivatives. Exercise. Hint:
        \begin{align*}
          |\partial_i G\star f(x) - \partial_i G \star f(y)|
          &\le \int_{\mathbb{R}^d} |\partial_i G(x-z) - \partial_i G(y-z)||f(z)| \, dz,
        \end{align*}
        \(\partial_i G(x) = \frac{-x_i}{d|B_1||x|^d}\). \(\leadsto\) Need to estimate \(|\partial_i G(x) - \partial_i G(y)| \le C|x-y|^\alpha\). \qedhere
    \end{enumerate}
  \end{proof}

  \begin{thm}[High regularity for Poisson's equation]\label{High regularity for Poisson's equation}
    Let \(f \in C^{0, \alpha}(\mathbb{R}^d)\), \(0 < \alpha < 1\) be compactly supported. Then \(G \star f \in C^{2, \alpha}(\mathbb{R}^d)\).
  \end{thm}

  \begin{rem}
    \((- \Delta u = f)\) and \(f \in C(\mathbb{R}^d)\) does not imply that \(u \in C^2(\mathbb{R}^d)\). (exercise)
  \end{rem}

  \begin{rem}
    If \(f \in C^{k, \alpha}(\mathbb{R}^d)\), \(k \in \{0, 1, \dots\}\), \(0 < \alpha < 1\) is compactly supported, then \(G \star f \in C^{k + 2, \alpha}(\mathbb{R}^d)\). This more general statement is a consequence of the theorem since
    \[D^\beta(G \star f) = G \star \underbrace{(D^\beta f)}_{\in C^{0, \alpha}}\]
    for all \(\beta = (\beta_1, \dots, \beta_d)\), \(|\beta| \le k\).
  \end{rem}

  \begin{proof}[Proof of theorem \ref{High regularity for Poisson's equation}]
    Since \(f \in L^p\) for all \(p \le \infty\) by the low regularity (\ref{Low Regularity for Poisson Equation}) we have \(G \star f \in C^{1, \alpha}\) and \(\partial_i (G \star f) = \partial_i G \star f\)
    in the classical sense. We will compute the distributional derivatives \(\partial_i \partial_j (G \star f)\) and prove that they are Hölder continuous. Compute \(\partial_j \partial_i (G \star f)\): For all \(\phi \in C_c^\infty(\mathbb{R}^d)\) we have
    \begin{align*}
      -(\partial_j \partial_i G \star f)(\phi)
      &= (\underbrace{\partial_i(G \star f)}_{\in C})(\partial_j \phi) \\
      &= \int_{\mathbb{R}^d}((\partial_i G)\star f)(x) \partial_j \phi(x) \, dx \\
      &= \int_{\mathbb{R}^d}\int_{\mathbb{R}^d} \partial_i G(x-y) f(y) \partial_j \phi(x) \, dx \, dy \\
      &= \int_{\mathbb{R}^d} f(y) \left[\int_{\mathbb{R}^d} \partial_i G(x-y)\partial \phi(x) \, x\right] \, dy \\
      &\overset{?}{=} \int_{\mathbb{R}^d} \square \phi(y) \, dy
    \end{align*}
    Recall: \(\partial_i G(x) = \frac{-x_i}{d|B_1||x|^d}, \partial_i \partial_j G(x) = \frac{1}{|B_1|}\left[\frac{x_i x_j}{|x|^2}- \frac{\delta_{ij}}{d}\right] \frac{1}{|x|^d}\). We have:
    \begin{align*}
      \int_{\mathbb{R}^d} \partial_i G(x-y) \partial_j \phi(x) \, dx
      &= \lim_{\epsilon \to 0^+}\int_{|x-y| \ge \epsilon} \partial_i G(x-y) \partial_j \phi(x) \, dx
    \end{align*}
    By dominated convergence we have \(|\partial_i G(x-y) \partial_j \phi(x)| \in L^1(dx)\).
    By the Gauss-Green-Theorem (\ref{gauss-green}) for all \(\epsilon > 0\):
    \begin{align*}
      &\int_{|x-y| \ge \epsilon} \partial_i G(x-y) \partial_j \phi(x) \, dx \\
      &\quad= \int_{\partial B(y, \epsilon)}\partial_i G(x-y) \phi(x) \omega_j \, dS(x) - \int_{|x-y| \ge \epsilon} \partial_j \partial_i G(x-y) \phi(x) \, dx
    \end{align*}
    Where \(\omega = \frac{x-y}{|x-y|}\). For the boundary term:
    \begin{align*}
      - \int_{\partial B(y, \epsilon)} \partial_i G(x-y) \phi(x) \omega_j \, dS(x)
      &= - \epsilon^{d-1} \int_{\partial B(0, 1)} \partial_i G(\epsilon \omega) \phi(y + \epsilon \omega) \omega_j \, d\omega \\
      (\star) \quad &= \int_{\partial B(0, 1)} \frac{1}{d|B_1|} \omega_i \omega_j \phi(y + \epsilon \omega) \, d \omega \\
      &\xrightarrow{\epsilon \to 0} \int_{\partial B(0, 1)} \frac{1}{d|B_1|} \omega_i \omega_j \phi(y) \, d\omega \\
      &= \frac{1}{d} \delta_{i,j} \phi(y)
    \end{align*}
    \((\star)\) \ \(\partial_i G(x) = \frac{- x_i}{d|B_1||x|^d}\)
    , so \(\partial_i G(\epsilon \omega) = - \frac{- \omega_i}{d |B_1|} \frac{1}{\epsilon^{d-1}}.\) for all \(|\omega| = 1\). \\
    
    Now we split:
    \begin{align*}
      &- \int_{|x-y| \ge \epsilon} \partial_i \partial_j G(x-y) \phi(x) \, dx \\
      &\quad= - \int_{|x-y| \ge 1}  \partial_i \partial_j G(x-y) \phi(x) \, dx - \int_{1 \ge |x-y| \ge \epsilon}  \partial_i \partial_j G(x-y) \phi(x) \, dx
    \end{align*}
    The key observation is: \(\int_{\partial B(0, r)} \partial_i \partial_j G(x) \, dx = 0\) since \[\partial_i \partial_j G(x) = \frac{1}{|B_1|}\left(\omega_i \omega_j - \frac{\partial_{ij}}{d}\right) \frac{1}{|x|^d},\] \(\omega = \frac{x}{|x|}\). For example if \(i = 1, j = 2, r = 1\):
    \begin{align*}
      \int_{\partial B(0, 1)} \partial_1 \partial_2 G(x) \, dS(x) 
      &= \frac{1}{|B_1|} \int_{\partial B(0, 1)} \omega_1 \omega_2 \, d \omega,
    \end{align*}
    \(\partial B(0,1) = \{\omega \mid |\omega| = 1\}\). Consider: \(\omega \mapsto R \omega, (\omega_1, \dots, \omega_d) \mapsto (- \omega_1, \omega_2, \dots, \omega_d)\). Then
    \begin{align*}
      -\int_{1 \ge |x-y| \ge \epsilon} \partial_i \partial_j G(x-y) \phi(y) \, dx = 0.
    \end{align*}
    So 
    \begin{align*}
      - \int_{1 \ge |x-y| \ge \epsilon} \partial_i \partial_j G(x-y) \phi(x) \, dx &= - \int_{1 \ge |x-y|\ge \epsilon} \partial_i \partial_j G(x-y) (\phi(x) - \phi(y)) \, dx
    \end{align*}
    In summary:
    \begin{align*}
      \partial_i \partial_j (G \star f)(\phi)
      &= \int_{\mathbb{R}^d} f(y) \left(\int_{\mathbb{R}^d} \partial_i G(x-y) \partial_j \phi(x) \, dx\right) \, dy \\
      &= \int_{\mathbb{R}^d} f(y) \frac{1}{d} \partial_{ij} \phi(y) \, dy \\
      & \quad - \int_{\mathbb{R}^d} f(y) \left(\int_{|x-y| > 1} \partial_i \partial_j G(x-y) \phi(x) \, dx\right) \\
      & \quad - \int_{\mathbb{R}^d} \left[\lim_{\epsilon \to 0} \int_{1 \ge |x-y| \ge \epsilon} \underbrace{\partial_i \partial_j G(x-y) (\phi(x) - \phi(y)) \, dx}_{\smash{\le \frac{C}{|x-y|^d}|x-y| \|\nabla \phi\|_{L^\infty} \le \frac{C}{|x-y|^{d-1}} \in L_{loc}^1(dx) \forall y}}\right] \, dy \\
      &= \int_{\mathbb{R}^d} \frac{\delta_{ij}}{d} f(x) \phi(x) \, dx
      - \int_{\mathbb{R}^d} \phi(x) \left(\int_{|x-y| > 1} \partial_i \partial_j G(x-y) f(y) \, dy\right) \, dx \\
      & \quad - \int_{\mathbb{R}^d} \phi(x) \left[\int_{|x-y| \le 1} \partial_i \partial_j G(x-y) (f(y)-f(x))\, dy\right] \, dx
    \end{align*}
    Conclusion: 
    \begin{align*}
      \partial_i \partial_j (G \star f) (x) &= - \frac{\delta_{ij}}{d} f(x) + \int_{|x-y| > 1} \partial_i \partial_j G(x-y) f(y) \, dy \\
      &\quad + \int_{|x-y| \le 1} \partial_i \partial_j G(x-y) \left(f(y) - f(x)\right) \, dy
    \end{align*}
  \end{proof}

  

\end{document}
